/*! For license information please see main.f4e28810.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var j=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case _:return"Suspense";case S:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var P=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],U=-1;function F(e){return{current:e}}function B(e){0>U||(e.current=M[U],M[U]=null,U--)}function V(e,t){U++,M[U]=e.current,e.current=t}var z,H,W=F(null),K=F(null),q=F(null),G=F(null);function Y(e,t){switch(V(q,t),V(K,e),V(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(W),V(W,e)}function Q(){B(W),B(K),B(q)}function X(e){null!==e.memoizedState&&V(G,e);var t=W.current,n=vd(t,e.type);t!==n&&(V(K,e),V(W,n))}function J(e){K.current===e&&(B(W),B(K)),G.current===e&&(B(G),uh._currentValue=L)}function Z(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||"",H=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+z+e+H}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(we(e)/Ee|0)|0},we=Math.log,Ee=Math.LN2;var _e=256,Se=262144,Ce=4194304;function ke(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ne(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=ke(r):0!==(a&=o)?i=ke(a):n||0!==(n=o&~e)&&(i=ke(n)):0!==(o=r&~s)?i=ke(o):0!==a?i=ke(a):n||0!==(n=r&~e)&&(i=ke(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function je(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Te(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ie(){var e=Ce;return 0===(62914560&(Ce<<=1))&&(Ce=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function De(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ue(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:kh(e.type)}function Fe(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var Be=Math.random().toString(36).slice(2),Ve="__reactFiber$"+Be,ze="__reactProps$"+Be,He="__reactContainer$"+Be,We="__reactEvents$"+Be,Ke="__reactListeners$"+Be,qe="__reactHandles$"+Be,Ge="__reactResources$"+Be,Ye="__reactMarker$"+Be;function Qe(e){delete e[Ve],delete e[ze],delete e[We],delete e[Ke],delete e[qe]}function Xe(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[Ve])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[Ve]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function $e(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ye]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(at,i)&&(st.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?xt(e,a,dt(t)):null!=n?xt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function xt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(P(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Nt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&kt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function jt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),It=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return It.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Pt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Lt=null;function Mt(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[ze]||null;if(!i)throw Error(a(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ut=!1;function Ft(e,t,n){if(Ut)return e(t,n);Ut=!0;try{return e(t)}finally{if(Ut=!1,(null!==Dt||null!==Lt)&&($c(),Dt&&(t=Dt,e=Lt,Lt=Dt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[ze]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Vt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Jh){zt=!1}var Wt=null,Kt=null,qt=null;function Gt(){if(qt)return qt;var e,t,n=Kt,r=n.length,i="value"in Wt?Wt.value:Wt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Yt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Qt(){return!0}function Xt(){return!1}function Jt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Qt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qt)},persist:function(){},isPersistent:Qt}),t}var Zt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=f({},tn,{view:0,detail:0}),sn=Jt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),on=Jt(an),ln=Jt(f({},an,{dataTransfer:0})),cn=Jt(f({},rn,{relatedTarget:0})),un=Jt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Jt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Jt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Jt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Yt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Yt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Yt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Jt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Jt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Jt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=Jt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=Jt(f({},tn,{newState:0,oldState:0})),Sn=[9,13,27,32],Cn=Vt&&"CompositionEvent"in window,kn=null;Vt&&"documentMode"in document&&(kn=document.documentMode);var Nn=Vt&&"TextEvent"in window&&!kn,jn=Vt&&(!Cn||kn&&8<kn&&11>=kn),Tn=String.fromCharCode(32),In=!1;function An(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Ln(e,t,n,r){Dt?Lt?Lt.push(r):Lt=[r]:Dt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Un=null;function Fn(e){Qu(e,0)}function Bn(e){if(pt(Ze(e)))return e}function Vn(e,t){if("change"===e)return t}var zn=!1;if(Vt){var Hn;if(Vt){var Wn="oninput"in document;if(!Wn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Wn="function"===typeof Kn.oninput}Hn=Wn}else Hn=!1;zn=Hn&&(!document.documentMode||9<document.documentMode)}function qn(){Mn&&(Mn.detachEvent("onpropertychange",Gn),Un=Mn=null)}function Gn(e){if("value"===e.propertyName&&Bn(Un)){var t=[];Ln(t,Un,e,Ot(e)),Ft(Fn,t)}}function Yn(e,t,n){"focusin"===e?(qn(),Un=n,(Mn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&qn()}function Qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Un)}function Xn(e,t){if("click"===e)return Bn(t)}function Jn(e,t){if("input"===e||"change"===e)return Bn(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=Vt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==mt(r)||("selectionStart"in(r=ar)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=rd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}Vt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),xr=mr("transitionstart"),wr=mr("transitioncancel"),Er=mr("transitionend"),_r=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){_r.set(e,t),rt(t,[e])}Sr.push("scrollEnd");var kr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Nr=[],jr=0,Tr=0;function Ir(){for(var e=jr,t=Tr=jr=0;t<e;){var n=Nr[t];Nr[t++]=null;var r=Nr[t];Nr[t++]=null;var i=Nr[t];Nr[t++]=null;var s=Nr[t];if(Nr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function Ar(e,t,n,r){Nr[jr++]=e,Nr[jr++]=t,Nr[jr++]=n,Nr[jr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Ar(e,t,n,r),Dr(e)}function Pr(e,t){return Ar(e,null,null,t),Dr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-xe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Wc)throw Wc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Mr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Fr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Ur(31,n,t,i)).elementType=N,e.lanes=s,e;case y:return Hr(n.children,i,s,t);case v:o=8,i|=24;break;case b:return(e=Ur(12,n,t,2|i)).elementType=b,e.lanes=s,e;case _:return(e=Ur(13,n,t,i)).elementType=_,e.lanes=s,e;case S:return(e=Ur(19,n,t,i)).elementType=S,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case x:o=9;break e;case E:o=11;break e;case C:o=14;break e;case k:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Hr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Kr(e){var t=Ur(18,null,null,0);return t.stateNode=e,t}function qr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=Gr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Gr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Qr=[],Xr=0,Jr=null,Zr=0,$r=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Qr[Xr++]=Zr,Qr[Xr++]=Jr,Jr=e,Zr=t}function si(e,t,n){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-xe(r)-1;r&=~(1<<i),n+=1;var s=32-xe(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ni=1<<32-xe(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function ai(e){null!==e.return&&(ii(e,1),si(e,1,0))}function oi(e){for(;e===Jr;)Jr=Qr[--Xr],Qr[Xr]=null,Zr=Qr[--Xr],Qr[Xr]=null;for(;e===ti;)ti=$r[--ei],$r[ei]=null,ri=$r[--ei],$r[ei]=null,ni=$r[--ei],$r[ei]=null}function li(e,t){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,di=!1,hi=null,fi=!1,pi=Error(a(519));function mi(e){throw wi(Yr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ve]=e,t[ze]=r,n){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(n=0;n<Gu.length;n++)Xu(Gu[n],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),_t(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||cd(t.textContent,n)?(null!=r.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=r.onScroll&&Xu("scroll",t),null!=r.onScrollEnd&&Xu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!di)return yi(e),di=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Dd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=Dd(e)}else 27===n?(n=ui,kd(e.type)?(e=Od,Od=null,ui=e):ui=n):ui=ci?Pd(e.stateNode.nextSibling):null;return!0}function bi(){ui=ci=null,di=!1}function xi(){var e=hi;return null!==e&&(null===Ic?Ic=e:Ic.push.apply(Ic,e),hi=null),e}function wi(e){null===hi?hi=[e]:hi.push(e)}var Ei=F(null),_i=null,Si=null;function Ci(e,t,n){V(Ei,t._currentValue),t._currentValue=n}function ki(e){e._currentValue=Ei.current,B(Ei)}function Ni(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ni(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ni(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ti(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}i=i.return}null!==e&&ji(t,e,n,r),t.flags|=262144}function Ii(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ai(e){_i=e,Si=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ri(e){return Oi(_i,e)}function Pi(e,t){return null===_i&&Ai(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Si){if(null===e)throw Error(a(308));Si=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Si=Si.next=t;return n}var Di="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Li=r.unstable_scheduleCallback,Mi=r.unstable_NormalPriority,Ui={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fi(){return{controller:new Di,data:new Map,refCount:0}}function Bi(e){e.refCount--,0===e.refCount&&Li(Mi,function(){e.controller.abort()})}var Vi=null,zi=0,Hi=0,Wi=null;function Ki(){if(0===--zi&&null!==Vi){null!==Wi&&(Wi.status="fulfilled");var e=Vi;Vi=null,Hi=0,Wi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qi=O.S;O.S=function(e,t){Pc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Vi){var n=Vi=[];zi=0,Hi=zu(),Wi={status:"pending",value:void 0,then:function(e){n.push(e)}}}zi++,t.then(Ki,Ki)}(0,t),null!==qi&&qi(e,t)};var Gi=F(null);function Yi(){var e=Gi.current;return null!==e?e:pc.pooledCache}function Qi(e,t){V(Gi,null===t?Gi.current:t.pool)}function Xi(){var e=Yi();return null===e?null:{parent:Ui._currentValue,pool:e}}var Ji=Error(a(460)),Zi=Error(a(474)),$i=Error(a(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw is=t,Ji}}function rs(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw is=t,Ji;throw t}}var is=null;function ss(){if(null===is)throw Error(a(459));var e=is;return is=null,e}function as(e){if(e===Ji||e===$i)throw Error(a(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ds(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Br(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===k&&rs(s)===t.type)?(us(t=i(t,n.props),n),t.return=e,t):(us(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=qr(t,e.mode,n)).return=e,t;case k:return h(e,t=rs(t),n)}if(P(t)||I(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,cs(t),n);if(t.$$typeof===w)return h(e,Pi(e,t),n);ds(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case k:return f(e,t,n=rs(n),r)}if(P(n)||I(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===w)return f(e,t,Pi(e,n),r);ds(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return p(e,t,n,r=rs(r),i)}if(P(r)||I(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,cs(r),i);if(r.$$typeof===w)return p(e,t,n,Pi(t,r),i);ds(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===k&&rs(b)===c.type){n(l,c.sibling),us(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(us(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return o(l);case k:return v(l,c,u=rs(u),d)}if(P(u))return function(i,a,o,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===o.length)return n(i,d),di&&ii(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(a=s(d,a,m),null===u?c=d:u.sibling=d,u=d);return di&&ii(i,m),c}for(d=r(d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),di&&ii(i,m),c}(l,c,u,d);if(I(u)){if("function"!==typeof(b=I(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=s(b,o,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),di&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return di&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),di&&ii(i,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,cs(u),d);if(u.$$typeof===w)return v(l,c,Pi(l,u),d);ds(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var i=v(e,t,n,r);return os=null,i}catch(a){if(a===Ji||a===$i)throw a;var s=Ur(29,a,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=hs(!0),ps=hs(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Or(e,null,n),t}return Ar(e,r,t,n),Dr(e)}function xs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function ws(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Es=!1;function _s(){if(Es){if(null!==Wi)throw Wi}}function Ss(e,t,n,r){Es=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=-536870913&o.lane,p=h!==o.lane;if(p?(gc&h)===h:(r&h)===h){0!==h&&h===Hi&&(Es=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=f({},d,h);break e;case 2:ms=!0}}null!==(h=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),Sc|=a,e.lanes=a,e.memoizedState=d}}function Cs(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function ks(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Cs(n[e],t)}var Ns=F(null),js=F(0);function Ts(e,t){V(js,e=Ec),V(Ns,t),Ec=e|t.baseLanes}function Is(){V(js,Ec),V(Ns,Ns.current)}function As(){Ec=js.current,B(Ns),B(js)}var Rs=F(null),Ps=null;function Os(e){var t=e.alternate;V(Fs,1&Fs.current),V(Rs,e),null===Ps&&(null===t||null!==Ns.current||null!==t.memoizedState)&&(Ps=e)}function Ds(e){V(Fs,Fs.current),V(Rs,e),null===Ps&&(Ps=e)}function Ls(e){22===e.tag?(V(Fs,Fs.current),V(Rs,e),null===Ps&&(Ps=e)):Ms()}function Ms(){V(Fs,Fs.current),V(Rs,Rs.current)}function Us(e){B(Rs),Ps===e&&(Ps=null),B(Fs)}var Fs=F(0);function Bs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ad(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vs=0,zs=null,Hs=null,Ws=null,Ks=!1,qs=!1,Gs=!1,Ys=0,Qs=0,Xs=null,Js=0;function Zs(){throw Error(a(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){return Vs=s,zs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?go:yo,Gs=!1,s=n(r,i),Gs=!1,qs&&(s=na(t,n,r,i)),ta(e),s}function ta(e){O.H=mo;var t=null!==Hs&&null!==Hs.next;if(Vs=0,Ws=Hs=zs=null,Ks=!1,Qs=0,Xs=null,t)throw Error(a(300));null===e||Po||null!==(e=e.dependencies)&&Ii(e)&&(Po=!0)}function na(e,t,n,r){zs=e;var i=0;do{if(qs&&(Xs=null),Qs=0,qs=!1,25<=i)throw Error(a(301));if(i+=1,Ws=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=vo,s=t(n,r)}while(qs);return s}function ra(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?ca(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(zs.flags|=1024),t}function ia(){var e=0!==Ys;return Ys=0,e}function sa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(Ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ks=!1}Vs=0,Ws=Hs=zs=null,qs=!1,Qs=Ys=0,Xs=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ws?zs.memoizedState=Ws=e:Ws=Ws.next=e,Ws}function la(){if(null===Hs){var e=zs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Ws?zs.memoizedState:Ws.next;if(null!==t)Ws=t,Hs=e;else{if(null===e){if(null===zs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Ws?zs.memoizedState=Ws=e:Ws=Ws.next=e}return Ws}function ca(e){var t=Qs;return Qs+=1,null===Xs&&(Xs=[]),e=ns(Xs,e,t),t=zs,null===(null===Ws?t.memoizedState:Ws.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?go:yo),e}function ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ca(e);if(e.$$typeof===w)return Ri(e)}throw Error(a(438,String(e)))}function da(e){var t=null,n=zs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=zs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},zs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=j;return t.index++,n}function ha(e,t){return"function"===typeof t?t(e):t}function fa(e){return pa(la(),Hs,e)}function pa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gc&h)===h:(Vs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((Vs&f)===f){u=u.next,f===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,zs.lanes|=f,Sc|=f}h=u.action,Gs&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,zs.lanes|=h,Sc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Zn(s,e.memoizedState)&&(Po=!0,d&&null!==(n=Wi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ma(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Zn(s,t.memoizedState)||(Po=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ga(e,t,n){var r=zs,i=la(),s=di;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Zn((Hs||i).memoizedState,n);if(o&&(i.memoizedState=n,Po=!0),i=i.queue,Va(ba.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Ws&&1&Ws.memoizedState.tag){if(r.flags|=2048,La(9,{destroy:void 0},va.bind(null,r,i,n,t),null),null===pc)throw Error(a(349));s||0!==(127&Vs)||ya(r,t,n)}return n}function ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=zs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},zs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function va(e,t,n,r){t.value=n,t.getSnapshot=r,xa(t)&&wa(e)}function ba(e,t,n){return n(function(){xa(t)&&wa(e)})}function xa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function wa(e){var t=Pr(e,2);null!==t&&Yc(t,e,2)}function Ea(e){var t=oa();if("function"===typeof e){var n=e;if(e=n(),Gs){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:e},t}function _a(e,t,n,r){return e.baseState=n,pa(e,Hs,"function"===typeof r?r:ha)}function Sa(e,t,n,r,i){if(ho(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Ca(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ca(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,a={};O.T=a;try{var o=n(i,r),l=O.S;null!==l&&l(a,o),ka(e,t,o)}catch(c){ja(e,t,c)}finally{null!==s&&null!==a.types&&(s.types=a.types),O.T=s}}else try{ka(e,t,s=n(i,r))}catch(u){ja(e,t,u)}}function ka(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Na(e,t,n)},function(n){return ja(e,t,n)}):Na(e,t,n)}function Na(e,t,n){t.status="fulfilled",t.value=n,Ta(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ca(e,n)))}function ja(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ta(t),t=t.next}while(t!==r)}e.action=null}function Ta(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ia(e,t){return t}function Aa(e,t){if(di){var n=pc.formState;if(null!==n){e:{var r=zs;if(di){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Pd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Pd(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},n.queue=r,n=lo.bind(null,zs,r),r.dispatch=n,r=Ea(!1),s=uo.bind(null,zs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=i,n=Sa.bind(null,zs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ra(e){return Pa(la(),Hs,e)}function Pa(e,t,n){if(t=pa(e,t,Ia)[0],e=fa(ha)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ca(t)}catch(a){if(a===Ji)throw $i;throw a}else r=t;var i=(t=la()).queue,s=i.dispatch;return n!==t.memoizedState&&(zs.flags|=2048,La(9,{destroy:void 0},Oa.bind(null,i,n),null)),[r,s,e]}function Oa(e,t){e.action=t}function Da(e){var t=la(),n=Hs;if(null!==n)return Pa(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function La(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=zs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},zs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return la().memoizedState}function Ua(e,t,n,r){var i=oa();zs.flags|=e,i.memoizedState=La(1|t,{destroy:void 0},n,void 0===r?null:r)}function Fa(e,t,n,r){var i=la();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Hs&&null!==r&&$s(r,Hs.memoizedState.deps)?i.memoizedState=La(t,s,n,r):(zs.flags|=e,i.memoizedState=La(1|t,s,n,r))}function Ba(e,t){Ua(8390656,8,e,t)}function Va(e,t){Fa(2048,8,e,t)}function za(e){var t=la().memoizedState;return function(e){zs.flags|=4;var t=zs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},zs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return Fa(4,2,e,t)}function Wa(e,t){return Fa(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function qa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4,4,Ka.bind(null,t,e),n)}function Ga(){}function Ya(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$s(t,r[1]))return r[0];if(r=e(),Gs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Xa(e,t,n){return void 0===n||0!==(1073741824&Vs)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Gc(),zs.lanes|=e,Sc|=e,n)}function Ja(e,t,n,r){return Zn(n,t)?n:null!==Ns.current?(e=Xa(e,n,r),Zn(e,t)||(Po=!0),e):0===(42&Vs)||0!==(1073741824&Vs)&&0===(261930&gc)?(Po=!0,e.memoizedState=n):(e=Gc(),zs.lanes|=e,Sc|=e,t)}function Za(e,t,n,r,i){var s=D.p;D.p=0!==s&&8>s?s:8;var a=O.T,o={};O.T=o,uo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),qc());else co(e,t,r,qc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},qc())}finally{D.p=s,null!==a&&null!==o.types&&(a.types=o.types),O.T=a}}function $a(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=to(e).queue;Za(e,i,t,L,null===n?$a:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},qc())}function ro(){return Ri(uh)}function io(){return la().memoizedState}function so(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=qc(),r=bs(t,e=vs(n),n);return null!==r&&(Yc(r,t,n),xs(r,t,n)),t={cache:Fi()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=qc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Rr(e,t,n,r))&&(Yc(n,e,r),po(n,t,r))}function lo(e,t,n){co(e,t,n,qc())}function co(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Zn(o,a))return Ar(e,t,i,0),null===pc&&Ir(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Yc(n,e,r),po(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:zu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&Yc(t,e,2)}function ho(e){var t=e.alternate;return e===zs||null!==t&&t===zs}function fo(e,t){qs=Ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var mo={readContext:Ri,use:ua,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};mo.useEffectEvent=Zs;var go={readContext:Ri,use:ua,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:Ba,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){Ua(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(Gs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var i=n(t);if(Gs){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,zs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=Ea(e)).queue,n=lo.bind(null,zs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ga,useDeferredValue:function(e,t){return Xa(oa(),e,t)},useTransition:function(){var e=Ea(!1);return e=Za.bind(null,zs,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=zs,i=oa();if(di){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pc)throw Error(a(349));0!==(127&gc)||ya(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ba(ba.bind(null,r,s,e),[e]),r.flags|=2048,La(9,{destroy:void 0},va.bind(null,r,s,n,t),null),n},useId:function(){var e=oa(),t=pc.identifierPrefix;if(di){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-xe(ni)-1)).toString(32)+n),0<(n=Ys++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Js++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:Aa,useActionState:Aa,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,zs,!0,n),n.dispatch=t,[e,t]},useMemoCache:da,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,zs)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ri,use:ua,useCallback:Ya,useContext:Ri,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Qa,useReducer:fa,useRef:Ma,useState:function(){return fa(ha)},useDebugValue:Ga,useDeferredValue:function(e,t){return Ja(la(),Hs.memoizedState,e,t)},useTransition:function(){var e=fa(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){return _a(la(),0,e,t)},useMemoCache:da,useCacheRefresh:so};yo.useEffectEvent=za;var vo={readContext:Ri,use:ua,useCallback:Ya,useContext:Ri,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Qa,useReducer:ma,useRef:Ma,useState:function(){return ma(ha)},useDebugValue:Ga,useDeferredValue:function(e,t){var n=la();return null===Hs?Xa(n,e,t):Ja(n,Hs.memoizedState,e,t)},useTransition:function(){var e=ma(ha)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:Da,useActionState:Da,useOptimistic:function(e,t){var n=la();return null!==Hs?_a(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:da,useCacheRefresh:so};function bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=za;var xo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qc(),i=vs(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),xs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qc(),i=vs(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Yc(t,e,r),xs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qc(),r=vs(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Yc(t,e,n),xs(t,e,n))}};function wo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function Eo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xo.enqueueReplaceState(t,t.state,null)}function _o(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function So(e){kr(e)}function Co(e){console.error(e)}function ko(e){kr(e)}function No(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function jo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function To(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){No(e,t)},n}function Io(e){return(e=vs(e)).tag=3,e}function Ao(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){jo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){jo(t,n,r),"function"!==typeof i&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(a(461)),Po=!1;function Oo(e,t,n,r){t.child=null===e?ps(t,null,n,r):fs(t,e.child,n,r)}function Do(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ai(t),r=ea(e,t,n,a,s,i),o=ia(),null===e||Po?(di&&o&&ai(t),t.flags|=1,Oo(e,t,r,i),t.child):(sa(e,t,i),il(e,t,i))}function Lo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Mo(e,t,s,r,i))}if(s=e.child,!sl(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=Br(s,r)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Po=!1,t.pendingProps=r=s,!sl(e,i))return t.lanes=e.lanes,il(e,t,i);0!==(131072&e.flags)&&(Po=!0)}}return Wo(e,t,n,r,i)}function Uo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Bo(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Bo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Qi(0,null!==s?s.cachePool:null),null!==s?Ts(t,s):Is(),Ls(t)}else null!==s?(Qi(0,s.cachePool),Ts(t,s),Ms(),t.memoizedState=null):(null!==e&&Qi(0,null),Is(),Ms());return Oo(e,t,i,n),t.child}function Fo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bo(e,t,n,r,i){var s=Yi();return s=null===s?null:{parent:Ui._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Qi(0,null),Is(),Ls(t),null!==e&&Ti(e,t,r,!0),t.childLanes=i,null}function Vo(e,t){return(t=$o({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function zo(e,t,n){return fs(t,e.child,null,n),(e=Vo(t,t.pendingProps)).flags|=2,Us(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,i){return Ai(t),n=ea(e,t,n,r,void 0,i),r=ia(),null===e||Po?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,i),t.child):(sa(e,t,i),il(e,t,i))}function Ko(e,t,n,r,i,s){return Ai(t),t.updateQueue=null,n=na(t,r,n,i),ta(e),r=ia(),null===e||Po?(di&&r&&ai(t),t.flags|=1,Oo(e,t,n,s),t.child):(sa(e,t,s),il(e,t,s))}function qo(e,t,n,r,i){if(Ai(t),null===t.stateNode){var s=Lr,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ri(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=xo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},gs(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ri(a):Lr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(bo(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&xo.enqueueReplaceState(s,s.state,null),Ss(t,r,s,i),_s(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=_o(n,o);s.props=l;var c=s.context,u=n.contextType;a=Lr,"object"===typeof u&&null!==u&&(a=Ri(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&Eo(t,s,r,a),ms=!1;var h=t.memoizedState;s.state=h,Ss(t,r,s,i),_s(),c=t.memoizedState,o||h!==c||ms?("function"===typeof d&&(bo(t,n,d,r),c=t.memoizedState),(l=ms||wo(t,n,l,r,h,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ys(e,t),u=_o(n,a=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ri(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&Eo(t,s,r,l),ms=!1,h=t.memoizedState,s.state=h,Ss(t,r,s,i),_s();var f=t.memoizedState;a!==d||h!==f||ms||null!==e&&null!==e.dependencies&&Ii(e.dependencies)?("function"===typeof o&&(bo(t,n,o,r),f=t.memoizedState),(u=ms||wo(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ii(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ho(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,n,i)):Oo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=il(e,t,i),e}function Go(e,t,n,r){return bi(),t.flags|=256,Oo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qo(e){return{baseLanes:e,cachePool:Xi()}}function Xo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Nc),e}function Jo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Fs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(di){if(s?Os(t):Ms(),(e=ui)?null!==(e=null!==(e=Id(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Ms(),l=$o({mode:"hidden",children:l},s=t.mode),i=Hr(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Qo(n),i.childLanes=Xo(e,r,n),t.memoizedState=Yo,Fo(null,i)):(Os(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Ms(),t.child=e.child,t.flags|=128,t=null):(Ms(),l=i.fallback,s=t.mode,i=$o({mode:"visible",children:i.children},s),(l=Hr(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fs(t,e.child,null,n),(i=t.child).memoizedState=Qo(n),i.childLanes=Xo(e,r,n),t.memoizedState=Yo,t=Fo(null,i));else if(Os(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,wi({value:i,source:null,stack:null}),t=el(e,t,n)}else if(Po||Ti(e,t,n,!1),r=0!==(n&e.childLanes),Po||r){if(null!==(r=pc)&&(0!==(i=De(r,n))&&i!==c.retryLane))throw c.retryLane=i,Pr(e,i),Yc(r,e,i),Ro;Ad(l)||au(),t=el(e,t,n)}else Ad(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Pd(l.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return s?(Ms(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Br(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Br(u,l):(l=Hr(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Fo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Qo(n):(null!==(s=l.cachePool)?(c=Ui._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Xi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Xo(e,r,n),t.memoizedState=Yo,Fo(e.child,i)):(Os(t),e=(n=e.child).sibling,(n=Br(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=$o({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $o(e,t){return(e=Ur(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ni(e.return,t,n)}function nl(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Fs.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,V(Fs,a),Oo(e,t,r,n),r=di?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Bs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Bs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Sc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ti(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Br(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ii(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Po=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Po=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),Ci(0,Ui,e.memoizedState.cache),bi();break;case 27:case 5:X(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:Ci(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Ds(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Jo(e,t,n):(Os(t),null!==(e=il(e,t,n))?e.sibling:null);Os(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ti(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(Fs,Fs.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:Ci(0,Ui,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Po=0!==(131072&e.flags)}else Po=!1,di&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===E){t.tag=11,t=Do(null,t,e,r,n);break e}if(i===C){t.tag=14,t=Lo(null,t,e,r,n);break e}}throw t=R(e)||e,Error(a(306,t,""))}Fr(e)?(r=_o(e,r),t.tag=1,t=qo(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return qo(e,t,r=t.type,i=_o(r,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,ys(e,t),Ss(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Ci(0,Ui,r),r!==s.cache&&ji(t,[Ui],n,!0),_s(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Go(e,t,r,n);break e}if(r!==i){wi(i=Yr(Error(a(424)),t)),t=Go(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Pd(e.firstChild),ci=t,di=!0,hi=null,fi=!0,n=ps(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),r===i){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:di||(n=t.type,e=t.pendingProps,(r=gd(q.current).createElement(n))[Ve]=t,r[ze]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&di&&(r=t.stateNode=Md(t.type,t.pendingProps,q.current),ci=t,fi=!0,i=ui,kd(t.type)?(Od=i,ui=Pd(r.firstChild)):ui=i),Oo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&di&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Pd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Pd(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),X(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,bd(i,s)?r=null:null!==o&&bd(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ea(e,t,ra,null,null,n),uh._currentValue=i),Ho(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&di&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Jo(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Do(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ci(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ai(t),r=r(i=Ri(i)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Lo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(di){if("hidden"===r.mode)return e=Vo(t,r),t.lanes=536870912,Fo(null,e);if(Ds(t),(e=ui)?null!==(e=null!==(e=Id(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return Vo(t,r)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(Ds(t),i)if(256&t.flags)t.flags&=-257,t=zo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Po||Ti(e,t,n,!1),i=0!==(n&e.childLanes),Po||i){if(null!==(r=pc)&&0!==(o=De(r,n))&&o!==s.retryLane)throw s.retryLane=o,Pr(e,o),Yc(r,e,o),Ro;au(),t=zo(e,t,n)}else e=s.treeContext,ui=Pd(o.nextSibling),ci=t,di=!0,hi=null,fi=!1,null!==e&&li(t,e),(t=Vo(t,r)).flags|=4096;return t}return(e=Br(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return Ai(t),r=Ri(Ui),null===e?(null===(i=Yi())&&(i=pc,s=Fi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},gs(t),Ci(0,Ui,i)):(0!==(e.lanes&n)&&(ys(e,t),Ss(t,null,null,n),_s()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Ci(0,Ui,r)):(r=s.cache,Ci(0,Ui,r),r!==i.cache&&ji(t,[Ui],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw is=es,Zi;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!ru())throw is=es,Zi;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ie():536870912,e.lanes|=t,jc|=t)}function dl(e,t){if(!di)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ki(Ui),Q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,xi())),hl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(hl(t),cl(t,s)):(hl(t),ll(t,i,0,0,n))):s?s!==e.memoizedState?(ol(t),hl(t),cl(t,s)):(hl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),hl(t),ll(t,i,0,0,n)),null;case 27:if(J(t),n=q.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}e=W.current,vi(t)?gi(t):(e=Md(i,r,n),t.stateNode=e,ol(t))}return hl(t),null;case 5:if(J(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hl(t),null}if(s=W.current,vi(t))gi(t);else{var o=gd(q.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}s[Ve]=t,s[ze]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(hd(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return hl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=q.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||cd(e.nodeValue,n)))||mi(t,!0)}else(e=gd(e).createTextNode(r))[Ve]=t,t.stateNode=e}return hl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Ve]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),e=!1}else n=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Us(t),t):(Us(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[Ve]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hl(t),i=!1}else i=xi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Us(t),t):(Us(t),null)}return Us(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),hl(t),null);case 4:return Q(),null===e&&$u(t.stateNode.containerInfo),hl(t),null;case 10:return ki(t.type),hl(t),null;case 19:if(B(Fs),null===(r=t.memoizedState))return hl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)dl(r,!1);else{if(0!==_c||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Bs(e))){for(t.flags|=128,dl(r,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return V(Fs,1&Fs.current|2),di&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Bs(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),dl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!di)return hl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,i=!0,dl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Fs.current,V(Fs,i?1&n|2:1&n),di&&ii(t,r.treeForkCount),e):(hl(t),null);case 22:case 23:return Us(t),As(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hl(t),6&t.subtreeFlags&&(t.flags|=8192)):hl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Gi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ki(Ui),hl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ki(Ui),Q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(Us(t),null===t.alternate)throw Error(a(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Us(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(Fs),null;case 4:return Q(),null;case 10:return ki(t.type),null;case 22:case 23:return Us(t),As(),null!==e&&B(Gi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ki(Ui),null;default:return null}}function ml(e,t){switch(oi(t),t.tag){case 3:ki(Ui),Q();break;case 26:case 27:case 5:J(t);break;case 4:Q();break;case 31:null!==t.memoizedState&&Us(t);break;case 13:Us(t);break;case 19:B(Fs);break;case 10:ki(t.type);break;case 22:case 23:Us(t),As(),null!==e&&B(Gi);break;case 24:ki(Ui)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){_u(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){_u(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){_u(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ks(t,n)}catch(r){_u(e,e.return,r)}}}function bl(e,t,n){n.props=_o(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){_u(e,t,r)}}function xl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){_u(e,t,i)}}function wl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){_u(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){_u(e,t,s)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){_u(e,e.return,i)}}function _l(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||ud(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&ud(e,t,f,p,r,h)}}return void vt(e,o,l,c,u,d,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||ud(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&ud(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ud(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&ud(e,t,o,i,r,s)}return void Et(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else ud(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:ud(e,t,u,f,r,p)}return;default:if(jt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||dd(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||ud(e,t,h,f,r,p)}(r,e.type,n,t),r[ze]=t}catch(i){_u(e,e.return,i)}}function Sl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&kd(e.type)||4===e.tag}function Cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&kd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function kl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&kd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(kl(e,t,n),e=e.sibling;null!==e;)kl(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&kd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Nl(e,t,n),e=e.sibling;null!==e;)Nl(e,t,n),e=e.sibling}function jl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);hd(t,r,n),t[Ve]=e,t[ze]=n}catch(s){_u(e,e.return,s)}}var Tl=!1,Il=!1,Al=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Pl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&gl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){_u(n,n.return,a)}else{var i=_o(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){_u(n,n.return,o)}}64&r&&vl(n),512&r&&xl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ks(e,t)}catch(a){_u(n,n.return,a)}}break;case 27:null===t&&4&r&&jl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&El(n),512&r&&xl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Bl(e,n);break;case 13:Yl(e,n),4&r&&Vl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Nu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Tl)){t=null!==t&&null!==t.memoizedState||Il,i=Tl;var s=Il;Tl=r,(Il=t)&&!s?Xl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Tl=i,Il=s}break;case 30:break;default:Yl(e,n)}}function Dl(e){var t=e.alternate;null!==t&&(e.alternate=null,Dl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Ml=!1;function Ul(e,t,n){for(n=n.child;null!==n;)Fl(e,t,n),n=n.sibling}function Fl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Il||wl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Il||wl(n,t);var r=Ll,i=Ml;kd(n.type)&&(Ll=n.stateNode,Ml=!1),Ul(e,t,n),Ud(n.stateNode),Ll=r,Ml=i;break;case 5:Il||wl(n,t);case 6:if(r=Ll,i=Ml,Ll=null,Ul(e,t,n),Ml=i,null!==(Ll=r))if(Ml)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(n.stateNode)}catch(a){_u(n,t,a)}else try{Ll.removeChild(n.stateNode)}catch(a){_u(n,t,a)}break;case 18:null!==Ll&&(Ml?(Nd(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Nd(Ll,n.stateNode));break;case 4:r=Ll,i=Ml,Ll=n.stateNode.containerInfo,Ml=!0,Ul(e,t,n),Ll=r,Ml=i;break;case 0:case 11:case 14:case 15:yl(2,n,t),Il||yl(4,n,t),Ul(e,t,n);break;case 1:Il||(wl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Il=(r=Il)||null!==n.memoizedState,Ul(e,t,n),Il=r;break;default:Ul(e,t,n)}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){_u(t,t.return,n)}}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){_u(t,t.return,n)}}function zl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=ju.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(kd(l.type)){Ll=l.stateNode,Ml=!1;break e}break;case 5:Ll=l.stateNode,Ml=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Ll)throw Error(a(160));Fl(s,o,i),Ll=null,Ml=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),ql(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),ql(e),512&r&&(Il||null===n||wl(n,n.return)),64&r&&Tl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Wl;if(Hl(t,e),ql(e),512&r&&(Il||null===n||wl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ye]||s[Ve]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),hd(s,r,n),s[Ve]=e,et(s),r=s;break e;case"link":var o=nh("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=nh("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}hd(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[Ve]=e,et(s),r=s}e.stateNode=r}else rh(i,e.type,e.stateNode);else e.stateNode=Jd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?rh(i,e.type,e.stateNode):Jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_l(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),ql(e),512&r&&(Il||null===n||wl(n,n.return)),null!==n&&4&r&&_l(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),ql(e),512&r&&(Il||null===n||wl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(m){_u(e,e.return,m)}}4&r&&null!=e.stateNode&&_l(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Al=!0);break;case 6:if(Hl(t,e),ql(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){_u(e,e.return,m)}}break;case 3:if(th=null,i=Wl,Wl=Vd(t.containerInfo),Hl(t,e),Wl=i,ql(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){_u(e,e.return,m)}Al&&(Al=!1,Gl(e));break;case 4:r=Wl,Wl=Vd(e.stateNode.containerInfo),Hl(t,e),ql(e),Wl=r;break;case 12:default:Hl(t,e),ql(e);break;case 31:case 19:Hl(t,e),ql(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,zl(e,r)));break;case 13:Hl(t,e),ql(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,zl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Tl,d=Il;if(Tl=u||i,Il=d||c,Hl(t,e),Il=d,Tl=u,ql(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Tl||Il||Ql(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){_u(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){_u(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?jd(p,!0):jd(c.stateNode,!1)}catch(m){_u(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,zl(e,n))));case 30:case 21:}}function ql(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Sl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;Nl(e,Cl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(St(s,""),n.flags&=-33),Nl(e,Cl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;kl(e,Cl(e),o);break;default:throw Error(a(161))}}catch(l){_u(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Ql(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Ql(t);break;case 1:wl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Ql(t);break;case 27:Ud(t.stateNode);case 26:case 5:wl(t,t.return),Ql(t);break;case 22:null===t.memoizedState&&Ql(t);break;default:Ql(t)}e=e.sibling}}function Xl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Xl(i,s,n),gl(4,s);break;case 1:if(Xl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){_u(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Cs(l[i],o)}catch(c){_u(r,r.return,c)}}n&&64&a&&vl(s),xl(s,s.return);break;case 27:jl(s);case 26:case 5:Xl(i,s,n),n&&null===r&&4&a&&El(s),xl(s,s.return);break;case 12:Xl(i,s,n);break;case 31:Xl(i,s,n),n&&4&a&&Bl(i,s);break;case 13:Xl(i,s,n),n&&4&a&&Vl(i,s);break;case 22:null===s.memoizedState&&Xl(i,s,n),xl(s,s.return);break;case 30:break;default:Xl(i,s,n)}t=t.sibling}}function Jl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bi(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&i&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bi(e)));break;case 12:if(2048&i){$l(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){_u(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?$l(e,t,n,r):nc(e,t):2&s._visibility?$l(e,t,n,r):(s._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Jl(a,t);break;case 24:$l(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function tc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:tc(s,a,o,l,i),gl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tc(s,a,o,l,i):nc(s,a):(u._visibility|=2,tc(s,a,o,l,i)),i&&2048&c&&Jl(a.alternate,a);break;case 24:tc(s,a,o,l,i),i&&2048&c&&Zl(a.alternate,a);break;default:tc(s,a,o,l,i)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nc(n,r),2048&i&&Jl(r.alternate,r);break;case 24:nc(n,r),2048&i&&Zl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=qd(r.href),s=t.querySelector(Gd(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Yd(r),(i=Fd.get(i))&&$d(r,i),et(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Wl;Wl=Vd(e.stateNode.containerInfo),ic(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ic(e,t,n),rc=r):ic(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Pl=r,uc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Pl;){var n=Pl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Pl=r;else e:for(n=e;null!==Pl;){var i=(r=Pl).sibling,s=r.return;if(Dl(r),r===n){Pl=null;break e}if(null!==i){i.return=s,Pl=i;break e}Pl=s}}}var dc={getCacheForType:function(e){var t=Ri(Ui),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ri(Ui).controller.signal}},hc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,yc=0,vc=null,bc=!1,xc=!1,wc=!1,Ec=0,_c=0,Sc=0,Cc=0,kc=0,Nc=0,jc=0,Tc=null,Ic=null,Ac=!1,Rc=0,Pc=0,Oc=1/0,Dc=null,Lc=null,Mc=0,Uc=null,Fc=null,Bc=0,Vc=0,zc=null,Hc=null,Wc=0,Kc=null;function qc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==O.T?zu():Ue()}function Gc(){if(0===Nc)if(0===(536870912&gc)||di){var e=Se;0===(3932160&(Se<<=1))&&(Se=262144),Nc=e}else Nc=536870912;return null!==(e=Rs.current)&&(e.flags|=32),Nc}function Yc(e,t,n){(e!==pc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Zc(e,gc,Nc,!1)),Re(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Cc|=n),4===_c&&Zc(e,gc,Nc,!1)),Du(e))}function Qc(e,t,n){if(0!==(6&fc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||je(e,t),i=r?function(e,t){var n=fc;fc|=2;var r=iu(),i=su();pc!==e||gc!==t?(Dc=null,Oc=le()+500,tu(e,t)):xc=je(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var s=vc;t:switch(yc){case 1:yc=0,vc=null,hu(e,t,s,1);break;case 2:case 9:if(ts(s)){yc=0,vc=null,du(t);break}t=function(){2!==yc&&9!==yc||pc!==e||(yc=7),Du(e)},s.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ts(s)?(yc=0,vc=null,du(t)):(yc=0,vc=null,hu(e,t,s,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?ih(o):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}yc=0,vc=null,hu(e,t,s,5);break;case 6:yc=0,vc=null,hu(e,t,s,6);break;case 8:eu(),_c=6;break e;default:throw Error(a(462))}}cu();break}catch(d){nu(e,d)}return Si=_i=null,O.H=r,O.A=i,fc=n,null!==mc?0:(pc=null,gc=0,Ir(),_c)}(e,t):ou(e,t,!0),s=r;;){if(0===i){xc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Jc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Tc;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(wc&&!c){l.errorRecoveryDisabledLanes|=s,Cc|=s,i=4;break e}s=Ic,Ic=i,null!==s&&(null===Ic?Ic=s:Ic.push.apply(Ic,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){tu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Nc,!bc);break e;case 2:Ic=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Rc+300-le())){if(Zc(r,t,Nc,!bc),0!==Ne(r,0,!0))break e;Bc=t,r.timeoutHandle=wd(Xc.bind(null,r,n,Ic,Dc,Ac,t,Nc,Cc,jc,bc,s,"Throttled",-0,0),i)}else Xc(r,n,Ic,Dc,Ac,t,Nc,Cc,jc,bc,s,null,-0,0)}break}i=ou(e,t,!1),s=!1}Du(e)}function Xc(e,t,n,r,i,s,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){sc(t,s,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&s)===s?Rc-le():(4194048&s)===s?Pc-le():0;if(null!==(p=function(e,t){return e.stylesheets&&0===e.count&&lh(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sh&&(sh=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&fd(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&fd(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&lh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sh?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(d,p)))return Bc=s,e.cancelPendingCommit=p(mu.bind(null,e,t,s,n,r,i,a,o,l,u,d,null,h,f)),void Zc(e,s,a,!c)}mu(e,t,s,n,r,i,a,o,l)}function Jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~kc,t&=~Cc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-xe(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&Pe(e,n,t)}function $c(){return 0!==(6&fc)||(Lu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else Si=_i=null,aa(e=mc),os=null,ls=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Ed(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc=0,eu(),pc=e,mc=n=Br(e.current,null),gc=t,yc=0,vc=null,bc=!1,xc=je(e,t),wc=!1,jc=Nc=kc=Cc=Sc=_c=0,Ic=Tc=null,Ac=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-xe(r),s=1<<i;t|=e[i],r&=~s}return Ec=t,Ir(),n}function nu(e,t){zs=null,O.H=mo,t===Ji||t===$i?(t=ss(),yc=3):t===Zi?(t=ss(),yc=4):yc=t===Ro?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(_c=1,No(e,Yr(t,e.current)))}function ru(){var e=Rs.current;return null===e||((4194048&gc)===gc?null===Ps:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ps)}function iu(){var e=O.H;return O.H=mo,null===e?mo:e}function su(){var e=O.A;return O.A=dc,e}function au(){_c=4,bc||(4194048&gc)!==gc&&null!==Rs.current||(xc=!0),0===(134217727&Sc)&&0===(134217727&Cc)||null===pc||Zc(pc,gc,Nc,!1)}function ou(e,t,n){var r=fc;fc|=2;var i=iu(),s=su();pc===e&&gc===t||(Dc=null,tu(e,t)),t=!1;var a=_c;e:for(;;)try{if(0!==yc&&null!==mc){var o=mc,l=vc;switch(yc){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Rs.current&&(t=!0);var c=yc;if(yc=0,vc=null,hu(e,o,l,c),n&&xc){a=0;break e}break;default:c=yc,yc=0,vc=null,hu(e,o,l,c)}}lu(),a=_c;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,Si=_i=null,fc=r,O.H=i,O.A=s,null===mc&&(pc=null,gc=0,Ir()),a}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!ae();)uu(mc)}function uu(e){var t=al(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:aa(t);default:ml(n,t),t=al(n,t=mc=Vr(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e,t,n,r){Si=_i=null,aa(t),os=null,ls=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ti(t,n,i,!0),null!==(n=Rs.current)){switch(n.tag){case 31:case 13:return null===Ps?au():null===n.alternate&&0===_c&&(_c=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Su(e,r,i)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Su(e,r,i)),!1}throw Error(a(435,n.tag))}return Su(e,r,i),au(),!1}if(di)return null!==(t=Rs.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&wi(Yr(e=Error(a(422),{cause:r}),n))):(r!==pi&&wi(Yr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Yr(r,n),ws(e,i=To(e.stateNode,r,i)),4!==_c&&(_c=2)),!1;var s=Error(a(520),{cause:r});if(s=Yr(s,n),null===Tc?Tc=[s]:Tc.push(s),4!==_c&&(_c=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ws(n,e=To(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Lc||!Lc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ao(i=Io(i),e,n,r),ws(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,gc))return _c=1,No(e,Yr(n,e.current)),void(mc=null)}catch(s){if(null!==i)throw mc=i,s;return _c=1,No(e,Yr(n,e.current)),void(mc=null)}32768&t.flags?(di||1===r?e=!0:xc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Rs.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,bc);e=t.return;var n=fl(t.alternate,t,Ec);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===_c&&(_c=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);_c=6,mc=null}function mu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{xu()}while(0!==Mc);if(0!==(6&fc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-xe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Pe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Tr,o,l,c),e===pc&&(mc=pc=null,gc=0),Fc=t,Uc=e,Bc=n,Vc=s,zc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(he,function(){return wu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=D.p,D.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,pd=bh,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},bh=!1,Pl=t;null!==Pl;)if(e=(t=Pl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Pl=e;else for(;null!==Pl;){switch(s=(t=Pl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=_o(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){_u(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Pl=e;break}Pl=t.return}}(e,t)}finally{fc=o,D.p=i,O.T=r}}Mc=1,gu(),yu(),vu()}}function gu(){if(1===Mc){Mc=0;var e=Uc,t=Fc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=D.p;D.p=2;var i=fc;fc|=4;try{Kl(t,e);var s=md,a=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=tr(o,m),v=tr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}bh=!!pd,md=pd=null}finally{fc=i,D.p=r,O.T=n}}e.current=t,Mc=2}}function yu(){if(2===Mc){Mc=0;var e=Uc,t=Fc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=D.p;D.p=2;var i=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=i,D.p=r,O.T=n}}Mc=3}}function vu(){if(4===Mc||3===Mc){Mc=0,oe();var e=Uc,t=Fc,n=Bc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Mc=5:(Mc=0,Fc=Uc=null,bu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Lc=null),Me(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=D.p,D.p=2,O.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{O.T=t,D.p=i}}0!==(3&Bc)&&xu(),Du(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Lu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bi(t)))}function xu(){return gu(),yu(),vu(),wu()}function wu(){if(5!==Mc)return!1;var e=Uc,t=Vc;Vc=0;var n=Me(Bc),r=O.T,i=D.p;try{D.p=32>n?32:n,O.T=null,n=zc,zc=null;var s=Uc,o=Bc;if(Mc=0,Fc=Uc=null,Bc=0,0!==(6&fc))throw Error(a(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,o,n),fc=l,Lu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{D.p=i,O.T=r,bu(e,t)}}function Eu(e,t,n){t=Yr(n,t),null!==(e=bs(e,t=To(e.stateNode,t,2),2))&&(Re(e,2),Du(e))}function _u(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=Yr(n,e),null!==(r=bs(t,n=Io(2),2))&&(Ao(n,r,t,e),Re(r,2),Du(r));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(wc=!0,i.add(n),e=Cu.bind(null,e,t,n),t.then(e,e))}function Cu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===_c||3===_c&&(62914560&gc)===gc&&300>le()-Rc?0===(2&fc)&&tu(e,0):kc|=n,jc===gc&&(jc=0)),Du(e)}function ku(e,t){0===t&&(t=Ie()),null!==(e=Pr(e,t))&&(Re(e,t),Du(e))}function Nu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function ju(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),ku(e,n)}var Tu=null,Iu=null,Au=!1,Ru=!1,Pu=!1,Ou=0;function Du(e){e!==Iu&&null===e.next&&(null===Iu?Tu=Iu=e:Iu=Iu.next=e),Ru=!0,Au||(Au=!0,Sd(function(){0!==(6&fc)?ie(ue,Mu):Uu()}))}function Lu(e,t){if(!Pu&&Ru){Pu=!0;do{for(var n=!1,r=Tu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-xe(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Vu(r,s))}else s=gc,0===(3&(s=Ne(r,r===pc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||je(r,s)||(n=!0,Vu(r,s));r=r.next}}while(n);Pu=!1}}function Mu(){Uu()}function Uu(){Ru=Au=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==xd&&(xd=e,!0);return xd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Tu;null!==r;){var i=r.next,s=Fu(r,t);0===s?(r.next=null,null===n?Tu=i:n.next=i,null===i&&(Iu=n)):(n=r,(0!==e||0!==(3&s))&&(Ru=!0)),r=i}0!==Mc&&5!==Mc||Lu(e,!1),0!==Ou&&(Ou=0)}function Fu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-xe(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Te(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=gc,n=Ne(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||je(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=pe}return r=Bu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Bu(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Ne(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Qc(e,r,t),Fu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Bu.bind(null,e):null)}function Vu(e,t){if(xu())return null;Qc(e,t,!0)}function zu(){if(0===Ou){var e=Hi;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Sr.length;Ku++){var qu=Sr[Ku];Cr(qu.toLowerCase(),"on"+(qu[0].toUpperCase()+qu.slice(1)))}Cr(gr,"onAnimationEnd"),Cr(yr,"onAnimationIteration"),Cr(vr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(br,"onTransitionRun"),Cr(xr,"onTransitionStart"),Cr(wr,"onTransitionCancel"),Cr(Er,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gu));function Qu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){kr(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){kr(u)}i.currentTarget=null,s=l}}}}function Xu(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function Ju(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||Ju(t,!1,e),Ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Ju("selectionchange",!1,t))}}function ed(e,t,n,r){switch(kh(t)){case 2:var i=xh;break;case 8:i=wh;break;default:i=Eh}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function td(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=Xe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Ft(function(){var r=s,i=Ot(n),a=[];e:{var o=_r.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Yt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case gr:case yr:case vr:c=un;break;case Er:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=_n}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Bt(m,f))&&d.push(nd(m,g,p)),h)break;m=m.return}0<d.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Pt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[He])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?o:Ze(c),p=null==u?o:Ze(u),(o=new d(g,m+"leave",c,n,i)).target=h,o.relatedTarget=p,g=null,Xe(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,m=u,p=0,g=f=c;g;g=d(g))p++;g=0;for(var y=m;y;y=d(y))g++;for(;0<p-g;)f=d(f),p--;for(;0<g-p;)m=d(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){d=f;break e}f=d(f),m=d(m)}d=null}else d=null;null!==c&&sd(a,o,c,d,!1),null!==u&&null!==h&&sd(a,h,u,d,!0)}if("select"===(c=(o=r?Ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Vn;else if(Dn(o))if(zn)v=Jn;else{v=Qn;var b=Yn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&jt(r.elementType)&&(v=Vn):v=Xn;switch(v&&(v=v(e,r))?Ln(a,v,n,i):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),b=r?Ze(r):window,e){case"focusin":(Dn(b)||"true"===b.contentEditable)&&(ar=b,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(a,n,i)}var x;if(Cn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Pn?An(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(jn&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Pn&&(x=Gt()):(Kt="value"in(Wt=i)?Wt.value:Wt.textContent,Pn=!0)),0<(b=rd(r,w)).length&&(w=new hn(w,e,null,n,i),a.push({event:w,listeners:b}),x?w.data=x:null!==(x=Rn(n))&&(w.data=x))),(x=Nn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(In=!0,Tn);case"textInput":return(e=t.data)===Tn&&In?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Cn&&An(e,t)?(e=Gt(),qt=Kt=Wt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,i),a.push({event:b,listeners:w}),b.data=x)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[ze]||null).action),a=r.submitter;a&&null!==(t=(t=a[ze]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Wu(i,a):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Wu(i,a):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Qu(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Bt(e,n))&&r.unshift(nd(e,i,s)),null!=(i=Bt(e,t))&&r.push(nd(e,i,s))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sd(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Bt(n,s))&&a.unshift(nd(n,c,l)):i||null!=(c=Bt(n,s))&&a.push(nd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,od=/\u0000|\uFFFD/g;function ld(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(od,"")}function cd(e,t){return t=ld(t),ld(e)===t}function ud(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Nt(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&ud(e,t,"name",i.name,i,null),ud(e,t,"formEncType",i.formEncType,i,null),ud(e,t,"formMethod",i.formMethod,i,null),ud(e,t,"formTarget",i.formTarget,i,null)):(ud(e,t,"encType",i.encType,i,null),ud(e,t,"method",i.method,i,null),ud(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=At(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=At(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=Tt.get(n)||n,r)}}function dd(e,t,n,r,i,s){switch(n){case"style":Nt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Xu("scroll",e);break;case"onScrollEnd":null!=r&&Xu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[ze]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,o,n,null)}}return s&&ud(e,t,"srcSet",n.srcSet,n,null),void(i&&ud(e,t,"src",n.src,n,null));case"input":Xu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,i,d,n,null)}}return void bt(e,r,l,c,u,o,s,!1);case"select":for(s in Xu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:ud(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(o in Xu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:ud(e,t,o,l,n,null)}return void _t(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else ud(e,t,c,i,n,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(i=0;i<Gu.length;i++)Xu(Gu[i],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,i,n,null)}return;default:if(jt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&dd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&ud(e,t,l,i,n,null))}function fd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xd=null;var wd="function"===typeof setTimeout?setTimeout:void 0,Ed="function"===typeof clearTimeout?clearTimeout:void 0,_d="function"===typeof Promise?Promise:void 0,Sd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _d?function(e){return _d.resolve(null).then(e).catch(Cd)}:wd;function Cd(e){setTimeout(function(){throw e})}function kd(e){return"head"===e}function Nd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Ye]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&Ud(e.ownerDocument.body);n=i}while(n);Wh(t)}function jd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Id(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Pd(e.nextSibling)))return null}return e}function Ad(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Pd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Dd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Pd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Md(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qe(e)}var Fd=new Map,Bd=new Set;function Vd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var zd=D.d;D.d={f:function(){var e=zd.f(),t=$c();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?no(t):zd.r(e)},D:function(e){zd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){zd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){zd.L(e,t,n);var r=Hd;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=qd(e);break;case"script":s=Qd(e)}Fd.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Fd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Gd(s))||"script"===t&&r.querySelector(Xd(s))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){zd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Qd(e)}if(!Fd.has(s)&&(e=f({rel:"modulepreload",href:e},t),Fd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Xd(s)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){zd.X(e,t);var n=Hd;if(n&&e){var r=$e(n).hoistableScripts,i=Qd(e),s=r.get(i);s||((s=n.querySelector(Xd(i)))||(e=f({src:e,async:!0},t),(t=Fd.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){zd.S(e,t,n);var r=Hd;if(r&&e){var i=$e(r).hoistableStyles,s=qd(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Gd(s)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Fd.get(s))&&$d(e,n);var l=a=r.createElement("link");et(l),hd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){zd.M(e,t);var n=Hd;if(n&&e){var r=$e(n).hoistableScripts,i=Qd(e),s=r.get(i);s||((s=n.querySelector(Xd(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Fd.get(i))&&eh(e,t),et(s=n.createElement("script")),hd(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Bd.has(i)||(Bd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var i,s,o,l,c=(c=q.current)?Vd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=qd(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=qd(n.href);var u=$e(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Gd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Fd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fd.set(e,n),u||(i=c,s=e,o=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),hd(s,"link",o),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Qd(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function qd(e){return'href="'+yt(e)+'"'}function Gd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Qd(e){return'[src="'+yt(e)+'"]'}function Xd(e){return"script[async]"+e}function Jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",i),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":i=qd(n.href);var s=e.querySelector(Gd(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Yd(n),(i=Fd.get(i))&&$d(r,i),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),hd(s,"link",r),t.state.loading|=4,Zd(s,n.precedence,e),t.instance=s;case"script":return s=Qd(n.src),(i=e.querySelector(Xd(s)))?(t.instance=i,et(i),i):(r=n,(i=Fd.get(s))&&eh(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),hd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $d(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,i=th=new Map;i.set(n,r)}else(r=(i=th).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ye]||s[Ve]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sh=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var oh=null;function lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,oh=new Map,t.forEach(ch,e),oh=null,ah.call(e))}function ch(e,t){if(!(4&t.state.loading)){var n=oh.get(e);if(n)var r=n.get(null);else{n=new Map,oh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=ah.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var uh={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dh(e,t,n,r,i,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function hh(e,t,n,r,i,s,a,o,l,c,u,d){return e=new dh(e,t,n,a,l,c,u,d,o),t=1,!0===s&&(t|=24),s=Ur(3,null,null,t),e.current=s,s.stateNode=e,(t=Fi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},gs(s),e}function fh(e){return e?e=Lr:Lr}function ph(e,t,n,r,i,s){i=fh(i),null===r.context?r.context=i:r.pendingContext=i,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Yc(n,0,t),xs(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Pr(e,67108864);null!==t&&Yc(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=qc(),n=Pr(e,t=Le(t));null!==n&&Yc(n,0,t),gh(e,t)}}var bh=!0;function xh(e,t,n,r){var i=O.T;O.T=null;var s=D.p;try{D.p=2,Eh(e,t,n,r)}finally{D.p=s,O.T=i}}function wh(e,t,n,r){var i=O.T;O.T=null;var s=D.p;try{D.p=8,Eh(e,t,n,r)}finally{D.p=s,O.T=i}}function Eh(e,t,n,r){if(bh){var i=_h(r);if(null===i)td(e,t,r,Sh,n),Dh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return jh=Lh(jh,e,t,n,r,i),!0;case"dragenter":return Th=Lh(Th,e,t,n,r,i),!0;case"mouseover":return Ih=Lh(Ih,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ah.set(s,Lh(Ah.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rh.set(s,Lh(Rh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==i;){var s=Je(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ke(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-xe(a);o.entanglements[1]|=l,a&=~l}Du(s),0===(6&fc)&&(Oc=le()+500,Lu(0,!1))}}break;case 31:case 13:null!==(o=Pr(s,2))&&Yc(o,0,2),$c(),gh(s,2)}if(null===(s=_h(r))&&td(e,t,r,Sh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else td(e,t,r,null,n)}}function _h(e){return Ch(e=Ot(e))}var Sh=null;function Ch(e){if(Sh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sh=e,null}function kh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Nh=!1,jh=null,Th=null,Ih=null,Ah=new Map,Rh=new Map,Ph=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dh(e,t){switch(e){case"focusin":case"focusout":jh=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":Ih=null;break;case"pointerover":case"pointerout":Ah.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Lh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Je(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mh(e){var t=Xe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Fe(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_h(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function Fh(e,t,n){Uh(e)&&n.delete(t)}function Bh(){Nh=!1,null!==jh&&Uh(jh)&&(jh=null),null!==Th&&Uh(Th)&&(Th=null),null!==Ih&&Uh(Ih)&&(Ih=null),Ah.forEach(Fh),Rh.forEach(Fh)}function Vh(e,t){e.blockedOn===t&&(e.blockedOn=null,Nh||(Nh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bh)))}var zh=null;function Hh(e){zh!==e&&(zh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){zh===e&&(zh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Ch(r||n))continue;break}var s=Je(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Wh(e){function t(t){return Vh(t,e)}null!==jh&&Vh(jh,e),null!==Th&&Vh(Th,e),null!==Ih&&Vh(Ih,e),Ah.forEach(t),Rh.forEach(t);for(var n=0;n<Ph.length;n++){var r=Ph[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Ph.length&&null===(n=Ph[0]).blockedOn;)Mh(n),null===n.blockedOn&&Ph.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[ze]||null;if("function"===typeof s)a||Hh(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[ze]||null)o=a.formAction;else if(null!==Ch(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function qh(e){this._internalRoot=e}function Gh(e){this._internalRoot=e}Gh.prototype.render=qh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));ph(t.current,qc(),e,t,null,null)},Gh.prototype.unmount=qh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),$c(),t[He]=null}},Gh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ue();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ph.length&&0!==t&&t<Ph[n].priority;n++);Ph.splice(n,0,e),0===n&&Mh(e)}};var Yh=i.version;if("19.2.0"!==Yh)throw Error(a(527,Yh,"19.2.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return d(i),e;if(s===r)return d(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Qh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{ye=Xh.inject(Qh),ve=Xh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=So,s=Co,l=ko;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,i,s,l,Kh),e[He]=t.current,$u(e),new qh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=So,l=Co,c=ko,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,i,u,s,l,c,Kh)).context=fh(null),n=t.current,(i=vs(r=Le(r=qc()))).callback=null,bs(n,i,r),n=r,t.current.lanes=n,Re(t,n),Du(t),e[He]=t.current,$u(e),new Gh(t)},t.version="19.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=x.prototype=new b;w.constructor=x,g(w,v.prototype),w.isPureReactComponent=!0;var E=Array.isArray;function _(){}var S={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+T(e,0):s,E(a)?(i="",null!=u&&(i=u.replace(j,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(N(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(j,"$&/")+"/")+u,a=k(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===s?".":s+":";if(E(e))for(var m=0;m<e.length;m++)u+=I(s=e[m],t,i,o=f+T(s,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,o=f+T(s,m++),a);else if("object"===o){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return k(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return k(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(_,P)}catch(s){P(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return S.H.useEffect(e,t)},t.useEffectEvent=function(e){return S.H.useEffectEvent(e)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},440:e=>{"use strict";var t=function(){};e.exports=t},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(799)},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,S||(S=!0,_());else{var t=r(u);null!==t&&R(E,t.startTime-e)}}var _,S=!1,C=-1,k=5,N=-1;function j(){return!!y||!(t.unstable_now()-N<k)}function T(){if(y=!1,S){var e=t.unstable_now();N=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(C),C=-1),p=!0;var s=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&j());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&i(c),w(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&R(E,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?_():S=!1}}}if("function"===typeof x)_=function(){x(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,A=I.port2;I.port1.onmessage=T,_=function(){A.postMessage(null)}}else _=function(){v(T,0)};function R(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,R(E,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,S||(S=!0,_()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},917:(e,t,n)=>{"use strict";var r,i,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ZX=function(e){document.body.classList.add("react-confirm-alert-body-element"),function(){if(document.getElementById("react-confirm-alert-firm-svg"))return;var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.3");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var r=document.createElementNS(e,"svg");r.setAttribute("id","react-confirm-alert-firm-svg"),r.setAttribute("class","react-confirm-alert-svg"),r.appendChild(n),document.body.appendChild(r)}(),function(e){var t=document.getElementById(e.targetId||m);e.targetId&&!t&&console.error("React Confirm Alert:","Can not get element id (#"+e.targetId+")");t||(document.body.children[0].classList.add("react-confirm-alert-blur"),(t=document.createElement("div")).id=m,document.body.appendChild(t)),(p=(0,u.createRoot)(t)).render(l.default.createElement(f,e))}(e)};var o=n(43),l=d(o),c=d(n(173)),u=n(391);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=(i=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return n=r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.handleClickButton=function(e){e.onClick&&e.onClick(),r.close()},r.handleClickOverlay=function(e){var t=r.props,n=t.closeOnClickOutside,i=t.onClickOutside,s=e.target===r.overlay;n&&s&&(i(),r.close()),e.stopPropagation()},r.close=function(){var e=r.props.afterClose;document.body.classList.remove("react-confirm-alert-body-element"),function(e){var t=document.getElementById(e.targetId||m);t&&p.unmount(t)}(r.props),function(e){var t=document.getElementById("react-confirm-alert-firm-svg");t&&t.parentNode.removeChild(t);document.body.children[0].classList.remove("react-confirm-alert-blur"),e()}(e)},r.keyboard=function(e){var t=r.props,n=t.closeOnEscape,i=t.onKeypressEscape,s=t.onkeyPress,a=t.keyCodeForClose,o=e.keyCode,l=27===o;a.includes(o)&&r.close(),n&&l&&(i(e),r.close()),s&&s()},r.componentDidMount=function(){document.addEventListener("keydown",r.keyboard,!1)},r.componentWillUnmount=function(){document.removeEventListener("keydown",r.keyboard,!1),r.props.willUnmount()},r.renderCustomUI=function(){var e=r.props,t=e.title,n=e.message,i=e.buttons;return(0,e.customUI)({title:t,message:n,buttons:i,onClose:r.close})},h(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.message,i=t.buttons,a=t.childrenElement,o=t.customUI,c=t.overlayClassName;return l.default.createElement("div",{className:"react-confirm-alert-overlay "+c,ref:function(t){return e.overlay=t},onClick:this.handleClickOverlay},l.default.createElement("div",{className:"react-confirm-alert"},o?this.renderCustomUI():l.default.createElement("div",{className:"react-confirm-alert-body"},n&&l.default.createElement("h1",null,n),r,a(),l.default.createElement("div",{className:"react-confirm-alert-button-group"},i.map(function(t,n){return l.default.createElement("button",s({key:n,className:t.className},t,{onClick:function(n){return e.handleClickButton(t)}}),t.label)})))))}}]),t}(o.Component),r.propTypes={title:c.default.string,message:c.default.string,buttons:c.default.array.isRequired,childrenElement:c.default.func,customUI:c.default.func,closeOnClickOutside:c.default.bool,closeOnEscape:c.default.bool,keyCodeForClose:c.default.arrayOf(c.default.number),willUnmount:c.default.func,afterClose:c.default.func,onClickOutside:c.default.func,onKeypressEscape:c.default.func,onkeyPress:c.default.func,overlayClassName:c.default.string},r.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null},className:null},{label:"Confirm",onClick:function(){return null},className:null}],childrenElement:function(){return null},closeOnClickOutside:!0,closeOnEscape:!0,keyCodeForClose:[],willUnmount:function(){return null},afterClose:function(){return null},onClickOutside:function(){return null},onKeypressEscape:function(){return null}},i);var p=null,m="react-confirm-alert"},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/legion-tracker/",(()=>{"use strict";var e=n(43),t=n(391);function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function i(e,t){if(null==e)return{};var n,i,s=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=["sri"],d=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var g="popstate";function y(){return S(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return w("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:E(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function v(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function E(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:o,location:p.location,delta:t})}function f(e){return C(e)}null==u&&(u=0,a.replaceState(c(c({},a.state),{},{idx:u}),""));let p={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(g,h),l=e,()=>{i.removeEventListener(g,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=w(p.location,e,t);n&&n(r,e),u=d()+1;let c=x(r,u),h=p.createHref(r);try{a.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=w(p.location,e,t);n&&n(r,e),u=d();let i=x(r,u),c=p.createHref(r);a.replaceState(i,"",c),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}function C(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),v(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:E(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function k(e,t){return N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function N(e,t,n,r){let i=z(("string"===typeof t?_(t):t).pathname||"/",n);if(null==i)return null;let s=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=V(i);a=U(s[o],e,r)}return a}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;v(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=G([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(v(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),j(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:M(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of T(e.path))s(e,t,!0,r);else s(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=T(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,A=3,R=2,P=1,O=10,D=-2,L=e=>"*"===e;function M(e,t){let n=e.split("/"),r=n.length;return n.some(L)&&(r+=D),t&&(r+=R),n.filter(e=>!L(e)).reduce((e,t)=>e+(I.test(t)?A:""===t?P:O),r)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=F({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:G([s,u.pathname]),pathnameBase:Y(G([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=G([s,u.pathnameBase]))}return a}function F(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function V(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function H(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=W(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function q(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=_(e):(r=c({},e),v(!r.pathname||!r.pathname.includes("?"),H("?","pathname","search",r)),v(!r.pathname||!r.pathname.includes("#"),H("#","pathname","hash",r)),v(!r.search||!r.search.includes("#"),H("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?_(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Q(r),hash:X(i)}}(r,s),u=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var G=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",X=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function J(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],$=(new Set(Z),["GET",...Z]);new Set($),Symbol("ResetLoaderData");var ee=e.createContext(null);ee.displayName="DataRouter";var te=e.createContext(null);te.displayName="DataRouterState";var ne=e.createContext(!1);var re=e.createContext({isTransitioning:!1});re.displayName="ViewTransition";var ie=e.createContext(new Map);ie.displayName="Fetchers";var se=e.createContext(null);se.displayName="Await";var ae=e.createContext(null);ae.displayName="Navigation";var oe=e.createContext(null);oe.displayName="Location";var le=e.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=e.createContext(null);ce.displayName="RouteError";function ue(){return null!=e.useContext(oe)}function de(){return v(ue(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(oe).location}var he="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(t){e.useContext(ae).static||e.useLayoutEffect(t)}function pe(){let{isDataRoute:t}=e.useContext(le);return t?function(){let{router:t}=Ce("useNavigate"),n=Ne("useNavigate"),r=e.useRef(!1);fe(()=>{r.current=!0});let i=e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(r.current,he),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,c({fromRouteId:n},i)))},[t,n]);return i}():function(){v(ue(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(ee),{basename:n,navigator:r}=e.useContext(ae),{matches:i}=e.useContext(le),{pathname:s}=de(),a=JSON.stringify(K(i)),o=e.useRef(!1);fe(()=>{o.current=!0});let l=e.useCallback(function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(o.current,he),!o.current)return;if("number"===typeof e)return void r.go(e);let l=q(e,JSON.parse(a),s,"path"===i.relative);null==t&&"/"!==n&&(l.pathname="/"===l.pathname?n:G([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)},[n,r,a,s,t]);return l}()}var me=e.createContext(null);function ge(){let{matches:t}=e.useContext(le),n=t[t.length-1];return n?n.params:{}}function ye(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(le),{pathname:i}=de(),s=JSON.stringify(K(r));return e.useMemo(()=>q(t,JSON.parse(s),i,"path"===n),[t,s,i,n])}function ve(t,n,r,i,s){v(ue(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=e.useContext(ae),{matches:o}=e.useContext(le),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Ie(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=de();if(n){var g;let e="string"===typeof n?_(n):n;v("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",x=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");x="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=k(t,{pathname:x});b(f||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=_e(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:G([h,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:G([h,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,r,i,s);return n&&E?e.createElement(oe.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},E):E}function be(){let t=je(),n=J(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:a},"ErrorBoundary")," or"," ",e.createElement("code",{style:a},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,o)}var xe=e.createElement(be,null),we=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?e.createElement(le.Provider,{value:this.props.routeContext},e.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ee(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(ee);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(le.Provider,{value:n},i)}function _e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==n.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let s=t,a=null===r||void 0===r?void 0:r.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));v(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(r)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((t,c,u)=>{let d,h=!1,f=null,p=null;r&&(d=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||xe,o&&(l<0&&0===u?(Ie("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===u&&(h=!0,p=c.route.hydrateFallbackElement||null)));let m=n.concat(s.slice(0,u+1)),g=()=>{let n;return n=d?f:h?p:c.route.Component?e.createElement(c.route.Component,null):c.route.element?c.route.element:t,e.createElement(Ee,{match:c,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?e.createElement(we,{location:r.location,revalidation:r.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(t){let n=e.useContext(ee);return v(n,Se(t)),n}function ke(t){let n=e.useContext(te);return v(n,Se(t)),n}function Ne(t){let n=function(t){let n=e.useContext(le);return v(n,Se(t)),n}(t),r=n.matches[n.matches.length-1];return v(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function je(){var t;let n=e.useContext(ce),r=ke("useRouteError"),i=Ne("useRouteError");return void 0!==n?n:null===(t=r.errors)||void 0===t?void 0:t[i]}var Te={};function Ie(e,t,n){t||Te[e]||(Te[e]=!0,b(!1,n))}var Ae={};function Re(e,t){e||Ae[t]||(Ae[t]=!0,console.warn(t))}e.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function Pe(t){let{to:n,replace:r,state:i,relative:s}=t;v(ue(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=e.useContext(ae);b(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=e.useContext(le),{pathname:l}=de(),c=pe(),u=q(n,K(o),l,"path"===s),d=JSON.stringify(u);return e.useEffect(()=>{c(JSON.parse(d),{replace:r,state:i,relative:s})},[c,d,s,r,i]),null}function Oe(t){return function(t){let n=e.useContext(le).outlet;return e.useMemo(()=>n&&e.createElement(me.Provider,{value:t},n),[n,t])}(t.context)}function De(e){v(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(t){let{basename:n="/",children:r=null,location:i,navigationType:s="POP",navigator:a,static:o=!1}=t;v(!ue(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof i&&(i=_(i));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=e.useMemo(()=>{let e=z(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:s}},[l,u,d,h,f,p,s]);return b(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:e.createElement(ae.Provider,{value:c},e.createElement(oe.Provider,{children:r,value:m}))}function Me(e){let{children:t,location:n}=e;return ve(Ue(t),n)}e.Component;function Ue(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,i)=>{if(!e.isValidElement(t))return;let s=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,Ue(t.props.children,s));v(t.type===De,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),v(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,middleware:t.props.middleware,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Ue(t.props.children,s)),r.push(a)}),r}var Fe="get",Be="application/x-www-form-urlencoded";function Ve(e){return null!=e&&"string"===typeof e.tagName}var ze=null;var He=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||He.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Be,'"')),null)}function Ke(e,t){let n,r,i,s,a;if(Ve(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?z(a,t):null,n=e.getAttribute("method")||Fe,i=We(e.getAttribute("enctype"))||Be,s=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?z(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Fe,i=We(e.getAttribute("formenctype"))||We(a.getAttribute("enctype"))||Be,s=new FormData(a,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fe,r=null,i=Be,a=e}var o;return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===z(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ye(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qe(e){return null!=e&&"string"===typeof e.page}function Xe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Ze(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function $e(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Qe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let t=e.useContext(ee);return qe(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nt(){let t=e.useContext(te);return qe(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rt=e.createContext(void 0);function it(){let t=e.useContext(rt);return qe(t,"You must render this element inside a <HydratedRouter> element"),t}function st(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!ut)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}rt.displayName="FrameworkContext";function ot(t){let{page:n}=t,r=i(t,d),{router:s}=tt(),a=e.useMemo(()=>k(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?e.createElement(ct,c({page:n,matches:a},r)):null}function lt(t){let{manifest:n,routeModules:r}=it(),[i,s]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,n){return $e((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ye(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Xe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(t,n,r).then(t=>{e||s(t)}),()=>{e=!0}},[t,n,r]),i}function ct(t){let{page:n,matches:r}=t,s=i(t,h),a=de(),{manifest:o,routeModules:l}=it(),{basename:u}=tt(),{loaderData:d,matches:f}=nt(),p=e.useMemo(()=>Je(n,r,f,o,a,"data"),[n,r,f,o,a]),m=e.useMemo(()=>Je(n,r,f,o,a,"assets"),[n,r,f,o,a]),g=e.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(r.forEach(n=>{var r;let i=o.routes[n.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in d&&null!==(r=l[n.route.id])&&void 0!==r&&r.shouldRevalidate||i.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let i=Ge(n,u,"data");return t&&e.size>0&&i.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[u,d,a,o,p,r,n,l]),y=e.useMemo(()=>Ze(m,o),[m,o]),v=lt(m);return e.createElement(e.Fragment,null,g.map(t=>e.createElement("link",c({key:t,rel:"prefetch",as:"fetch",href:t},s))),y.map(t=>e.createElement("link",c({key:t,rel:"modulepreload",href:t},s))),v.map(t=>{let{key:n,link:r}=t;return e.createElement("link",c({key:n,nonce:s.nonce},r))}))}var ut=!1;function dt(t){let{manifest:n,serverHandoffString:r,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=it(),{router:d,static:h,staticContext:f}=tt(),{matches:p}=nt(),m=e.useContext(ne),g=et(o,l);a&&(a.didRenderScripts=!0);let y=at(p,null,s);e.useEffect(()=>{0},[]);let v=e.useMemo(()=>{var s;if(m)return null;let a=f?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(y.map((e,t)=>{let r="route".concat(t),i=n.routes[e.route.id];qe(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=i(e,u),s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=k(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(n,d),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),e.createElement("script",c(c({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),b=ut||m?[]:(n.entry.imports.concat(Ze(y,n,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let w="object"===typeof n.sri?n.sri:{};return Re(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ut||m?null:e.createElement(e.Fragment,null,"object"===typeof n.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:e.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:t.crossOrigin,integrity:w[n.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:t.crossOrigin,integrity:w[n.entry.module],suppressHydrationWarning:!0}),b.map(n=>e.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:t.crossOrigin,integrity:w[n],suppressHydrationWarning:!0})),v)}function ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}e.Component;function ft(t){let{error:n,isOutsideRemixApp:r}=t;console.error(n);let i,s=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(J(n))return e.createElement(pt,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return e.createElement(pt,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),s)}function pt(t){var n;let{title:r,renderScripts:i,isOutsideRemixApp:s,children:a}=t,{routeModules:o}=it();return null!==o.root&&void 0!==n&&n.Layout&&!s?a:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?e.createElement(dt,null):null)))}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.9.3")}catch(bM){}function gt(t){let{basename:n,children:r,window:i}=t,s=e.useRef();null==s.current&&(s.current=y({window:i,v5Compat:!0}));let a=s.current,[o,l]=e.useState({action:a.action,location:a.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>a.listen(c),[a,c]),e.createElement(Le,{basename:n,children:r,location:o.location,navigationType:o.action,navigator:a})}var yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=e.forwardRef(function(t,n){let r,{onClick:s,discover:a="render",prefetch:o="none",relative:l,reloadDocument:u,replace:d,state:h,target:p,to:m,preventScrollReset:g,viewTransition:y}=t,x=i(t,f),{basename:w}=e.useContext(ae),_="string"===typeof m&&yt.test(m),S=!1;if("string"===typeof m&&_&&(r=m,mt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=z(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:S=!0}catch(bM){b(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(ue(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=e.useContext(ae),{hash:s,pathname:a,search:o}=ye(t,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:G([r,a])),i.createHref({pathname:l,search:o,hash:s})}(m,{relative:l}),[k,N,j]=function(t,n){let r=e.useContext(rt),[i,s]=e.useState(!1),[a,o]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=n,f=e.useRef(null);e.useEffect(()=>{if("render"===t&&o(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(i){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return r?"intent"!==t?[a,f,{}]:[a,f,{onFocus:st(l,p),onBlur:st(c,m),onMouseEnter:st(u,p),onMouseLeave:st(d,m),onTouchStart:st(h,p)}]:[!1,f,{}]}(o,x),T=function(t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pe(),c=de(),u=ye(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,n)){e.preventDefault();let n=void 0!==r?r:E(c)===E(u);l(t,{replace:n,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,i,n,t,s,a,o])}(m,{replace:d,state:h,target:p,preventScrollReset:g,relative:l,viewTransition:y});let I=e.createElement("a",c(c(c({},x),j),{},{href:r||C,onClick:S||u?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:ht(n,N),target:p,"data-discover":_||"render"!==a?void 0:"true"}));return k&&!_?e.createElement(e.Fragment,null,I,e.createElement(ot,{page:C})):I});vt.displayName="Link";var bt=e.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:u,viewTransition:d,children:h}=t,f=i(t,p),m=ye(u,{relative:f.relative}),g=de(),y=e.useContext(te),{navigator:b,basename:x}=e.useContext(ae),w=null!=y&&function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(re);v(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Et("useViewTransitionState"),s=ye(t,{relative:n});if(!r.isTransitioning)return!1;let a=z(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=z(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=F(s.pathname,o)||null!=F(s.pathname,a)}(m)&&!0===d,E=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,_=g.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;s||(_=_.toLowerCase(),S=S?S.toLowerCase():null,E=E.toLowerCase()),S&&x&&(S=z(S,x)||S);const C="/"!==E&&E.endsWith("/")?E.length-1:E.length;let k,N=_===E||!o&&_.startsWith(E)&&"/"===_.charAt(C),j=null!=S&&(S===E||!o&&S.startsWith(E)&&"/"===S.charAt(E.length)),T={isActive:N,isPending:j,isTransitioning:w},I=N?r:void 0;k="function"===typeof a?a(T):[a,N?"active":null,j?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(T):l;return e.createElement(vt,c(c({},f),{},{"aria-current":I,className:k,ref:n,style:A,to:u,viewTransition:d}),"function"===typeof h?h(T):h)});bt.displayName="NavLink";var xt=e.forwardRef((t,n)=>{let{discover:r="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:u,method:d=Fe,action:h,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:y}=t,b=i(t,m),x=Ct(),w=function(t){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(ae),i=e.useContext(le);v(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a=c({},ye(t||".",{relative:n})),o=de();if(null==t){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}t&&"."!==t||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:G([r,a.pathname]));return E(a)}(h,{relative:p}),_="get"===d.toLowerCase()?"get":"post",S="string"===typeof h&&yt.test(h);return e.createElement("form",c(c({ref:n,method:_,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;x(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:l,state:u,relative:p,preventScrollReset:g,viewTransition:y})}},b),{},{"data-discover":S||"render"!==r?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Et(t){let n=e.useContext(ee);return v(n,wt(t)),n}xt.displayName="Form";var _t=0,St=()=>"__".concat(String(++_t),"__");function Ct(){let{router:t}=Et("useSubmit"),{basename:n}=e.useContext(ae),r=Ne("useRouteId");return e.useCallback(async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Ke(e,n);if(!1===i.navigate){let e=i.fetcherKey||St();await t.fetch(e,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,n,r])}var kt=n(139),Nt=n.n(kt),jt=n(579);const Tt=["xxl","xl","lg","md","sm","xs"],It="xs",At=e.createContext({prefixes:{},breakpoints:Tt,minBreakpoint:It}),{Consumer:Rt,Provider:Pt}=At;function Ot(t,n){const{prefixes:r}=(0,e.useContext)(At);return t||r[n]||n}function Dt(){const{breakpoints:t}=(0,e.useContext)(At);return t}function Lt(){const{minBreakpoint:t}=(0,e.useContext)(At);return t}function Mt(){const{dir:t}=(0,e.useContext)(At);return"rtl"===t}const Ut=["bsPrefix","fluid","as","className"],Ft=e.forwardRef((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:s="div",className:a}=e,o=i(e,Ut);const l=Ot(n,"container"),u="string"===typeof r?"-".concat(r):"-fluid";return(0,jt.jsx)(s,c(c({ref:t},o),{},{className:Nt()(a,r?"".concat(l).concat(u):l)}))});Ft.displayName="Container";const Bt=Ft,Vt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},zt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Vt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ht;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ht extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Wt=function(e){return function(e){const t=Vt(e);return zt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Kt=function(e){try{return zt.decodeString(e,!0)}catch(bM){console.error("base64Decode failed: ",bM)}return null};function qt(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Gt=()=>{try{return qt().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/legion-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyC0jav3haxtGN2-_Fft5hadA5PoBHermxw",REACT_APP_FIREBASE_APP_ID:"1:345035004111:web:5bda8bdeccc39b590fbfba",REACT_APP_FIREBASE_AUTH_DOMAIN:"legiontracker-df41c.firebaseapp.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"345035004111",REACT_APP_FIREBASE_PROJECT_ID:"legiontracker-df41c",REACT_APP_FIREBASE_STORAGE_BUCKET:"legiontracker-df41c.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(bM){return}const t=e&&Kt(e[1]);return t&&JSON.parse(t)})()}catch(bM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(bM))}},Yt=e=>{var t;return null===(t=Gt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Qt=e=>{const t=Yt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Xt=()=>{var e;return null===(e=Gt())||void 0===e?void 0:e.config},Jt=e=>{var t;return null===(t=Gt())||void 0===t?void 0:t["_".concat(e)]};class Zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function $t(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function en(e){return(await fetch(e,{credentials:"include"})).ok}function tn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Wt(JSON.stringify({alg:"none",type:"JWT"})),Wt(JSON.stringify(s)),""].join(".")}const nn={};let rn=!1;function sn(e,t){if("undefined"===typeof window||"undefined"===typeof document||!$t(window.location.host)||nn[e]===t||nn[e]||rn)return;function n(e){return"__firebase__banner__".concat(e)}nn[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(nn))nn[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{rn=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function an(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function on(){var e;const t=null===(e=Gt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(bM){return!1}}function ln(){return!on()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cn(){try{return"object"===typeof indexedDB}catch(bM){return!1}}class un extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(hn,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new un(n,s,t)}}const hn=/\{\$([^}]+)}/g;function fn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(pn(n)&&pn(s)){if(!fn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function pn(e){return null!==e&&"object"===typeof e}function mn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function gn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function yn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class vn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=bn),void 0===r.error&&(r.error=bn),void 0===r.complete&&(r.complete=bn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(bM){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(bM){"undefined"!==typeof console&&console.error&&console.error(bM)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bn(){}function xn(e){return e&&e._delegate?e._delegate:e}class wn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const En="[DEFAULT]";class _n{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Zt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(bM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bM){if(r)return null;throw bM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:En})}catch(bM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(bM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===En?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En;return this.component?this.component.multipleInstances?e:En:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _n(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Cn=[];var kn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(kn||(kn={}));const Nn={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},jn=kn.INFO,Tn={[kn.DEBUG]:"log",[kn.VERBOSE]:"log",[kn.INFO]:"info",[kn.WARN]:"warn",[kn.ERROR]:"error"},In=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Tn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class An{constructor(e){this.name=e,this._logLevel=jn,this._logHandler=In,this._userLogHandler=null,Cn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Nn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kn.DEBUG,...t),this._logHandler(this,kn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kn.VERBOSE,...t),this._logHandler(this,kn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kn.INFO,...t),this._logHandler(this,kn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kn.WARN,...t),this._logHandler(this,kn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kn.ERROR,...t),this._logHandler(this,kn.ERROR,...t)}}let Rn,Pn;const On=new WeakMap,Dn=new WeakMap,Ln=new WeakMap,Mn=new WeakMap,Un=new WeakMap;let Fn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ln.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Bn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Pn||(Pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Hn(this),n),zn(On.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zn(e.apply(Hn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Hn(this),t,...r);return Ln.set(s,t.sort?t.sort():[t]),zn(s)}}function Vn(e){return"function"===typeof e?Bn(e):(e instanceof IDBTransaction&&function(e){if(Dn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Dn.set(e,t)}(e),t=e,(Rn||(Rn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Fn):e);var t}function zn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(zn(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&On.set(t,e)}).catch(()=>{}),Un.set(t,e),t}(e);if(Mn.has(e))return Mn.get(e);const t=Vn(e);return t!==e&&(Mn.set(e,t),Un.set(t,e)),t}const Hn=e=>Un.get(e);const Wn=["get","getKey","getAll","getAllKeys","count"],Kn=["put","add","delete","clear"],qn=new Map;function Gn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qn.get(t))return qn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Kn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Wn.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return qn.set(t,s),s}!function(e){Fn=e(Fn)}(e=>c(c({},e),{},{get:(t,n,r)=>Gn(t,n)||e.get(t,n,r),has:(t,n)=>!!Gn(t,n)||e.has(t,n)}));class Yn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Qn="@firebase/app",Xn="0.14.3",Jn=new An("@firebase/app"),Zn="@firebase/app-compat",$n="@firebase/analytics-compat",er="@firebase/analytics",tr="@firebase/app-check-compat",nr="@firebase/app-check",rr="@firebase/auth",ir="@firebase/auth-compat",sr="@firebase/database",ar="@firebase/data-connect",or="@firebase/database-compat",lr="@firebase/functions",cr="@firebase/functions-compat",ur="@firebase/installations",dr="@firebase/installations-compat",hr="@firebase/messaging",fr="@firebase/messaging-compat",pr="@firebase/performance",mr="@firebase/performance-compat",gr="@firebase/remote-config",yr="@firebase/remote-config-compat",vr="@firebase/storage",br="@firebase/storage-compat",xr="@firebase/firestore",wr="@firebase/ai",Er="@firebase/firestore-compat",_r="firebase",Sr="[DEFAULT]",Cr={[Qn]:"fire-core",[Zn]:"fire-core-compat",[er]:"fire-analytics",[$n]:"fire-analytics-compat",[nr]:"fire-app-check",[tr]:"fire-app-check-compat",[rr]:"fire-auth",[ir]:"fire-auth-compat",[sr]:"fire-rtdb",[ar]:"fire-data-connect",[or]:"fire-rtdb-compat",[lr]:"fire-fn",[cr]:"fire-fn-compat",[ur]:"fire-iid",[dr]:"fire-iid-compat",[hr]:"fire-fcm",[fr]:"fire-fcm-compat",[pr]:"fire-perf",[mr]:"fire-perf-compat",[gr]:"fire-rc",[yr]:"fire-rc-compat",[vr]:"fire-gcs",[br]:"fire-gcs-compat",[xr]:"fire-fst",[Er]:"fire-fst-compat",[wr]:"fire-vertex","fire-js":"fire-js",[_r]:"fire-js-all"},kr=new Map,Nr=new Map,jr=new Map;function Tr(e,t){try{e.container.addComponent(t)}catch(bM){Jn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),bM)}}function Ir(e){const t=e.name;if(jr.has(t))return Jn.debug("There were multiple attempts to register component ".concat(t,".")),!1;jr.set(t,e);for(const n of kr.values())Tr(n,e);for(const n of Nr.values())Tr(n,e);return!0}function Ar(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Pr=new dn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Or{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const Dr="12.3.0";function Lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:Sr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw Pr.create("bad-app-name",{appName:String(i)});if(n||(n=Xt()),!n)throw Pr.create("no-options");const s=kr.get(i);if(s){if(fn(n,s.options)&&fn(r,s.config))return s;throw Pr.create("duplicate-app",{appName:i})}const a=new Sn(i);for(const l of jr.values())a.addComponent(l);const o=new Or(n,r,a);return kr.set(i,o),o}function Mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr;const t=kr.get(e);if(!t&&e===Sr&&Xt())return Lr();if(!t)throw Pr.create("no-app",{appName:e});return t}function Ur(e,t,n){var r;let i=null!==(r=Cr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Jn.warn(e.join(" "))}Ir(new wn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Fr="firebase-heartbeat-store";let Br=null;function Vr(){return Br||(Br=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=zn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(zn(a.result),e.oldVersion,e.newVersion,zn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Fr)}catch(bM){console.warn(bM)}}}).catch(e=>{throw Pr.create("idb-open",{originalErrorMessage:e.message})})),Br}async function zr(e,t){try{const n=(await Vr()).transaction(Fr,"readwrite"),r=n.objectStore(Fr);await r.put(t,Hr(e)),await n.done}catch(bM){if(bM instanceof un)Jn.warn(bM.message);else{const t=Pr.create("idb-set",{originalErrorMessage:null===bM||void 0===bM?void 0:bM.message});Jn.warn(t.message)}}}function Hr(e){return"".concat(e.name,"!").concat(e.options.appId)}class Wr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kr();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(bM){Jn.warn(bM)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Kr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Gr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Wt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(bM){return Jn.warn(bM),""}}}function Kr(){return(new Date).toISOString().substring(0,10)}class qr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!cn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Vr()).transaction(Fr),n=await t.objectStore(Fr).get(Hr(e));return await t.done,n}catch(bM){if(bM instanceof un)Jn.warn(bM.message);else{const t=Pr.create("idb-get",{originalErrorMessage:null===bM||void 0===bM?void 0:bM.message});Jn.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Gr(e){return Wt(JSON.stringify({version:2,heartbeats:e})).length}var Yr;Yr="",Ir(new wn("platform-logger",e=>new Yn(e),"PRIVATE")),Ir(new wn("heartbeat",e=>new Wr(e),"PRIVATE")),Ur(Qn,Xn,Yr),Ur(Qn,Xn,"esm2020"),Ur("fire-js","");const Qr=["providerId"],Xr=["uid","auth","stsTokenManager"],Jr=["providerId","signInMethod"];function Zr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $r=Zr,ei=new dn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ti=new An("@firebase/auth");function ni(e){if(ti.logLevel<=kn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ti.error("Auth (".concat(Dr,"): ").concat(e),...n)}}function ri(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw oi(e,...n)}function ii(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oi(e,...n)}function si(e,t,n){const r=c(c({},$r()),{},{[t]:n});return new dn("auth","Firebase",r).create(t,{appName:e.name})}function ai(e){return si(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ei.create(e,...n)}function li(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw oi(t,...r)}}function ci(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ni(t),new Error(t)}function ui(e,t){e||ci(t)}function di(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function hi(){return"http:"===fi()||"https:"===fi()}function fi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function pi(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(hi()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class mi{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return pi()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gi(e,t){ui(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class yi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},bi=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xi=new mi(3e4,6e4);function wi(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Ei(e,t,n,r){return _i(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=mn(c({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&$t(e.emulatorConfig.host)&&(l.credentials="include"),yi.fetch()(await Ci(e,e.config.apiHost,n,a),l)})}async function _i(e,t,n){e._canInitEmulator=!1;const r=c(c({},vi),t);try{const t=new Ni(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ji(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ji(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ji(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ji(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw si(e,o,a);ri(e,o)}}catch(bM){if(bM instanceof un)throw bM;ri(e,"network-request-failed",{message:String(bM)})}}async function Si(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ei(e,t,n,r,i);return"mfaPendingCredential"in s&&ri(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Ci(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?gi(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(bi.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function ki(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ni{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ii(this.auth,"network-request-failed")),xi.get())})}}function ji(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ii(e,t,r);return i.customData._tokenResponse=n,i}function Ti(e){return void 0!==e&&void 0!==e.enterprise}class Ii{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ki(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ai(e,t){return Ei(e,"GET","/v2/recaptchaConfig",wi(e,t))}async function Ri(e,t){return Ei(e,"POST","/v1/accounts:lookup",t)}function Pi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(bM){}}function Oi(e){return 1e3*Number(e)}function Di(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ni("JWT malformed, contained fewer than 3 sections"),null;try{const e=Kt(n);return e?JSON.parse(e):(ni("Failed to decode base64 JWT payload"),null)}catch(bM){return ni("Caught error parsing JWT payload as JSON",null===bM||void 0===bM?void 0:bM.toString()),null}}function Li(e){const t=Di(e);return li(t,"internal-error"),li("undefined"!==typeof t.exp,"internal-error"),li("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Mi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(bM){throw bM instanceof un&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(bM)&&e.auth.currentUser===e&&await e.auth.signOut(),bM}}class Ui{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(bM){return void((null===bM||void 0===bM?void 0:bM.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Fi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Mi(e,Ri(n,{idToken:r}));li(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?Vi(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Fi(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Vi(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Qr);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class zi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){li(e.idToken,"internal-error"),li("undefined"!==typeof e.idToken,"internal-error"),li("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Li(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){li(0!==e.length,"internal-error");const t=Li(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(li(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await _i(e,{},async()=>{const n=mn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Ci(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&$t(e.emulatorConfig.host)&&(o.credentials="include"),yi.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new zi;return n&&(li("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(li("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(li("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zi,this.toJSON())}_performRefresh(){return ci("not implemented")}}function Hi(e,t){li("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Wi{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,Xr);this.providerId="firebase",this.proactiveRefresh=new Ui(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fi(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Mi(this,this.stsTokenManager.getToken(this.auth,e));return li(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=xn(e),r=await n.getIdToken(t),i=Di(r);li(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Pi(Oi(i.auth_time)),issuedAtTime:Pi(Oi(i.iat)),expirationTime:Pi(Oi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=xn(e);await Bi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(li(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Wi(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){li(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Bi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rr(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await Mi(this,async function(e,t){return Ei(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:E,stsTokenManager:_}=t;li(b&&_,e,"internal-error");const S=zi.fromJSON(this.name,_);li("string"===typeof b,e,"internal-error"),Hi(d,e.name),Hi(h,e.name),li("boolean"===typeof x,e,"internal-error"),li("boolean"===typeof w,e,"internal-error"),Hi(f,e.name),Hi(p,e.name),Hi(m,e.name),Hi(g,e.name),Hi(y,e.name),Hi(v,e.name);const C=new Wi({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(C.providerData=E.map(e=>c({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new zi;r.updateFromServerResponse(t);const i=new Wi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Bi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];li(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Vi(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new zi;a.updateFromIdToken(n);const o=new Wi({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Fi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Ki=new Map;function qi(e){ui(e instanceof Function,"Expected a class definition");let t=Ki.get(e);return t?(ui(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ki.set(e,t),t)}class Gi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Gi.type="NONE";const Yi=Gi;function Qi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Xi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Qi(this.userKey,r.apiKey,i),this.fullPersistenceKey=Qi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Ri(this.auth,{idToken:e}).catch(()=>{});return t?Wi._fromGetAccountInfoResponse(this.auth,t,e):null}return Wi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Xi(qi(Yi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||qi(Yi);const s=Qi(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Ri(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Wi._fromGetAccountInfoResponse(e,r,t)}else n=Wi._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new Xi(i,e,n)):new Xi(i,e,n)}}function Ji(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ts(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(rs(t))return"Blackberry";if(is(t))return"Webos";if($i(t))return"Safari";if((t.includes("chrome/")||es(t))&&!t.includes("edge/"))return"Chrome";if(ns(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/firefox\//i.test(e)}function $i(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:an()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/crios\//i.test(e)}function ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/iemobile/i.test(e)}function ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/android/i.test(e)}function rs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/blackberry/i.test(e)}function is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/webos/i.test(e)}function ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function as(){return function(){const e=an();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function os(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an();return ss(e)||ns(e)||is(e)||rs(e)||/windows phone/i.test(e)||ts(e)}function ls(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ji(an());break;case"Worker":t="".concat(Ji(an()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dr,"/").concat(r)}class cs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(bM){r(bM)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(bM){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===bM||void 0===bM?void 0:bM.message})}}}class us{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ds{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fs(this),this.idTokenSubscription=new fs(this),this.beforeStateQueue=new cs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ei,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qi(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(bM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Ri(this,{idToken:e}),n=await Wi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(bM){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(bM))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return li(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(bM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bi(e)}catch(bM){if((null===bM||void 0===bM?void 0:bM.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rr(this.app))return Promise.reject(ai(this));const t=e?xn(e):null;return t&&li(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&li(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rr(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rr(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ei(e,"GET","/v2/passwordPolicy",wi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new us(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ei(e,"POST","/v2/accounts:revokeToken",wi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qi(e)||this._popupRedirectResolver;li(t,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[qi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(li(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return li(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ls(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(ti.logLevel<=kn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ti.warn("Auth (".concat(Dr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function hs(e){return xn(e)}class fs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new vn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return li(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ps={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ms(e){return ps.loadJS(e)}function gs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ys{constructor(){this.enterprise=new vs}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vs{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const bs="NO_RECAPTCHA";class xs{constructor(e){this.type="recaptcha-enterprise",this.auth=hs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ti(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(bs)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new ys).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ai(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ii(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ti(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ps.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ms(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ws(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new xs(e);let a;if(i)a=bs;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Es(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ws(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ws(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await ws(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await ws(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await ws(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function _s(e){const t=hs(e),n=await Ai(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ii(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new xs(t).verify()}}function Ss(e,t,n){const r=hs(e);li(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Cs(t),{host:a,port:o}=function(e){const t=Cs(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ks(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ks(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return li(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void li(fn(c,r.config.emulator)&&fn(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,$t(a)?(en("".concat(s,"//").concat(a).concat(l)),sn("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Cs(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ks(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ns{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function js(e,t){return Ei(e,"POST","/v1/accounts:signUp",t)}async function Ts(e,t){return Si(e,"POST","/v1/accounts:signInWithPassword",wi(e,t))}async function Is(e,t){return Ei(e,"POST","/v1/accounts:sendOobCode",wi(e,t))}async function As(e,t){return Is(e,t)}class Rs extends Ns{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Rs(e,t,"password")}static _fromEmailAndCode(e,t){return new Rs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Es(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ts,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Si(e,"POST","/v1/accounts:signInWithEmailLink",wi(e,t))}(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Es(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",js,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Si(e,"POST","/v1/accounts:signInWithEmailLink",wi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ps(e,t){return Si(e,"POST","/v1/accounts:signInWithIdp",wi(e,t))}class Os extends Ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Os(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,Jr);if(!n||!r)return null;const a=new Os(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return Ps(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ps(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ps(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mn(t)}return e}}async function Ds(e,t){return Ei(e,"POST","/v1/accounts:sendVerificationCode",wi(e,t))}const Ls={USER_NOT_FOUND:"user-not-found"};class Ms extends Ns{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ms({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ms({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Si(e,"POST","/v1/accounts:signInWithPhoneNumber",wi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Si(e,"POST","/v1/accounts:signInWithPhoneNumber",wi(e,t));if(n.temporaryProof)throw ji(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Si(e,"POST","/v1/accounts:signInWithPhoneNumber",wi(e,c(c({},t),{},{operation:"REAUTH"})),Ls)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ms({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Us{constructor(e){var t,n,r,i,s,a;const o=gn(yn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);li(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=gn(yn(e)).link,n=t?gn(yn(t)).deep_link_id:null,r=gn(yn(e)).deep_link_id;return(r?gn(yn(r)).link:null)||r||n||t||e}(e);try{return new Us(t)}catch(n){return null}}}class Fs{constructor(){this.providerId=Fs.PROVIDER_ID}static credential(e,t){return Rs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Us.parseLink(t);return li(n,"argument-error"),Rs._fromEmailAndCode(e,n.code,n.tenantId)}}Fs.PROVIDER_ID="password",Fs.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Bs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Vs extends Bs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zs extends Vs{constructor(){super("facebook.com")}static credential(e){return Os._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zs.credential(t.oauthAccessToken)}catch(n){return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com",zs.PROVIDER_ID="facebook.com";class Hs extends Vs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Os._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Hs.credential(n,r)}catch(i){return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com",Hs.PROVIDER_ID="google.com";class Ws extends Vs{constructor(){super("github.com")}static credential(e){return Os._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ws.credential(t.oauthAccessToken)}catch(n){return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com",Ws.PROVIDER_ID="github.com";class Ks extends Vs{constructor(){super("twitter.com")}static credential(e,t){return Os._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ks.credential(n,r)}catch(i){return null}}}async function qs(e,t){return Si(e,"POST","/v1/accounts:signUp",wi(e,t))}Ks.TWITTER_SIGN_IN_METHOD="twitter.com",Ks.PROVIDER_ID="twitter.com";class Gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Wi._fromIdTokenResponse(e,n,r),s=Ys(n);return new Gs({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ys(n);return new Gs({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ys(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Qs extends un{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Qs.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Qs(e,t,n,r)}}function Xs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Qs._fromErrorAndOperation(e,n,t,r);throw n})}async function Js(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Mi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gs._forOperation(e,"link",r)}async function Zs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Rr(r.app))return Promise.reject(ai(r));const i="reauthenticate";try{const s=await Mi(e,Xs(r,i,t,e),n);li(s.idToken,r,"internal-error");const a=Di(s.idToken);li(a,r,"internal-error");const{sub:o}=a;return li(e.uid===o,r,"user-mismatch"),Gs._forOperation(e,i,s)}catch(bM){throw(null===bM||void 0===bM?void 0:bM.code)==="auth/".concat("user-not-found")&&ri(r,"user-mismatch"),bM}}async function $s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rr(e.app))return Promise.reject(ai(e));const r="signIn",i=await Xs(e,r,t),s=await Gs._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ea(e,t){return $s(hs(e),t)}async function ta(e,t){return Zs(xn(e),t)}function na(e,t,n){var r;li((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),li("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),li("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(li(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(li(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ra(e){const t=hs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function ia(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=xn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Mi(i,async function(e,t){return Ei(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function sa(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Mi(e,async function(e,t){return Ei(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}function aa(e,t){return Ei(e,"POST","/v2/accounts/mfaEnrollment:start",wi(e,t))}new WeakMap;const oa="__sak";class la{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ca extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=os(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);as()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ca.type="LOCAL";const ua=ca;function da(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ha(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class fa{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ha(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return da(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ha(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ha(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=da(n);const i=setInterval(()=>{const e=da(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}fa.type="COOKIE";class pa extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pa.type="SESSION";const ma=pa;class ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ga(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ga.receivers=[];class va{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=ya("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function ba(){return window}function xa(){return"undefined"!==typeof ba().WorkerGlobalScope&&"function"===typeof ba().importScripts}const wa="firebaseLocalStorageDb",Ea="firebaseLocalStorage",_a="fbase_key";class Sa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ca(e,t){return e.transaction([Ea],t?"readwrite":"readonly").objectStore(Ea)}function ka(){const e=indexedDB.open(wa,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ea,{keyPath:_a})}catch(bM){n(bM)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ea)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(wa);return new Sa(e).toPromise()}(),t(await ka()))})})}async function Na(e,t,n){const r=Ca(e,!0).put({[_a]:t,value:n});return new Sa(r).toPromise()}function ja(e,t){const n=Ca(e,!0).delete(t);return new Sa(n).toPromise()}class Ta{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ka()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(bM){if(t++>3)throw bM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xa()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ga._getInstance(xa()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new va(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ka();return await Na(e,oa,"1"),await ja(e,oa),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Na(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ca(e,!1).get(t),r=await new Sa(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ja(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ca(e,!1).getAll();return new Sa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ta.type="LOCAL";const Ia=Ta;function Aa(e,t){return Ei(e,"POST","/v2/accounts/mfaSignIn:start",wi(e,t))}gs("rcb"),new mi(3e4,6e4);const Ra="recaptcha";async function Pa(e,t,n){if(!e._getRecaptchaConfig())try{await _s(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){li("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Es(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===bs){li((null===n||void 0===n?void 0:n.type)===Ra,e,"argument-error");return aa(e,await Oa(e,t,n))}return aa(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;li("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;li(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Es(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===bs){li((null===n||void 0===n?void 0:n.type)===Ra,e,"argument-error");return Aa(e,await Oa(e,t,n))}return Aa(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Es(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===bs){li((null===n||void 0===n?void 0:n.type)===Ra,e,"argument-error");return Ds(e,await Oa(e,t,n))}return Ds(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Oa(e,t,n){li(n.type===Ra,e,"argument-error");const r=await n.verify();li("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Da{constructor(e){this.providerId=Da.PROVIDER_ID,this.auth=hs(e)}verifyPhoneNumber(e,t){return Pa(this.auth,e,xn(t))}static credential(e,t){return Ms._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Da.credentialFromTaggedObject(t)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ms._fromTokenResponse(n,r):null}}function La(e,t){return t?qi(t):(li(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Da.PROVIDER_ID="phone",Da.PHONE_SIGN_IN_METHOD="phone";class Ma extends Ns{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ps(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ua(e){return $s(e.auth,new Ma(e),e.bypassAuthState)}function Fa(e){const{auth:t,user:n}=e;return li(n,t,"internal-error"),Zs(n,new Ma(e),e.bypassAuthState)}async function Ba(e){const{auth:t,user:n}=e;return li(n,t,"internal-error"),Js(n,new Ma(e),e.bypassAuthState)}class Va{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(bM){this.reject(bM)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(bM){this.reject(bM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ua;case"linkViaPopup":case"linkViaRedirect":return Ba;case"reauthViaPopup":case"reauthViaRedirect":return Fa;default:ri(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const za=new mi(2e3,1e4);class Ha extends Va{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ha.currentPopupAction&&Ha.currentPopupAction.cancel(),Ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return li(e,this.auth,"internal-error"),e}async onExecution(){ui(1===this.filter.length,"Popup operations only handle one event");const e=ya();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,za.get())};e()}}Ha.currentPopupAction=null;const Wa=new Map;class Ka extends Va{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Wa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ya(t),r=Ga(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(bM){e=()=>Promise.reject(bM)}Wa.set(this.auth._key(),e)}return this.bypassAuthState||Wa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function qa(e,t){Wa.set(e._key(),t)}function Ga(e){return qi(e._redirectPersistence)}function Ya(e){return Qi("pendingRedirect",e.config.apiKey,e.name)}async function Qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Rr(e.app))return Promise.reject(ai(e));const r=hs(e),i=La(r,t),s=new Ka(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Xa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Za(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Za(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ja(e))}saveEventToCache(e){this.cachedEventUids.add(Ja(e)),this.lastProcessedEventTime=Date.now()}}function Ja(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Za(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const $a=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eo=/^https?/;async function to(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ei(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(no(r))return}catch(n){}ri(e,"unauthorized-domain")}function no(e){const t=di(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!eo.test(n))return!1;if($a.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ro=new mi(3e4,6e4);function io(){const e=ba().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function so(e){return new Promise((t,n)=>{var r,i;function s(){io(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{io(),n(ii(e,"network-request-failed"))},timeout:ro.get()})}if(null!==(r=ba().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=ba().gapi)||void 0===i||!i.load){const t=gs("iframefcb");return ba()[t]=()=>{gapi.load?s():n(ii(e,"network-request-failed"))},ms("".concat(ps.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw ao=null,e})}let ao=null;const oo=new mi(5e3,15e3),lo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},co=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uo(e){const t=e.config;li(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?gi(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dr},i=co.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(mn(r).slice(1))}async function ho(e){const t=await function(e){return ao=ao||so(e),ao}(e),n=ba().gapi;return li(n,e,"internal-error"),t.open({where:document.body,url:uo(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lo,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ii(e,"network-request-failed"),s=ba().setTimeout(()=>{r(i)},oo.get());function a(){ba().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const fo={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class po{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(bM){}}}function mo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=c(c({},fo),{},{width:r.toString(),height:i.toString(),top:s,left:a}),u=an().toLowerCase();n&&(o=es(u)?"_blank":n),Zi(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return ss(arguments.length>0&&void 0!==arguments[0]?arguments[0]:an())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new po(null);const h=window.open(t||"",o,d);li(h,e,"popup-blocked");try{h.focus()}catch(bM){}return new po(h)}const go="__/auth/handler",yo="emulator/auth/handler",vo=encodeURIComponent("fac");async function bo(e,t,n,r,i,s){li(e.config.authDomain,e,"auth-domain-config-required"),li(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dr,eventId:i};if(t instanceof Bs){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Vs){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(vo,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(go);return gi(t,yo)}(e),"?").concat(mn(o).slice(1)).concat(c)}const xo="webStorageSupport";const wo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ma,this._completeRedirectFn=Qa,this._overrideRedirectResult=qa}async _openPopup(e,t,n,r){var i;ui(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return mo(e,await bo(e,t,n,di(),r),ya())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ba().location.href=e}(await bo(e,t,n,di(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ui(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ho(e),n=new Xa(e);return t.register("authEvent",t=>{li(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xo,{type:xo},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[xo];void 0!==i&&t(!!i),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=to(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return os()||$i()||ss()}};var Eo="@firebase/auth",_o="1.11.0";class So{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){li(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Co=Jt("authIdTokenMaxAge")||300;let ko=null;var No,jo;No={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ii("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ps=No,jo="Browser",Ir(new wn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;li(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:jo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ls(jo)},c=new ds(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qi);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ir(new wn("auth-internal",e=>(e=>new So(e))(hs(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ur(Eo,_o,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(jo)),Ur(Eo,_o,"esm2020");var To,Io,Ao="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ro={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=a(n)).j(t);d(c)||c.l(e)>0;)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Io=Ro.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},To=Ro.Integer=r}).apply("undefined"!==typeof Ao?Ao:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Po,Oo,Do,Lo,Mo,Uo,Fo,Bo,Vo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zo={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Vo&&Vo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(E)}};function E(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function _(){this.u=this.u,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function k(e){return/^[\s\xa0]*$/.test(e)}function N(e,t){S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(N,S),N.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&N.Z.h.call(this)},N.prototype.h=function(){N.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),T=0;function I(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++T,this.da=this.fa=!1}function A(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(A(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function U(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=U(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new I(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var F="closure_lm_"+(1e6*Math.random()|0),B={};function V(e,t,n,r,i){if(r&&r.once)return H(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)V(e,t[s],n,r,i);return null}return n=X(n),e&&e[j]?e.J(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=Y(e);if(l||(e[F]=l=new L(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=X(n),e&&e[j]?e.K(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[j]?(e=e.i,(s=String(t).toString())in e.g&&((n=U(t=e.g[s],n,r,i))>-1&&(A(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=U(t,n,r,i)),(n=e>-1?t[e]:null)&&K(n))}function K(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(M(n,e),0==n.h&&(n.src=null,t[F]=null)):A(e)}}}function q(e){return e in B?B[e]:B[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new N(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&K(e),e=n.call(r,t)}return e}function Y(e){return(e=e[F])instanceof L?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function J(){_.call(this),this.i=new L(this),this.M=this,this.G=null}function Z(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var i=t;D(t=new S(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=$(s,r,!0,t)&&i;if(s=t.g=e,i=$(s,r,!0,t)&&i,i=$(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=$(s,r,!1,t)&&i}function $(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,_),J.prototype[j]=!0,J.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)A(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){_.call(this),this.h=e,this.g={}}u(ne,_);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&K(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){S.call(this,"d")}function he(){S.call(this,"c")}u(de,S),u(he,S);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){S.call(this,fe.Ia,e)}function ye(e){const t=me();Z(t,new ge(t))}function ve(e,t){S.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();Z(t,new ve(t,e))}function xe(e,t){S.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ee(){this.g=!0}function _e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,S),fe.STAT_EVENT="statevent",u(ve,S),fe.Ja="timingevent",u(xe,S),Ee.prototype.ua=function(){this.g=!1},Ee.prototype.info=function(){};var Se,Ce={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ne(){}function je(e){return encodeURIComponent(String(e))}function Te(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ie(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ae}function Ae(){this.i=null,this.g="",this.h=!1}u(Ne,le),Ne.prototype.g=function(){return new XMLHttpRequest},Se=new Ne;var Re={},Pe={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,De(e,null)}function De(e,t){e.F=Date.now(),Ue(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ae,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=V(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?P(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pe:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?Pe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ue(e){e.T=Date.now()+e.H,Fe(e,e.H)}function Fe(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Be(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Be(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;$t(n),Ht(n)}Xt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&$t(n),!k(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qe(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Be(o),Ue(o)),r.g=a}else Qt(r);n.i.length>0&&Kt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ie.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ut(e)?t.j():this.Y(e)},Ie.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ut(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ft(this.g)))){this.K||4!=l||7==c||ye(),Be(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ft(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ut(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),ze(this),Ve(this);break e}_e(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Pe){4==l&&(this.m=4,be(14),e=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),_e(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}_e(this.i,this.l,t,null),He(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(o),o.P=!0,be(11))}}else _e(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else _e(this.i,this.l,n,null),He(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Ue(this)))}else(function(e){const t={};e=(e.g&&Ut(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(k(e[r]))continue;var n=Te(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Ve(this)}}}catch(El){}},Ie.prototype.cancel=function(){this.K=!0,ze(this)},Ie.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),ze(this),this.m=2,Ve(this)):Fe(this,this.T-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ke(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Ke.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof $e?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match(Ze))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new $e(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$e.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(je(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},$e.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function xt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function _t(){this.g=new oe}function St(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ct(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function kt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,jt(e)}function jt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Tt(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function It(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Tt(n),"string"===typeof e?null!=n&&je(n):it(e,t,n))}function At(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=je(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+je(n[t])),e.push(r)}}return this.i=e.join("&")},u(St,le),St.prototype.g=function(){return new Ct(this.i,this.h)},u(Ct,J),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,jt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jt(this)),this.g&&(this.readyState=3,jt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):jt(this),3==this.readyState&&kt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Na=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(At,J);var Rt=/^https?$/i,Pt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Dt(e),Mt(e)}function Dt(e){e.A||(e.A=!0,Z(e,"complete"),Z(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ut(e))setTimeout(e.Ca.bind(e),0);else if(Z(e,"readystatechange"),4==Ut(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Ze)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)Z(e,"complete"),Z(e,"success");else{e.o=6;try{var a=Ut(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Dt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||Z(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ut(e){return e.g?e.g.readyState:0}function Ft(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Bt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bt("baseRetryDelayMs",5e3,e),this.Za=Bt("retryDelaySeedMs",1e4,e),this.Ta=Bt("forwardChannelMaxRetries",2,e),this.va=Bt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ke(e&&e.concurrentRequestLimit),this.Ba=new _t,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(Wt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Ie(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ue(t)}rn(e)}function Ht(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function Wt(e){Ht(e),e.v&&(s.clearTimeout(e.v),e.v=null),$t(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function Kt(e){if(!qe(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),b||(v(),b=!0),x.add(t,e),e.D=0}}function qt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&It(r,e.u,e.o),n=new Ie(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Yt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),Oe(n,r,t)}function Gt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Yt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Wo){throw e.push(s+"type="+encodeURIComponent("_badmap")),Wo}}catch(Wo){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),b||(v(),b=!0),x.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Zt(e){e.g=new Ie(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&It(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,De(n,e)}function $t(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){$t(e),Jt(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;Z(r=me(),new xe(r,n)),Kt(e)}else Qt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new $e(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Ee;if(s.Image){const r=new Image;r.onload=c(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Et,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ee;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Wt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof $e?et(n):new $e(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new $e(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new At(new St({ab:n})):new At(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){J.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!k(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!k(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=At.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Se.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ot(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Pt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ot(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Z(this,"complete"),Z(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),At.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ut(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Kt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ie(this,this.j,e);let s=this.o;if(this.U&&(s?(s=P(s),D(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),s&&(this.R?t="headers="+je(Tt(s))+"&"+t:this.u&&It(n,this.u,s)),Qe(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?qt(this,e):0==this.i.length||qe(this.h)||qt(this))},e.Da=function(){if(this.v=null,Zt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Ht(this),Zt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){zt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.I&&Kt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){Z(this.g,"a")},hn.prototype.qa=function(e){Z(this.g,new un(e))},hn.prototype.pa=function(e){Z(this.g,new dn)},hn.prototype.oa=function(){Z(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Bo=zo.createWebChannelTransport=function(){return new ln},Fo=zo.getStatEventTarget=function(){return me()},Uo=zo.Event=fe,Mo=zo.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,Lo=zo.ErrorCode=Ce,ke.COMPLETE="complete",Do=zo.EventType=ke,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,Oo=zo.WebChannel=ce,zo.FetchXmlHttpFactory=St,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,Po=zo.XhrIo=At}).apply("undefined"!==typeof Vo?Vo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ho="@firebase/firestore",Wo="4.9.2";class Ko{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ko.UNAUTHENTICATED=new Ko(null),Ko.GOOGLE_CREDENTIALS=new Ko("google-credentials-uid"),Ko.FIRST_PARTY=new Ko("first-party-uid"),Ko.MOCK_USER=new Ko("mock-user");let qo="12.3.0";const Go=new An("@firebase/firestore");function Yo(){return Go.logLevel}function Qo(e){if(Go.logLevel<=kn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Go.debug("Firestore (".concat(qo,"): ").concat(e),...i)}}function Xo(e){if(Go.logLevel<=kn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Go.error("Firestore (".concat(qo,"): ").concat(e),...i)}}function Jo(e){if(Go.logLevel<=kn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zo);Go.warn("Firestore (".concat(qo,"): ").concat(e),...i)}}function Zo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function $o(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,el(e,r,n)}function el(e,t,n){let r="FIRESTORE (".concat(qo,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Xo(r),new Error(r)}function tl(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||el(t,i,r)}function nl(e,t){return e}const rl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class il extends un{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class sl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class al{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ol{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ko.UNAUTHENTICATED))}shutdown(){}}class ll{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cl{constructor(e){this.t=e,this.currentUser=Ko.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tl(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new sl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sl,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Qo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Qo("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Qo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tl("string"==typeof t.accessToken,31837,{l:t}),new al(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tl(null===e||"string"==typeof e,2055,{h:e}),new Ko(e)}}class ul{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ko.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ul(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ko.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tl(void 0===this.o,3512);const n=e=>{null!=e.error&&Qo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Qo("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Qo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Qo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(tl("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new hl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ml{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=pl(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function gl(e,t){return e<t?-1:e>t?1:0}function yl(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return xl(n)===xl(i)?gl(n,i):xl(n)?1:-1}return gl(e.length,t.length)}const vl=55296,bl=57343;function xl(e){const t=e.charCodeAt(0);return t>=vl&&t<=bl}function wl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const El="__name__";class _l{constructor(e,t,n){void 0===t?t=0:t>e.length&&$o(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&$o(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_l.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _l?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=_l.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return gl(e.length,t.length)}static compareSegments(e,t){const n=_l.isNumericId(e),r=_l.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?_l.extractNumericId(e).compare(_l.extractNumericId(t)):yl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return To.fromString(e.substring(4,e.length-2))}}class Sl extends _l{construct(e,t,n){return new Sl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new il(rl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Sl(e)}static emptyPath(){return new Sl([])}}const Cl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kl extends _l{construct(e,t,n){return new kl(e,t,n)}static isValidIdentifier(e){return Cl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===El}static keyField(){return new kl([El])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new il(rl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new il(rl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new il(rl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new il(rl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kl(t)}static emptyPath(){return new kl([])}}class Nl{constructor(e){this.path=e}static fromPath(e){return new Nl(Sl.fromString(e))}static fromName(e){return new Nl(Sl.fromString(e).popFirst(5))}static empty(){return new Nl(Sl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Sl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Sl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Nl(new Sl(e.slice()))}}function jl(e,t,n){if(!n)throw new il(rl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Tl(e){if(!Nl.isDocumentKey(e))throw new il(rl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Il(e){if(Nl.isDocumentKey(e))throw new il(rl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Al(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Rl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":$o(12329,{type:typeof e})}function Pl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new il(rl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rl(e);throw new il(rl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ol(e,t){const n={typeString:e};return t&&(n.value=t),n}function Dl(e,t){if(!Al(e))throw new il(rl.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new il(rl.INVALID_ARGUMENT,n);return!0}const Ll=-62135596800,Ml=1e6;class Ul{static now(){return Ul.fromMillis(Date.now())}static fromDate(e){return Ul.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ml);return new Ul(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new il(rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new il(rl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ll)throw new il(rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new il(rl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ml}_compareTo(e){return this.seconds===e.seconds?gl(this.nanoseconds,e.nanoseconds):gl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ul._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dl(e,Ul._jsonSchema))return new Ul(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ll;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ul._jsonSchemaVersion="firestore/timestamp/1.0",Ul._jsonSchema={type:Ol("string",Ul._jsonSchemaVersion),seconds:Ol("number"),nanoseconds:Ol("number")};class Fl{static fromTimestamp(e){return new Fl(e)}static min(){return new Fl(new Ul(0,0))}static max(){return new Fl(new Ul(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Bl=-1;class Vl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Vl.UNKNOWN_ID=-1;function zl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fl.fromTimestamp(1e9===r?new Ul(n+1,0):new Ul(n,r));return new Wl(i,Nl.empty(),t)}function Hl(e){return new Wl(e.readTime,e.key,Bl)}class Wl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Wl(Fl.min(),Nl.empty(),Bl)}static max(){return new Wl(Fl.max(),Nl.empty(),Bl)}}function Kl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Nl.comparator(e.documentKey,t.documentKey),0!==n?n:gl(e.largestBatchId,t.largestBatchId))}const ql="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Yl(e){if(e.code!==rl.FAILED_PRECONDITION||e.message!==ql)throw e;Qo("LocalStore","Unexpectedly lost primary lease")}class Ql{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$o(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ql((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ql?t:Ql.resolve(t)}catch(e){return Ql.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ql.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ql.reject(t)}static resolve(e){return new Ql((t,n)=>{t(e)})}static reject(e){return new Ql((t,n)=>{n(e)})}static waitFor(e){return new Ql((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ql.resolve(!1);for(const n of e)t=t.next(e=>e?Ql.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ql((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ql((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Xl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jl(e){return"IndexedDbTransactionError"===e.name}class Zl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zl.ce=-1;const $l=-1;function ec(e){return null==e}function tc(e){return 0===e&&1/e==-1/0}function nc(e){return"number"==typeof e&&Number.isInteger(e)&&!tc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const rc="\x01";function ic(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ac(t)),t=sc(e.get(n),t);return ac(t)}function sc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case rc:n+="\x01\x11";break;default:n+=t}}return n}function ac(e){return e+rc+"\x01"}const oc="remoteDocuments",lc="owner",cc="mutationQueues",uc="mutations";const dc="documentMutations",hc="remoteDocumentsV14",fc="remoteDocumentGlobal",pc="targets",mc="targetDocuments",gc="targetGlobal",yc="collectionParents",vc="clientMetadata",bc="bundles",xc="namedQueries",wc="indexConfiguration",Ec="indexState",_c="indexEntries",Sc="documentOverlays",Cc="globals",kc=[cc,uc,dc,oc,pc,lc,gc,mc,vc,fc,yc,bc,xc],Nc=[cc,uc,dc,hc,pc,lc,gc,mc,vc,fc,yc,bc,xc,Sc],jc=Nc,Tc=[...jc,wc,Ec,_c];function Ic(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ac(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Pc{constructor(e,t){this.comparator=e,this.root=t||Dc.EMPTY}insert(e,t){return new Pc(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dc.BLACK,null,null))}remove(e){return new Pc(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oc(this.root,e,this.comparator,!0)}}class Oc{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dc{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Dc.RED,this.left=null!=r?r:Dc.EMPTY,this.right=null!=i?i:Dc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Dc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Dc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Dc.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $o(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $o(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $o(27949);return e+(this.isRed()?0:1)}}Dc.EMPTY=null,Dc.RED=!0,Dc.BLACK=!1,Dc.EMPTY=new class{constructor(){this.size=0}get key(){throw $o(57766)}get value(){throw $o(16141)}get color(){throw $o(16727)}get left(){throw $o(29726)}get right(){throw $o(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Dc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Lc{constructor(e){this.comparator=e,this.data=new Pc(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mc(this.data.getIterator())}getIteratorFrom(e){return new Mc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Lc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lc(this.comparator);return t.data=e,t}}class Mc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Uc{constructor(e){this.fields=e,e.sort(kl.comparator)}static empty(){return new Uc([])}unionWith(e){let t=new Lc(kl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Uc(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Fc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bc{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Fc("Invalid base64 string: "+e):e}}(e);return new Bc(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Bc(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return gl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bc.EMPTY_BYTE_STRING=new Bc("");const Vc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zc(e){if(tl(!!e,39018),"string"==typeof e){let t=0;const n=Vc.exec(e);if(tl(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Hc(e.seconds),nanos:Hc(e.nanos)}}function Hc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wc(e){return"string"==typeof e?Bc.fromBase64String(e):Bc.fromUint8Array(e)}const Kc="server_timestamp",qc="__type__",Gc="__previous_value__",Yc="__local_write_time__";function Qc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[qc])||void 0===t?void 0:t.stringValue)===Kc}function Xc(e){const t=e.mapValue.fields[Gc];return Qc(t)?Xc(t):t}function Jc(e){const t=zc(e.mapValue.fields[Yc].timestampValue);return new Ul(t.seconds,t.nanos)}class Zc{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const $c="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||$c}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}const tu="__type__",nu="__max__",ru={mapValue:{fields:{__type__:{stringValue:nu}}}},iu="__vector__",su="value";function au(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qc(e)?4:_u(e)?9007199254740991:wu(e)?10:11:$o(28295,{value:e})}function ou(e,t){if(e===t)return!0;const n=au(e);if(n!==au(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jc(e).isEqual(Jc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=zc(e.timestampValue),r=zc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wc(e.bytesValue).isEqual(Wc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hc(e.geoPointValue.latitude)===Hc(t.geoPointValue.latitude)&&Hc(e.geoPointValue.longitude)===Hc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hc(e.integerValue)===Hc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Hc(e.doubleValue),r=Hc(t.doubleValue);return n===r?tc(n)===tc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wl(e.arrayValue.values||[],t.arrayValue.values||[],ou);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ic(n)!==Ic(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ou(n[i],r[i])))return!1;return!0}(e,t);default:return $o(52216,{left:e})}}function lu(e,t){return void 0!==(e.values||[]).find(e=>ou(e,t))}function cu(e,t){if(e===t)return 0;const n=au(e),r=au(t);if(n!==r)return gl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Hc(e.integerValue||e.doubleValue),r=Hc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return uu(e.timestampValue,t.timestampValue);case 4:return uu(Jc(e),Jc(t));case 5:return yl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Wc(e),r=Wc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=gl(n[i],r[i]);if(0!==e)return e}return gl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=gl(Hc(e.latitude),Hc(t.latitude));return 0!==n?n:gl(Hc(e.longitude),Hc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return du(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[su])||void 0===n?void 0:n.arrayValue,c=null===(r=o[su])||void 0===r?void 0:r.arrayValue,u=gl((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:du(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ru.mapValue&&t===ru.mapValue)return 0;if(e===ru.mapValue)return 1;if(t===ru.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=yl(r[a],s[a]);if(0!==e)return e;const t=cu(n[r[a]],i[s[a]]);if(0!==t)return t}return gl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw $o(23264,{he:n})}}function uu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return gl(e,t);const n=zc(e),r=zc(t),i=gl(n.seconds,r.seconds);return 0!==i?i:gl(n.nanos,r.nanos)}function du(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cu(n[i],r[i]);if(e)return e}return gl(n.length,r.length)}function hu(e){return fu(e)}function fu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=zc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Wc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Nl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=fu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(fu(e.fields[i]));return n+"}"}(e.mapValue):$o(61005,{value:e})}function pu(e){switch(au(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Xc(e);return t?16+pu(t):16;case 5:return 2*e.stringValue.length;case 6:return Wc(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+pu(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Ac(e.fields,(e,n)=>{t+=e.length+pu(n)}),t}(e.mapValue);default:throw $o(13486,{value:e})}}function mu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function gu(e){return!!e&&"integerValue"in e}function yu(e){return!!e&&"arrayValue"in e}function vu(e){return!!e&&"nullValue"in e}function bu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xu(e){return!!e&&"mapValue"in e}function wu(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[tu])||void 0===t?void 0:t.stringValue)===iu}function Eu(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ac(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Eu(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Eu(e.arrayValue.values[n]);return t}return c({},e)}function _u(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===nu}class Su{constructor(e){this.value=e}static empty(){return new Su({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=kl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Eu(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());xu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ou(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ac(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Su(Eu(this.value))}}function Cu(e){const t=[];return Ac(e.fields,(e,n)=>{const r=new kl([e]);if(xu(n)){const e=Cu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Uc(t)}class ku{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ku(e,0,Fl.min(),Fl.min(),Fl.min(),Su.empty(),0)}static newFoundDocument(e,t,n,r){return new ku(e,1,t,Fl.min(),n,r,0)}static newNoDocument(e,t){return new ku(e,2,t,Fl.min(),Fl.min(),Su.empty(),0)}static newUnknownDocument(e,t){return new ku(e,3,t,Fl.min(),Fl.min(),Su.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ku&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ku(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}function ju(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?Nl.comparator(Nl.fromName(a.referenceValue),n.key):cu(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Tu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ou(e.position[n],t.position[n]))return!1;return!0}class Iu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Au(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ru{}class Pu extends Ru{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Vu(e,t,n):"array-contains"===t?new Ku(e,n):"in"===t?new qu(e,n):"not-in"===t?new Gu(e,n):"array-contains-any"===t?new Yu(e,n):new Pu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new zu(e,n):new Hu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(cu(t,this.value)):null!==t&&au(this.value)===au(t)&&this.matchesComparison(cu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $o(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ou extends Ru{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ou(e,t)}matches(e){return Du(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Du(e){return"and"===e.op}function Lu(e){return Mu(e)&&Du(e)}function Mu(e){for(const t of e.filters)if(t instanceof Ou)return!1;return!0}function Uu(e){if(e instanceof Pu)return e.field.canonicalString()+e.op.toString()+hu(e.value);if(Lu(e))return e.filters.map(e=>Uu(e)).join(",");{const t=e.filters.map(e=>Uu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Fu(e,t){return e instanceof Pu?function(e,t){return t instanceof Pu&&e.op===t.op&&e.field.isEqual(t.field)&&ou(e.value,t.value)}(e,t):e instanceof Ou?function(e,t){return t instanceof Ou&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Fu(n,t.filters[r]),!0)}(e,t):void $o(19439)}function Bu(e){return e instanceof Pu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hu(e.value))}(e):e instanceof Ou?function(e){return e.op.toString()+" {"+e.getFilters().map(Bu).join(" ,")+"}"}(e):"Filter"}class Vu extends Pu{constructor(e,t,n){super(e,t,n),this.key=Nl.fromName(n.referenceValue)}matches(e){const t=Nl.comparator(e.key,this.key);return this.matchesComparison(t)}}class zu extends Pu{constructor(e,t){super(e,"in",t),this.keys=Wu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hu extends Pu{constructor(e,t){super(e,"not-in",t),this.keys=Wu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Nl.fromName(e.referenceValue))}class Ku extends Pu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yu(t)&&lu(t.arrayValue,this.value)}}class qu extends Pu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lu(this.value.arrayValue,t)}}class Gu extends Pu{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!lu(this.value.arrayValue,t)}}class Yu extends Pu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>lu(this.value.arrayValue,e))}}class Qu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Xu(e){return new Qu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ju(e){const t=nl(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Uu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ec(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>hu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>hu(e)).join(",")),t.Te=e}return t.Te}function Zu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Au(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Fu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tu(e.startAt,t.startAt)&&Tu(e.endAt,t.endAt)}function $u(e){return Nl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class ed{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function td(e,t,n,r,i,s,a,o){return new ed(e,t,n,r,i,s,a,o)}function nd(e){return new ed(e)}function rd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function id(e){return null!==e.collectionGroup}function sd(e){const t=nl(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Lc(kl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Iu(r,n))}),e.has(kl.keyField().canonicalString())||t.Ie.push(new Iu(kl.keyField(),n))}return t.Ie}function ad(e){const t=nl(e);return t.Ee||(t.Ee=od(t,sd(e))),t.Ee}function od(e,t){if("F"===e.limitType)return Xu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Iu(e.field,t)});const n=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;return Xu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ld(e,t){const n=e.filters.concat([t]);return new ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cd(e,t,n){return new ed(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ud(e,t){return Zu(ad(e),ad(t))&&e.limitType===t.limitType}function dd(e){return"".concat(Ju(ad(e)),"|lt:").concat(e.limitType)}function hd(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Bu(e)).join(", "),"]")),ec(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>hu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>hu(e)).join(",")),"Target(".concat(t,")")}(ad(e)),"; limitType=").concat(e.limitType,")")}function fd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of sd(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ju(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,sd(e),t))&&!(e.endAt&&!function(e,t,n){const r=ju(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,sd(e),t))}(e,t)}function pd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function md(e){return(t,n)=>{let r=!1;for(const i of sd(e)){const e=gd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function gd(e,t,n){const r=e.field.isKeyField()?Nl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cu(r,i):$o(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $o(19790,{direction:e.dir})}}class yd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ac(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Rc(this.inner)}size(){return this.innerSize}}const vd=new Pc(Nl.comparator);function bd(){return vd}const xd=new Pc(Nl.comparator);function wd(){let e=xd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ed(e){let t=xd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function _d(){return Cd()}function Sd(){return Cd()}function Cd(){return new yd(e=>e.toString(),(e,t)=>e.isEqual(t))}const kd=new Pc(Nl.comparator),Nd=new Lc(Nl.comparator);function jd(){let e=Nd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Td=new Lc(gl);function Id(){return Td}function Ad(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(t)?"-0":t}}function Rd(e){return{integerValue:""+e}}function Pd(e,t){return nc(t)?Rd(t):Ad(e,t)}class Od{constructor(){this._=void 0}}function Dd(e,t,n){return e instanceof Ud?function(e,t){const n={fields:{[qc]:{stringValue:Kc},[Yc]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Qc(t)&&(t=Xc(t)),t&&(n.fields[Gc]=t),{mapValue:n}}(n,t):e instanceof Fd?Bd(e,t):e instanceof Vd?zd(e,t):function(e,t){const n=Md(e,t),r=Wd(n)+Wd(e.Ae);return gu(n)&&gu(e.Ae)?Rd(r):Ad(e.serializer,r)}(e,t)}function Ld(e,t,n){return e instanceof Fd?Bd(e,t):e instanceof Vd?zd(e,t):n}function Md(e,t){return e instanceof Hd?function(e){return gu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ud extends Od{}class Fd extends Od{constructor(e){super(),this.elements=e}}function Bd(e,t){const n=Kd(t);for(const r of e.elements)n.some(e=>ou(e,r))||n.push(r);return{arrayValue:{values:n}}}class Vd extends Od{constructor(e){super(),this.elements=e}}function zd(e,t){let n=Kd(t);for(const r of e.elements)n=n.filter(e=>!ou(e,r));return{arrayValue:{values:n}}}class Hd extends Od{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wd(e){return Hc(e.integerValue||e.doubleValue)}function Kd(e){return yu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class Gd{constructor(e,t){this.version=e,this.transformResults=t}}class Yd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yd}static exists(e){return new Yd(void 0,e)}static updateTime(e){return new Yd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xd{}function Jd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new oh(e.key,Yd.none()):new nh(e.key,e.data,Yd.none());{const n=e.data,r=Su.empty();let i=new Lc(kl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new rh(e.key,r,new Uc(i.toArray()),Yd.none())}}function Zd(e,t,n){e instanceof nh?function(e,t,n){const r=e.value.clone(),i=sh(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof rh?function(e,t,n){if(!Qd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=sh(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ih(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function $d(e,t,n,r){return e instanceof nh?function(e,t,n,r){if(!Qd(e.precondition,t))return n;const i=e.value.clone(),s=ah(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof rh?function(e,t,n,r){if(!Qd(e.precondition,t))return n;const i=ah(e.fieldTransforms,r,t),s=t.data;return s.setAll(ih(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Qd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function eh(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Md(r.transform,e||null);null!=i&&(null===n&&(n=Su.empty()),n.set(r.field,i))}return n||null}function th(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fd&&t instanceof Fd||e instanceof Vd&&t instanceof Vd?wl(e.elements,t.elements,ou):e instanceof Hd&&t instanceof Hd?ou(e.Ae,t.Ae):e instanceof Ud&&t instanceof Ud}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class nh extends Xd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rh extends Xd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ih(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function sh(e,t,n){const r=new Map;tl(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Ld(a,o,n[i]))}return r}function ah(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Dd(e,s,t))}return r}class oh extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lh extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ch{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Zd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=$d(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Sd();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Jd(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Fl.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jd())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(e,t)=>th(e,t))&&wl(this.baseMutations,e.baseMutations,(e,t)=>th(e,t))}}class uh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){tl(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=kd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new uh(e,t,n,r)}}class dh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class hh{constructor(e,t){this.count=e,this.unchangedNames=t}}var fh,ph;function mh(e){switch(e){case rl.OK:return $o(64938);case rl.CANCELLED:case rl.UNKNOWN:case rl.DEADLINE_EXCEEDED:case rl.RESOURCE_EXHAUSTED:case rl.INTERNAL:case rl.UNAVAILABLE:case rl.UNAUTHENTICATED:return!1;case rl.INVALID_ARGUMENT:case rl.NOT_FOUND:case rl.ALREADY_EXISTS:case rl.PERMISSION_DENIED:case rl.FAILED_PRECONDITION:case rl.ABORTED:case rl.OUT_OF_RANGE:case rl.UNIMPLEMENTED:case rl.DATA_LOSS:return!0;default:return $o(15467,{code:e})}}function gh(e){if(void 0===e)return Xo("GRPC error has no .code"),rl.UNKNOWN;switch(e){case fh.OK:return rl.OK;case fh.CANCELLED:return rl.CANCELLED;case fh.UNKNOWN:return rl.UNKNOWN;case fh.DEADLINE_EXCEEDED:return rl.DEADLINE_EXCEEDED;case fh.RESOURCE_EXHAUSTED:return rl.RESOURCE_EXHAUSTED;case fh.INTERNAL:return rl.INTERNAL;case fh.UNAVAILABLE:return rl.UNAVAILABLE;case fh.UNAUTHENTICATED:return rl.UNAUTHENTICATED;case fh.INVALID_ARGUMENT:return rl.INVALID_ARGUMENT;case fh.NOT_FOUND:return rl.NOT_FOUND;case fh.ALREADY_EXISTS:return rl.ALREADY_EXISTS;case fh.PERMISSION_DENIED:return rl.PERMISSION_DENIED;case fh.FAILED_PRECONDITION:return rl.FAILED_PRECONDITION;case fh.ABORTED:return rl.ABORTED;case fh.OUT_OF_RANGE:return rl.OUT_OF_RANGE;case fh.UNIMPLEMENTED:return rl.UNIMPLEMENTED;case fh.DATA_LOSS:return rl.DATA_LOSS;default:return $o(39323,{code:e})}}(ph=fh||(fh={}))[ph.OK=0]="OK",ph[ph.CANCELLED=1]="CANCELLED",ph[ph.UNKNOWN=2]="UNKNOWN",ph[ph.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ph[ph.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ph[ph.NOT_FOUND=5]="NOT_FOUND",ph[ph.ALREADY_EXISTS=6]="ALREADY_EXISTS",ph[ph.PERMISSION_DENIED=7]="PERMISSION_DENIED",ph[ph.UNAUTHENTICATED=16]="UNAUTHENTICATED",ph[ph.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ph[ph.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ph[ph.ABORTED=10]="ABORTED",ph[ph.OUT_OF_RANGE=11]="OUT_OF_RANGE",ph[ph.UNIMPLEMENTED=12]="UNIMPLEMENTED",ph[ph.INTERNAL=13]="INTERNAL",ph[ph.UNAVAILABLE=14]="UNAVAILABLE",ph[ph.DATA_LOSS=15]="DATA_LOSS";let yh=null;function vh(){return new TextEncoder}const bh=new To([4294967295,4294967295],0);function xh(e){const t=vh().encode(e),n=new Io;return n.update(t),new Uint8Array(n.digest())}function wh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new To([n,r],0),new To([i,s],0)]}class Eh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new _h("Invalid padding: ".concat(t));if(n<0)throw new _h("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new _h("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new _h("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=To.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(To.fromNumber(n)));return 1===r.compare(bh)&&(r=new To([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=xh(e),[n,r]=wh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Eh(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=xh(e),[n,r]=wh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ch.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sh(Fl.min(),r,new Pc(gl),bd(),jd())}}class Ch{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ch(n,t,jd(),jd(),jd())}}class kh{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Nh{constructor(e,t){this.targetId=e,this.Ce=t}}class jh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Th{constructor(){this.ve=0,this.Fe=Rh(),this.Me=Bc.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jd(),t=jd(),n=jd();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:$o(38017,{changeType:i})}}),new Ch(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Rh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tl(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Ih{constructor(e){this.Ge=e,this.ze=new Map,this.je=bd(),this.Je=Ah(),this.He=Ah(),this.Ye=new Pc(gl)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:$o(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if($u(s))if(0===n){const e=new Nl(s.path);this.et(t,e,ku.newNoDocument(e,Fl.min()))}else tl(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=yh)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Wc(n).toUint8Array()}catch(e){if(e instanceof Fc)return Jo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Eh(s,r,i)}catch(e){return Jo(e instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&$u(i.target)){const t=new Nl(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ku.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=jd();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Sh(e,t,this.Ye,this.je,n);return this.je=bd(),this.Je=Ah(),this.He=Ah(),this.Ye=new Pc(gl),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Th,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Lc(gl),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Lc(gl),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Qo("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Th),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ah(){return new Pc(Nl.comparator)}function Rh(){return new Pc(Nl.comparator)}const Ph={asc:"ASCENDING",desc:"DESCENDING"},Oh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dh={and:"AND",or:"OR"};class Lh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mh(e,t){return e.useProto3Json||ec(t)?t:{value:t}}function Uh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Fh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Bh(e,t){return Uh(e,t.toTimestamp())}function Vh(e){return tl(!!e,49232),Fl.fromTimestamp(function(e){const t=zc(e);return new Ul(t.seconds,t.nanos)}(e))}function zh(e,t){return Hh(e,t).canonicalString()}function Hh(e,t){const n=function(e){return new Sl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Wh(e){const t=Sl.fromString(e);return tl(df(t),10190,{key:t.toString()}),t}function Kh(e,t){return zh(e.databaseId,t.path)}function qh(e,t){const n=Wh(t);if(n.get(1)!==e.databaseId.projectId)throw new il(rl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new il(rl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nl(Xh(n))}function Gh(e,t){return zh(e.databaseId,t)}function Yh(e){const t=Wh(e);return 4===t.length?Sl.emptyPath():Xh(t)}function Qh(e){return new Sl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xh(e){return tl(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Jh(e,t,n){return{name:Kh(e,t),fields:n.value.mapValue.fields}}function Zh(e,t){let n;if(t instanceof nh)n={update:Jh(e,t.key,t.value)};else if(t instanceof oh)n={delete:Kh(e,t.key)};else if(t instanceof rh)n={update:Jh(e,t.key,t.data),updateMask:uf(t.fieldMask)};else{if(!(t instanceof lh))return $o(16599,{Vt:t.type});n={verify:Kh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ud)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hd)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw $o(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Bh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:$o(27497)}(e,t.precondition)),n}function $h(e,t){return{documents:[Gh(e,t.path)]}}function ef(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gh(e,i);const s=function(e){if(0!==e.length)return cf(Ou.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:of(e.field),direction:rf(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Mh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function tf(e){let t=Yh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tl(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=nf(e);return t instanceof Ou&&Lu(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Iu(lf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ec(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Nu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Nu(n,t)}(n.endAt)),td(t,i,a,s,o,"F",l,c)}function nf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lf(e.unaryFilter.field);return Pu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=lf(e.unaryFilter.field);return Pu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lf(e.unaryFilter.field);return Pu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lf(e.unaryFilter.field);return Pu.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $o(61313);default:return $o(60726)}}(e):void 0!==e.fieldFilter?function(e){return Pu.create(lf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $o(58110);default:return $o(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ou.create(e.compositeFilter.filters.map(e=>nf(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $o(1026)}}(e.compositeFilter.op))}(e):$o(30097,{filter:e})}function rf(e){return Ph[e]}function sf(e){return Oh[e]}function af(e){return Dh[e]}function of(e){return{fieldPath:e.canonicalString()}}function lf(e){return kl.fromServerFormat(e.fieldPath)}function cf(e){return e instanceof Pu?function(e){if("=="===e.op){if(bu(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NAN"}};if(vu(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bu(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NAN"}};if(vu(e.value))return{unaryFilter:{field:of(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:of(e.field),op:sf(e.op),value:e.value}}}(e):e instanceof Ou?function(e){const t=e.getFilters().map(e=>cf(e));return 1===t.length?t[0]:{compositeFilter:{op:af(e.op),filters:t}}}(e):$o(54877,{filter:e})}function uf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function df(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class hf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fl.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Bc.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new hf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ff{constructor(e){this.yt=e}}function pf(e){const t=tf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?cd(t,t.limit,"L"):t}class mf{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Hc(e.integerValue));else if("doubleValue"in e){const n=Hc(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),tc(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=zc(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Wc(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?_u(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):wu(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):$o(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=su,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Hc(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Nl.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mf.Kt=new mf;class gf{constructor(){this.Cn=new yf}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ql.resolve()}getCollectionParents(e,t){return Ql.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ql.resolve()}deleteFieldIndex(e,t){return Ql.resolve()}deleteAllFieldIndexes(e){return Ql.resolve()}createTargetIndexes(e,t){return Ql.resolve()}getDocumentsMatchingTarget(e,t){return Ql.resolve(null)}getIndexType(e,t){return Ql.resolve(0)}getFieldIndexes(e,t){return Ql.resolve([])}getNextCollectionGroupToUpdate(e){return Ql.resolve(null)}getMinOffset(e,t){return Ql.resolve(Wl.min())}getMinOffsetFromCollectionGroup(e,t){return Ql.resolve(Wl.min())}updateCollectionGroup(e,t,n){return Ql.resolve()}updateIndexEntries(e,t){return Ql.resolve()}}class yf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Lc(Sl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Lc(Sl.comparator)).toArray()}}new Uint8Array(0);const vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},bf=41943040;class xf{static withCacheSize(e){return new xf(e,xf.DEFAULT_COLLECTION_PERCENTILE,xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}xf.DEFAULT_COLLECTION_PERCENTILE=10,xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xf.DEFAULT=new xf(bf,xf.DEFAULT_COLLECTION_PERCENTILE,xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xf.DISABLED=new xf(-1,0,0);class wf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wf(0)}static cr(){return new wf(-1)}}const Ef="LruGarbageCollector",_f=1048576;function Sf(e,t){let[n,r]=e,[i,s]=t;const a=gl(n,i);return 0===a?gl(r,s):a}class Cf{constructor(e){this.Ir=e,this.buffer=new Lc(Sf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Sf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Qo(Ef,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Jl(e)?Qo(Ef,"Ignoring IndexedDB error during garbage collection: ",e):await Yl(e)}await this.Vr(3e5)})}}class Nf{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ql.resolve(Zl.ce);const n=new Cf(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Qo("LruGarbageCollector","Garbage collection skipped; disabled"),Ql.resolve(vf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Qo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),vf):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Qo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Yo()<=kn.DEBUG&&Qo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Ql.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function jf(e,t){return new Nf(e,t)}class Tf{constructor(){this.changes=new yd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ku.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ql.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class If{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Af{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&$d(n.mutation,e,Uc.empty(),Ul.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,jd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jd();const r=_d();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=wd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=_d();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,jd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=bd();const s=Cd(),a=Cd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof rh)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),$d(a.mutation,t,a.mutation.getFieldMask(),Ul.now())):s.set(t.key,Uc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new If(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=Cd();let r=new Pc((e,t)=>e-t),i=jd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Uc.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||jd()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=Sd();l.forEach(e=>{if(!i.has(e)){const r=Jd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Ql.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Nl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):id(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ql.resolve(_d());let a=Bl,o=i;return s.next(t=>Ql.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Ql.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,jd())).next(e=>({batchId:a,changes:Ed(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Nl(t)).next(e=>{let t=wd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=wd();return this.indexManager.getCollectionParents(e,i).next(a=>Ql.forEach(a,a=>{const o=function(e,t){return new ed(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ku.newInvalidDocument(r)))});let n=wd();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&$d(s.mutation,r,Uc.empty(),Ul.now()),fd(t,r)&&(n=n.insert(e,r))}),n})}}class Rf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ql.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Vh(e.createTime)}}(t)),Ql.resolve()}getNamedQuery(e,t){return Ql.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:pf(e.bundledQuery),readTime:Vh(e.readTime)}}(t)),Ql.resolve()}}class Pf{constructor(){this.overlays=new Pc(Nl.comparator),this.qr=new Map}getOverlay(e,t){return Ql.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_d();return Ql.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ql.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ql.resolve()}getOverlaysForCollection(e,t,n){const r=_d(),i=t.length+1,s=new Nl(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ql.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Pc((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=_d(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=_d(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Ql.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new dh(t,n));let i=this.qr.get(t);void 0===i&&(i=jd(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Of{constructor(){this.sessionToken=Bc.EMPTY_BYTE_STRING}getSessionToken(e){return Ql.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ql.resolve()}}class Df{constructor(){this.Qr=new Lc(Lf.$r),this.Ur=new Lc(Lf.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Lf(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Lf(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new Nl(new Sl([])),n=new Lf(t,e),r=new Lf(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Nl(new Sl([])),n=new Lf(t,e),r=new Lf(t,e+1);let i=jd();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Lf(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Lf{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Nl.comparator(e.key,t.key)||gl(e.Yr,t.Yr)}static Kr(e,t){return gl(e.Yr,t.Yr)||Nl.comparator(e.key,t.key)}}class Mf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Lc(Lf.$r)}checkEmpty(e){return Ql.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ch(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new Lf(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ql.resolve(s)}lookupMutationBatch(e,t){return Ql.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ql.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ql.resolve(0===this.mutationQueue.length?$l:this.tr-1)}getAllMutationBatches(e){return Ql.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Lf(t,0),r=new Lf(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ql.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Lc(gl);return t.forEach(e=>{const t=new Lf(e,0),r=new Lf(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ql.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Nl.isDocumentKey(i)||(i=i.child(""));const s=new Lf(new Nl(i),0);let a=new Lc(gl);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Ql.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){tl(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ql.forEach(t.mutations,r=>{const i=new Lf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Lf(t,0),r=this.Zr.firstAfterOrEqual(n);return Ql.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ql.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Uf{constructor(e){this.ri=e,this.docs=new Pc(Nl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ql.resolve(n?n.document.mutableCopy():ku.newInvalidDocument(t))}getEntries(e,t){let n=bd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ku.newInvalidDocument(e))}),Ql.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=bd();const s=t.path,a=new Nl(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Kl(Hl(a),n)<=0||(r.has(a.key)||fd(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Ql.resolve(i)}getAllFromCollectionGroup(e,t,n,r){$o(9500)}ii(e,t){return Ql.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ff(this)}getSize(e){return Ql.resolve(this.size)}}class Ff extends Tf{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ql.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Bf{constructor(e){this.persistence=e,this.si=new yd(e=>Ju(e),Zu),this.lastRemoteSnapshotVersion=Fl.min(),this.highestTargetId=0,this.oi=0,this._i=new Df,this.targetCount=0,this.ai=wf.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ql.resolve()}getLastRemoteSnapshotVersion(e){return Ql.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ql.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ql.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ql.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ql.resolve()}updateTargetData(e,t){return this.Pr(t),Ql.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ql.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ql.waitFor(i).next(()=>r)}getTargetCount(e){return Ql.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ql.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ql.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ql.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ql.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ql.resolve(n)}containsKey(e,t){return Ql.resolve(this._i.containsKey(t))}}class Vf{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zl(0),this.li=!1,this.li=!0,this.hi=new Of,this.referenceDelegate=e(this),this.Pi=new Bf(this),this.indexManager=new gf,this.remoteDocumentCache=function(e){return new Uf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new ff(t),this.Ii=new Rf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Mf(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Qo("MemoryPersistence","Starting transaction:",e);const r=new zf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ql.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class zf extends Gl{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.Ri=new Df,this.Vi=null}static mi(e){return new Hf(e)}get fi(){if(this.Vi)return this.Vi;throw $o(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ql.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ql.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ql.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ql.forEach(this.fi,n=>{const r=Nl.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Fl.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ql.or([()=>Ql.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Wf{constructor(e,t){this.persistence=e,this.pi=new yd(e=>ic(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=jf(this,t)}static mi(e,t){return new Wf(e,t)}Ei(){}di(e){return Ql.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ql.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ql.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Fl.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ql.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ql.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ql.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ql.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pu(e.data.value)),t}br(e,t,n){return Ql.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ql.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Kf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=jd(),r=jd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Kf(e,t.fromCache,n,r)}}class qf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gf{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=ln()?8:Xl(an())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new qf;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Yo()<=kn.DEBUG&&Qo("QueryEngine","SDK will not create cache indexes for query:",hd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ql.resolve()):(Yo()<=kn.DEBUG&&Qo("QueryEngine","Query:",hd(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Yo()<=kn.DEBUG&&Qo("QueryEngine","The SDK decides to create cache indexes for query:",hd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ad(t))):Ql.resolve())}ys(e,t){if(rd(t))return Ql.resolve(null);let n=ad(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=cd(t,null,"F"),n=ad(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=jd(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,cd(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return rd(t)||r.isEqual(Fl.min())?Ql.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Ql.resolve(null):(Yo()<=kn.DEBUG&&Qo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hd(t)),this.vs(e,s,t,zl(r,Bl)).next(e=>e))})}Ds(e,t){let n=new Lc(md(e));return t.forEach((t,r)=>{fd(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Yo()<=kn.DEBUG&&Qo("QueryEngine","Using full collection scan to execute query:",hd(t)),this.ps.getDocumentsMatchingQuery(e,t,Wl.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Yf="LocalStore";class Qf{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Pc(gl),this.xs=new yd(e=>Ju(e),Zu),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Af(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Xf(e,t,n,r){return new Qf(e,t,n,r)}async function Jf(e,t){const n=nl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=jd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Zf(e){const t=nl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function $f(e,t,n){let r=jd(),i=jd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=bd();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Fl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Qo(Yf,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function ep(e,t){const n=nl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=$l),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function tp(e,t){const n=nl(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ql.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new hf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function np(e,t,n){const r=nl(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Jl(e))throw e;Qo(Yf,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function rp(e,t,n){const r=nl(e);let i=Fl.min(),s=jd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=nl(e),i=r.xs.get(n);return void 0!==i?Ql.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ad(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Fl.min(),n?s:jd())).next(e=>(ip(r,pd(t),e),{documents:e,Qs:s})))}function ip(e,t,n){let r=e.Os.get(t)||Fl.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class sp{constructor(){this.activeTargetIds=Id()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ap{constructor(){this.Mo=new sp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class op{Oo(e){}shutdown(){}}const lp="ConnectivityMonitor";class cp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Qo(lp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Qo(lp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let up=null;function dp(){return null===up?up=268435456+Math.round(2147483648*Math.random()):up++,"0x"+up.toString(16)}const hp="RestConnection",fp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pp{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===$c?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=dp(),a=this.zo(e,t.toUriEncodedString());Qo(hp,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=$t(l);return this.Jo(e,a,o,n,c).then(t=>(Qo(hp,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Jo(hp,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=fp[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class mp{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gp="WebChannelConnection";class yp extends pp{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=dp();return new Promise((i,a)=>{const o=new Po;o.setWithCredentials(!0),o.listenOnce(Do.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Lo.NO_ERROR:const n=o.getResponseJson();Qo(gp,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case Lo.TIMEOUT:Qo(gp,"RPC '".concat(e,"' ").concat(s," timed out")),a(new il(rl.DEADLINE_EXCEEDED,"Request time out"));break;case Lo.HTTP_ERROR:const r=o.getStatus();if(Qo(gp,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(rl).indexOf(t)>=0?t:rl.UNKNOWN}(n.status);a(new il(e,n.message))}else a(new il(rl.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new il(rl.UNAVAILABLE,"Connection failed."));break;default:$o(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Qo(gp,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Qo(gp,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=dp(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Bo(),a=Fo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");Qo(gp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new mp({Yo:t=>{h?Qo(gp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Qo(gp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Qo(gp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Oo.EventType.OPEN,()=>{h||(Qo(gp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Oo.EventType.CLOSE,()=>{h||(h=!0,Qo(gp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Oo.EventType.ERROR,t=>{h||(h=!0,Jo(gp,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new il(rl.UNAVAILABLE,"The operation could not be completed")))}),p(u,Oo.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];tl(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Qo(gp,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=fh[e];if(void 0!==t)return gh(t)}(t),i=a.message;void 0===n&&(n=rl.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new il(n,i)),u.close()}else Qo(gp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,Uo.STAT_EVENT,t=>{t.stat===Mo.PROXY?Qo(gp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Mo.NOPROXY&&Qo(gp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function vp(){return"undefined"!=typeof document?document:null}function bp(e){return new Lh(e,!0)}class xp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Qo("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wp="PersistentStream";class Ep{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xp(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===rl.RESOURCE_EXHAUSTED?(Xo(t.toString()),Xo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===rl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new il(rl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Qo(wp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Qo(wp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _p extends Ep{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:$o(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(tl(void 0===t||"string"==typeof t,58123),Bc.fromBase64String(t||"")):(tl(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Bc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?rl.UNKNOWN:gh(e.code);return new il(t,e.message||"")}(a);n=new jh(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=qh(e,r.document.name),s=Vh(r.document.updateTime),a=r.document.createTime?Vh(r.document.createTime):Fl.min(),o=new Su({mapValue:{fields:r.document.fields}}),l=ku.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kh(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=qh(e,r.document),s=r.readTime?Vh(r.readTime):Fl.min(),a=ku.newNoDocument(i,s),o=r.removedTargetIds||[];n=new kh([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=qh(e,r.document),s=r.removedTargetIds||[];n=new kh([],s,i,null)}else{if(!("filter"in t))return $o(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new hh(r,i),a=e.targetId;n=new Nh(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Fl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Fl.min():t.readTime?Vh(t.readTime):Fl.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Qh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=$u(r)?{documents:$h(e,r)}:{query:ef(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Fh(e,t.resumeToken);const r=Mh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Fl.min())>0){n.readTime=Uh(e,t.snapshotVersion.toTimestamp());const r=Mh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $o(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Qh(this.serializer),t.removeTarget=e,this.q_(t)}}class Sp extends Ep{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tl(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tl(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){tl(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(tl(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Vh(e.updateTime):Vh(t);return n.isEqual(Fl.min())&&(n=Vh(t)),new Gd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Vh(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Qh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Zh(this.serializer,e))};this.q_(t)}}class Cp{}class kp extends Cp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new il(rl.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,Hh(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===rl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new il(rl.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,Hh(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===rl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new il(rl.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Np{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Xo(t),this.aa=!1):Qo("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const jp="RemoteStore";class Tp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Up(this)&&(Qo(jp,"Restarting streams for network reachability change."),await async function(e){const t=nl(e);t.Ea.add(4),await Ap(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Ip(t)}(this))})}),this.Ra=new Np(n,r)}}async function Ip(e){if(Up(e))for(const t of e.da)await t(!0)}async function Ap(e){for(const t of e.da)await t(!1)}function Rp(e,t){const n=nl(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Mp(n)?Lp(n):rm(n).O_()&&Op(n,t))}function Pp(e,t){const n=nl(e),r=rm(n);n.Ia.delete(t),r.O_()&&Dp(n,t),0===n.Ia.size&&(r.O_()?r.L_():Up(n)&&n.Ra.set("Unknown"))}function Op(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rm(e).Y_(t)}function Dp(e,t){e.Va.Ue(t),rm(e).Z_(t)}function Lp(e){e.Va=new Ih({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),rm(e).start(),e.Ra.ua()}function Mp(e){return Up(e)&&!rm(e).x_()&&e.Ia.size>0}function Up(e){return 0===nl(e).Ea.size}function Fp(e){e.Va=void 0}async function Bp(e){e.Ra.set("Online")}async function Vp(e){e.Ia.forEach((t,n)=>{Op(e,t)})}async function zp(e,t){Fp(e),Mp(e)?(e.Ra.ha(t),Lp(e)):e.Ra.set("Unknown")}async function Hp(e,t,n){if(e.Ra.set("Online"),t instanceof jh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Qo(jp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Wp(e,n)}else if(t instanceof kh?e.Va.Ze(t):t instanceof Nh?e.Va.st(t):e.Va.tt(t),!n.isEqual(Fl.min()))try{const t=await Zf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Bc.EMPTY_BYTE_STRING,r.snapshotVersion)),Dp(e,t);const i=new hf(r.target,t,n,r.sequenceNumber);Op(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Qo(jp,"Failed to raise snapshot:",t),await Wp(e,t)}}async function Wp(e,t,n){if(!Jl(t))throw t;e.Ea.add(1),await Ap(e),e.Ra.set("Offline"),n||(n=()=>Zf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Qo(jp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Ip(e)})}function Kp(e,t){return t().catch(n=>Wp(e,n,t))}async function qp(e){const t=nl(e),n=im(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:$l;for(;Gp(t);)try{const e=await ep(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Yp(t,e)}catch(e){await Wp(t,e)}Qp(t)&&Xp(t)}function Gp(e){return Up(e)&&e.Ta.length<10}function Yp(e,t){e.Ta.push(t);const n=im(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Qp(e){return Up(e)&&!im(e).x_()&&e.Ta.length>0}function Xp(e){im(e).start()}async function Jp(e){im(e).ra()}async function Zp(e){const t=im(e);for(const n of e.Ta)t.ea(n.mutations)}async function $p(e,t,n){const r=e.Ta.shift(),i=uh.from(r,t,n);await Kp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await qp(e)}async function em(e,t){t&&im(e).X_&&await async function(e,t){if(function(e){return mh(e)&&e!==rl.ABORTED}(t.code)){const n=e.Ta.shift();im(e).B_(),await Kp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await qp(e)}}(e,t),Qp(e)&&Xp(e)}async function tm(e,t){const n=nl(e);n.asyncQueue.verifyOperationInProgress(),Qo(jp,"RemoteStore received new credentials");const r=Up(n);n.Ea.add(3),await Ap(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Ip(n)}async function nm(e,t){const n=nl(e);t?(n.Ea.delete(2),await Ip(n)):t||(n.Ea.add(2),await Ap(n),n.Ra.set("Unknown"))}function rm(e){return e.ma||(e.ma=function(e,t,n){const r=nl(e);return r.sa(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Bp.bind(null,e),t_:Vp.bind(null,e),r_:zp.bind(null,e),H_:Hp.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Mp(e)?Lp(e):e.Ra.set("Unknown")):(await e.ma.stop(),Fp(e))})),e.ma}function im(e){return e.fa||(e.fa=function(e,t,n){const r=nl(e);return r.sa(),new Sp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Jp.bind(null,e),r_:em.bind(null,e),ta:Zp.bind(null,e),na:$p.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await qp(e)):(await e.fa.stop(),e.Ta.length>0&&(Qo(jp,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class sm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new sm(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new il(rl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function am(e,t){if(Xo("AsyncQueue","".concat(t,": ").concat(e)),Jl(e))return new il(rl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class om{static emptySet(e){return new om(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Nl.comparator(t.key,n.key):(e,t)=>Nl.comparator(e.key,t.key),this.keyedMap=wd(),this.sortedSet=new Pc(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof om))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new om;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class lm{constructor(){this.ga=new Pc(Nl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$o(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class cm{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new cm(e,t,om.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class um{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dm{constructor(){this.queries=hm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=nl(e),r=n.queries;n.queries=hm(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new il(rl.ABORTED,"Firestore shutting down"))}}function hm(){return new yd(e=>dd(e),ud)}async function fm(e,t){const n=nl(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new um,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=am(e,"Initialization of query '".concat(hd(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&ym(n)}async function pm(e,t){const n=nl(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function mm(e,t){const n=nl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&ym(n)}function gm(e,t,n){const r=nl(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function ym(e){e.Ca.forEach(e=>{e.next()})}var vm,bm;(bm=vm||(vm={})).Ma="default",bm.Cache="cache";class xm{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new cm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}}class wm{constructor(e){this.key=e}}class Em{constructor(e){this.key=e}}class _m{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jd(),this.mutatedKeys=jd(),this.eu=md(e),this.tu=new om(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new lm,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=fd(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $o(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new cm(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jd(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Em(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new wm(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=jd();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Sm="SyncEngine";class Cm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class km{constructor(e){this.key=e,this.hu=!1}}class Nm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new yd(e=>dd(e),ud),this.Iu=new Map,this.Eu=new Set,this.du=new Pc(Nl.comparator),this.Au=new Map,this.Ru=new Df,this.Vu={},this.mu=new Map,this.fu=wf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function jm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Qm(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Im(r,t,n,!0),i}async function Tm(e,t){const n=Qm(e);await Im(n,t,!0,!1)}async function Im(e,t,n,r){const i=await tp(e.localStore,ad(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Am(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Rp(e.remoteStore,i),o}async function Am(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await rp(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Hm(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await rp(e.localStore,t,!0),a=new _m(t,s.Qs),o=a.ru(s.documents),l=Ch.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);Hm(e,n,c.au);const u=new Cm(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Rm(e,t,n){const r=nl(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!ud(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await np(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pp(r.remoteStore,i.targetId),Vm(r,i.targetId)}).catch(Yl)):(Vm(r,i.targetId),await np(r.localStore,i.targetId,!0))}async function Pm(e,t){const n=nl(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pp(n.remoteStore,r.targetId))}async function Om(e,t){const n=nl(e);try{const e=await function(e,t){const n=nl(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Bc.EMPTY_BYTE_STRING,Fl.min()).withLastLimboFreeSnapshotVersion(Fl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=bd(),l=jd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push($f(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Fl.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Ql.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(tl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?tl(r.hu,14607):e.removedDocuments.size>0&&(tl(r.hu,42227),r.hu=!1))}),await qm(n,e,t)}catch(e){await Yl(e)}}function Dm(e,t,n){const r=nl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=nl(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&ym(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lm(e,t,n){const r=nl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Pc(Nl.comparator);e=e.insert(s,ku.newNoDocument(s,Fl.min()));const n=jd().add(s),i=new Sh(Fl.min(),new Map,new Pc(gl),e,n);await Om(r,i),r.du=r.du.remove(s),r.Au.delete(t),Km(r)}else await np(r.localStore,t,!1).then(()=>Vm(r,t,n)).catch(Yl)}async function Mm(e,t){const n=nl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=nl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Ql.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);tl(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=jd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Bm(n,r,null),Fm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qm(n,e)}catch(e){await Yl(e)}}async function Um(e,t,n){const r=nl(e);try{const e=await function(e,t){const n=nl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(tl(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Bm(r,t,n),Fm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await qm(r,e)}catch(n){await Yl(n)}}function Fm(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Bm(e,t,n){const r=nl(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Vm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||zm(e,t)})}function zm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Pp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Km(e))}function Hm(e,t,n){for(const r of n)r instanceof wm?(e.Ru.addReference(r.key,t),Wm(e,r)):r instanceof Em?(Qo(Sm,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||zm(e,r.key)):$o(19791,{wu:r})}function Wm(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Qo(Sm,"New document in limbo: "+n),e.Eu.add(r),Km(e))}function Km(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Nl(Sl.fromString(t)),r=e.fu.next();e.Au.set(r,new km(n)),e.du=e.du.insert(n,r),Rp(e.remoteStore,new hf(ad(nd(n.path)),r,"TargetPurposeLimboResolution",Zl.ce))}}async function qm(e,t,n){const r=nl(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Kf.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=nl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ql.forEach(t,t=>Ql.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ql.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Jl(e))throw e;Qo(Yf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Gm(e,t){const n=nl(e);if(!n.currentUser.isEqual(t)){Qo(Sm,"User change. New user:",t.toKey());const e=await Jf(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new il(rl.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await qm(n,e.Ls)}}function Ym(e,t){const n=nl(e),r=n.Au.get(t);if(r&&r.hu)return jd().add(r.key);{let e=jd();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Qm(e){const t=nl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Om.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ym.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lm.bind(null,t),t.Pu.H_=mm.bind(null,t.eventManager),t.Pu.yu=gm.bind(null,t.eventManager),t}function Xm(e){const t=nl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Um.bind(null,t),t}class Jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Xf(this.persistence,new Gf,e.initialUser,this.serializer)}Cu(e){return new Vf(Hf.mi,this.serializer)}Du(e){return new ap}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jm.provider={build:()=>new Jm};class Zm extends Jm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tl(this.persistence.referenceDelegate instanceof Wf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new kf(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?xf.withCacheSize(this.cacheSizeBytes):xf.DEFAULT;return new Vf(e=>Wf.mi(e,t),this.serializer)}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gm.bind(null,this.syncEngine),await nm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new dm}createDatastore(e){const t=bp(e.databaseInfo.databaseId),n=function(e){return new yp(e)}(e.databaseInfo);return function(e,t,n,r){return new kp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Tp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Dm(this.syncEngine,e,0),cp.v()?new cp:new op)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Nm(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=nl(e);Qo(jp,"RemoteStore shutting down."),t.Ea.add(5),await Ap(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}$m.provider={build:()=>new $m};class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const tg="FirestoreClient";class ng{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ko.UNAUTHENTICATED,this.clientId=ml.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Qo(tg,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Qo(tg,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=am(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function rg(e,t){e.asyncQueue.verifyOperationInProgress(),Qo(tg,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Jf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ig(e,t){e.asyncQueue.verifyOperationInProgress();const n=await sg(e);Qo(tg,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>tm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>tm(t.remoteStore,n)),e._onlineComponents=t}async function sg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Qo(tg,"Using user provided OfflineComponentProvider");try{await rg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===rl.FAILED_PRECONDITION||e.code===rl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),await rg(e,new Jm)}}else Qo(tg,"Using default OfflineComponentProvider"),await rg(e,new Zm(void 0));return e._offlineComponents}async function ag(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Qo(tg,"Using user provided OnlineComponentProvider"),await ig(e,e._uninitializedComponentsProvider._online)):(Qo(tg,"Using default OnlineComponentProvider"),await ig(e,new $m))),e._onlineComponents}function og(e){return ag(e).then(e=>e.syncEngine)}async function lg(e){const t=await ag(e),n=t.eventManager;return n.onListen=jm.bind(null,t.syncEngine),n.onUnlisten=Rm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Tm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Pm.bind(null,t.syncEngine),n}function cg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new sl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new eg({next:o=>{s.Nu(),t.enqueueAndForget(()=>pm(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new il(rl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new il(rl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new xm(nd(n.path),s,{includeMetadataChanges:!0,qa:!0});return fm(e,a)}(await lg(e),e.asyncQueue,t,n,r)),r.promise}function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new sl;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new eg({next:n=>{s.Nu(),t.enqueueAndForget(()=>pm(e,a)),n.fromCache&&"server"===r.source?i.reject(new il(rl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new xm(n,s,{includeMetadataChanges:!0,qa:!0});return fm(e,a)}(await lg(e),e.asyncQueue,t,n,r)),r.promise}function dg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hg=new Map,fg="firestore.googleapis.com",pg=!0;class mg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new il(rl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fg,this.ssl=pg}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:pg;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=bf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<_f)throw new il(rl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new il(rl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new il(rl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new il(rl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new il(rl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new il(rl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new il(rl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ol;switch(e.type){case"firstParty":return new dl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new il(rl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hg.get(e);t&&(Qo("ComponentProvider","Removing Datastore"),hg.delete(e),t.terminate())}(this),Promise.resolve()}}class yg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yg(this.firestore,e,this._query)}}class vg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vg(this.firestore,e,this._key)}toJSON(){return{type:vg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Dl(t,vg._jsonSchema))return new vg(e,n||null,new Nl(Sl.fromString(t.referencePath)))}}vg._jsonSchemaVersion="firestore/documentReference/1.0",vg._jsonSchema={type:Ol("string",vg._jsonSchemaVersion),referencePath:Ol("string")};class bg extends yg{constructor(e,t,n){super(e,t,nd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vg(this.firestore,null,new Nl(e))}withConverter(e){return new bg(this.firestore,e,this._path)}}function xg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xn(e),jl("collection","path",t),e instanceof gg){const n=Sl.fromString(t,...r);return Il(n),new bg(e,null,n)}{if(!(e instanceof vg||e instanceof bg))throw new il(rl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sl.fromString(t,...r));return Il(n),new bg(e.firestore,null,n)}}function wg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xn(e),1===arguments.length&&(t=ml.newId()),jl("doc","path",t),e instanceof gg){const n=Sl.fromString(t,...r);return Tl(n),new vg(e,null,new Nl(n))}{if(!(e instanceof vg||e instanceof bg))throw new il(rl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Sl.fromString(t,...r));return Tl(n),new vg(e.firestore,e instanceof bg?e.converter:null,new Nl(n))}}const Eg="AsyncQueue";class _g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xp(this,"async_queue_retry"),this._c=()=>{const e=vp();e&&Qo(Eg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new sl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(bM){if(!Jl(bM))throw bM;Qo(Eg,"Operation failed with retryable error: "+bM)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Xo("INTERNAL UNHANDLED ERROR: ",Sg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=sm.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&$o(47125,{Pc:Sg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Sg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Cg extends gg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new _g,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _g(e),this._firestoreClient=void 0,await e}}}function kg(e){if(e._terminated)throw new il(rl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Ng(e),e._firestoreClient}function Ng(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Zc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,dg(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ng(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class jg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jg(Bc.fromBase64String(e))}catch(e){throw new il(rl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jg(Bc.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dl(e,jg._jsonSchema))return jg.fromBase64String(e.bytes)}}jg._jsonSchemaVersion="firestore/bytes/1.0",jg._jsonSchema={type:Ol("string",jg._jsonSchemaVersion),bytes:Ol("string")};class Tg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new il(rl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ig{constructor(e){this._methodName=e}}class Ag{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new il(rl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new il(rl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return gl(this._lat,e._lat)||gl(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ag._jsonSchemaVersion}}static fromJSON(e){if(Dl(e,Ag._jsonSchema))return new Ag(e.latitude,e.longitude)}}Ag._jsonSchemaVersion="firestore/geoPoint/1.0",Ag._jsonSchema={type:Ol("string",Ag._jsonSchemaVersion),latitude:Ol("number"),longitude:Ol("number")};class Rg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Rg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dl(e,Rg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Rg(e.vectorValues);throw new il(rl.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Rg._jsonSchemaVersion="firestore/vectorValue/1.0",Rg._jsonSchema={type:Ol("string",Rg._jsonSchemaVersion),vectorValues:Ol("object")};const Pg=/^__.*__$/;class Og{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new rh(e,this.data,this.fieldMask,t,this.fieldTransforms):new nh(e,this.data,t,this.fieldTransforms)}}class Dg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new rh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $o(40011,{Ac:e})}}class Mg{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Mg(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $g(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Lg(this.Ac)&&Pg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ug{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||bp(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mg({Ac:e,methodName:t,Dc:n,path:kl.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fg(e){const t=e._freezeSettings(),n=bp(e._databaseId);return new Ug(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Bg(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Qg("Data must be an object, but it was:",a,r);const o=Gg(r,a);let l,c;if(s.merge)l=new Uc(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Xg(t,r,n);if(!a.contains(i))throw new il(rl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ey(e,i)||e.push(i)}l=new Uc(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Og(new Su(o),l,c)}class Vg extends Ig{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vg}}class zg extends Ig{_toFieldTransform(e){return new qd(e.path,new Ud)}isEqual(e){return e instanceof zg}}function Hg(e,t,n,r){const i=e.Cc(1,t,n);Qg("Data must be an object, but it was:",i,r);const s=[],a=Su.empty();Ac(r,(e,r)=>{const o=Zg(t,e,n);r=xn(r);const l=i.yc(o);if(r instanceof Vg)s.push(o);else{const e=qg(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Uc(s);return new Dg(a,o,i.fieldTransforms)}function Wg(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[Xg(t,r,n)],l=[i];if(s.length%2!=0)throw new il(rl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)o.push(Xg(t,s[h])),l.push(s[h+1]);const c=[],u=Su.empty();for(let h=o.length-1;h>=0;--h)if(!ey(c,o[h])){const e=o[h];let t=l[h];t=xn(t);const n=a.yc(e);if(t instanceof Vg)c.push(e);else{const r=qg(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Uc(c);return new Dg(u,d,a.fieldTransforms)}function Kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qg(n,e.Cc(r?4:3,t))}function qg(e,t){if(Yg(e=xn(e)))return Qg("Unsupported field value:",t,e),Gg(e,t);if(e instanceof Ig)return function(e,t){if(!Lg(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qg(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=xn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Pd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ul.fromDate(e);return{timestampValue:Uh(t.serializer,n)}}if(e instanceof Ul){const n=new Ul(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Uh(t.serializer,n)}}if(e instanceof Ag)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jg)return{bytesValue:Fh(t.serializer,e._byteString)};if(e instanceof vg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:zh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Rg)return function(e,t){return{mapValue:{fields:{[tu]:{stringValue:iu},[su]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ad(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Rl(e)))}(e,t)}function Gg(e,t){const n={};return Rc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ac(e,(e,r)=>{const i=qg(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Yg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ul||e instanceof Ag||e instanceof jg||e instanceof vg||e instanceof Ig||e instanceof Rg)}function Qg(e,t,n){if(!Yg(n)||!Al(n)){const r=Rl(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Xg(e,t,n){if((t=xn(t))instanceof Tg)return t._internalPath;if("string"==typeof t)return Zg(e,t);throw $g("Field path arguments must be of type string or ",e,!1,void 0,n)}const Jg=new RegExp("[~\\*/\\[\\]]");function Zg(e,t,n){if(t.search(Jg)>=0)throw $g("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Tg(...t.split("."))._internalPath}catch(r){throw $g("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $g(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new il(rl.INVALID_ARGUMENT,o+e+l)}function ey(e,t){return e.some(e=>e.isEqual(t))}class ty{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ny(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ry("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ny extends ty{data(){return super.data()}}function ry(e,t){return"string"==typeof t?Zg(e,t):t instanceof Tg?t._internalPath:t._delegate._internalPath}function iy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new il(rl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sy{}class ay extends sy{}function oy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof sy&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof uy).length,n=e.filter(e=>e instanceof ly).length;if(t>1||t>0&&n>0)throw new il(rl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class ly extends ay{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ly(e,t,n)}_apply(e){const t=this._parse(e);return my(e._query,t),new yg(e.firestore,e.converter,ld(e._query,t))}_parse(e){const t=Fg(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new il(rl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){py(a,s);const t=[];for(const n of a)t.push(fy(r,e,n));o={arrayValue:{values:t}}}else o=fy(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||py(a,s),o=Kg(n,t,a,"in"===s||"not-in"===s);return Pu.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function cy(e,t,n){const r=t,i=ry("where",e);return ly._create(i,r,n)}class uy extends sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uy(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ou.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)my(n,i),n=ld(n,i)}(e._query,t),new yg(e.firestore,e.converter,ld(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dy extends ay{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new il(rl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new il(rl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Iu(t,n)}(e._query,this._field,this._direction);return new yg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ed(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function hy(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ry("orderBy",e);return dy._create(n,t)}function fy(e,t,n){if("string"==typeof(n=xn(n))){if(""===n)throw new il(rl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!id(t)&&-1!==n.indexOf("/"))throw new il(rl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Sl.fromString(n));if(!Nl.isDocumentKey(r))throw new il(rl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return mu(e,new Nl(r))}if(n instanceof vg)return mu(e,n._key);throw new il(rl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Rl(n),"."))}function py(e,t){if(!Array.isArray(e)||0===e.length)throw new il(rl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function my(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new il(rl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new il(rl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class gy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $o(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ac(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[su].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Hc(e.doubleValue));return new Rg(n)}convertGeoPoint(e){return new Ag(Hc(e.latitude),Hc(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Xc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const t=zc(e);return new Ul(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Sl.fromString(e);tl(df(n),9688,{name:e});const r=new eu(n.get(1),n.get(3)),i=new Nl(n.popFirst(5));return r.isEqual(t)||Xo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function yy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class by extends ty{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new xy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ry("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new il(rl.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=by._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}by._jsonSchemaVersion="firestore/documentSnapshot/1.0",by._jsonSchema={type:Ol("string",by._jsonSchemaVersion),bundleSource:Ol("string","DocumentSnapshot"),bundleName:Ol("string"),bundle:Ol("string")};class xy extends by{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class wy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new vy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new xy(this._firestore,this._userDataWriter,n.key,n,new vy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new il(rl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new xy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new vy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new xy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Ey(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new il(rl.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ml.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ey(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $o(61501,{type:e})}}function _y(e){e=Pl(e,vg);const t=Pl(e.firestore,Cg);return cg(kg(t),e._key).then(n=>Ay(t,e,n))}wy._jsonSchemaVersion="firestore/querySnapshot/1.0",wy._jsonSchema={type:Ol("string",wy._jsonSchemaVersion),bundleSource:Ol("string","QuerySnapshot"),bundleName:Ol("string"),bundle:Ol("string")};class Sy extends gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new jg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vg(this.firestore,null,t)}}function Cy(e){e=Pl(e,yg);const t=Pl(e.firestore,Cg),n=kg(t),r=new Sy(t);return iy(e._query),ug(n,e._query).then(n=>new wy(t,r,e,n))}function ky(e,t,n){e=Pl(e,vg);const r=Pl(e.firestore,Cg),i=yy(e.converter,t,n);return Iy(r,[Bg(Fg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Yd.none())])}function Ny(e,t,n){e=Pl(e,vg);const r=Pl(e.firestore,Cg),i=Fg(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=xn(t))||t instanceof Tg?Wg(i,"updateDoc",e._key,t,n,o):Hg(i,"updateDoc",e._key,t),Iy(r,[s.toMutation(e._key,Yd.exists(!0))])}function jy(e){return Iy(Pl(e.firestore,Cg),[new oh(e._key,Yd.none())])}function Ty(e,t){const n=Pl(e.firestore,Cg),r=wg(e),i=yy(e.converter,t);return Iy(n,[Bg(Fg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Yd.exists(!1))]).then(()=>r)}function Iy(e,t){return function(e,t){const n=new sl;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Xm(e);try{const e=await function(e,t){const n=nl(e),r=Ul.now(),i=t.reduce((e,t)=>e.add(t.key),jd());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=bd(),l=jd();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=eh(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new rh(e.key,t,Cu(t.value.mapValue),Yd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Ed(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Pc(gl)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await qm(r,e.changes),await qp(r.remoteStore)}catch(e){const t=am(e,"Failed to persist write");n.reject(t)}}(await og(e),t,n)),n.promise}(kg(e),t)}function Ay(e,t,n){const r=n.docs.get(t._key),i=new Sy(e);return new by(e,i,t._key,r,new vy(n.hasPendingWrites,n.fromCache),t.converter)}function Ry(){return new zg("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){qo=e}(Dr),Ir(new wn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Cg(new cl(e.getProvider("auth-internal")),new fl(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new il(rl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ur(Ho,Wo,e),Ur(Ho,Wo,"esm2020")}();Ur("firebase","12.3.0","app");const Py="firebasestorage.googleapis.com",Oy="storageBucket";class Dy extends un{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Uy(e),"Firebase Storage: ".concat(t," (").concat(Uy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Uy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ly,My;function Uy(e){return"storage/"+e}function Fy(){return new Dy(Ly.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function By(){return new Dy(Ly.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vy(){return new Dy(Ly.CANCELED,"User canceled the upload/download.")}function zy(){return new Dy(Ly.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hy(e){return new Dy(Ly.INVALID_ARGUMENT,e)}function Wy(){return new Dy(Ly.APP_DELETED,"The Firebase app was deleted.")}function Ky(e,t){return new Dy(Ly.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function qy(e){throw new Dy(Ly.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ly||(Ly={}));class Gy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Gy.makeFromUrl(e,t)}catch(bM){return new Gy(e,"")}if(""===n.path)return n;throw r=e,new Dy(Ly.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Py?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Gy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Dy(Ly.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Yy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Qy(e){return"string"===typeof e||e instanceof String}function Xy(e){return Jy()&&e instanceof Blob}function Jy(){return"undefined"!==typeof Blob}function Zy(e,t,n,r){if(r<t)throw Hy("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Hy("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function $y(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function ev(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function tv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(My||(My={}));class nv{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new rv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===My.NO_ERROR,i=n.getStatus();if(!t||tv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===My.ABORT;return void e(!1,new rv(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new rv(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(bM){r(bM)}else if(null!==i){const e=Fy();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Wy():Vy())}else{r(By())}};this.canceled_?t(0,new rv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class rv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function iv(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sv(){const e=iv();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Jy())return new Blob(n);throw new Dy(Ly.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function av(e){if("undefined"===typeof atob)throw t="base-64",new Dy(Ly.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const ov="raw",lv="base64",cv="base64url",uv="data_url";class dv{constructor(e,t){this.data=e,this.contentType=t||null}}function hv(e,t){switch(e){case ov:return new dv(fv(t));case lv:case cv:return new dv(pv(e,t));case uv:return new dv(function(e){const t=new mv(e);return t.base64?pv(lv,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(bM){throw Ky(uv,"Malformed data URL.")}return fv(t)}(t.rest)}(t),new mv(t).contentType)}throw Fy()}function fv(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function pv(e,t){switch(e){case lv:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Ky(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case cv:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Ky(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=av(t)}catch(bM){if(bM.message.includes("polyfill"))throw bM;throw Ky(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class mv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ky(uv,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class gv{constructor(e,t){let n=0,r="";Xy(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Xy(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new gv(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new gv(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Jy()){const e=t.map(e=>e instanceof gv?e.data_:e);return new gv(sv.apply(null,e))}{const e=t.map(e=>Qy(e)?hv(ov,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new gv(r,!0)}}uploadData(){return this.data_}}function yv(e){let t;try{t=JSON.parse(e)}catch(bM){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function vv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function bv(e,t){return t}class xv{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||bv}}let wv=null;function Ev(){if(wv)return wv;const e=[];e.push(new xv("bucket")),e.push(new xv("generation")),e.push(new xv("metageneration")),e.push(new xv("name","fullPath",!0));const t=new xv("name");t.xform=function(e,t){return function(e){return!Qy(e)||e.length<2?e:vv(e)}(t)},e.push(t);const n=new xv("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new xv("timeCreated")),e.push(new xv("updated")),e.push(new xv("md5Hash",null,!0)),e.push(new xv("cacheControl",null,!0)),e.push(new xv("contentDisposition",null,!0)),e.push(new xv("contentEncoding",null,!0)),e.push(new xv("contentLanguage",null,!0)),e.push(new xv("contentType",null,!0)),e.push(new xv("metadata","customMetadata",!0)),wv=e,wv}function _v(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Gy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Sv(e,t,n){const r=yv(t);if(null===r)return null;return _v(e,r,n)}function Cv(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class kv{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Nv(e){if(!e)throw Fy()}function jv(e,t){return function(n,r){const i=Sv(e,r,t);return Nv(null!==i),i}}function Tv(e,t){return function(n,r){const i=Sv(e,r,t);return Nv(null!==i),function(e,t,n,r){const i=yv(t);if(null===i)return null;if(!Qy(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return $y("/b/"+a(i)+"/o/"+a(s),n,r)+ev({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Iv(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Dy(Ly.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Dy(Ly.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Dy(Ly.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Dy(Ly.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Av(e){const t=Iv(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Dy(Ly.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Rv(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Pv(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Rv(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Cv(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=gv.getBlob(c,r,u);if(null===d)throw zy();const h={name:l.fullPath},f=$y(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new kv(f,"POST",jv(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Iv(t),m}class Ov{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=My.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=My.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=My.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw qy("cannot .send() more than once");if($t(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(bM){return-1}}getResponse(){if(!this.sent_)throw qy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Dv extends Ov{initXhr(){this.xhr_.responseType="text"}}function Lv(){return new Dv}class Mv{constructor(e,t){this._service=e,this._location=t instanceof Gy?t:Gy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mv(e,t)}get root(){const e=new Gy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Gy(this._location.bucket,e);return new Mv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Dy(Ly.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Uv(e,t,n){e._throwIfRoot("uploadBytes");const r=Pv(e.storage,e._location,Ev(),new gv(t,!0),n);return e.storage.makeRequestWithTokens(r,Lv).then(t=>({metadata:t,ref:e}))}function Fv(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=$y(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new kv(r,"GET",Tv(e,n),i);return s.errorHandler=Av(t),s}(e.storage,e._location,Ev());return e.storage.makeRequestWithTokens(t,Lv).then(e=>{if(null===e)throw new Dy(Ly.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function Bv(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Gy(e._location.bucket,n);return new Mv(e.storage,r)}function Vv(e,t){if(e instanceof Wv){const n=e;if(null==n._bucket)throw new Dy(Ly.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Oy+"' property when initializing the app?");const r=new Mv(n,n._bucket);return null!=t?Vv(r,t):r}return void 0!==t?Bv(e,t):e}function zv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Wv)return new Mv(e,t);throw Hy("To use ref(service, url), the first argument must be a Storage instance.")}return Vv(e,t)}function Hv(e,t){const n=null===t||void 0===t?void 0:t[Oy];return null==n?null:Gy.makeFromBucketSpec(n,e)}class Wv{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Py,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Gy.makeFromBucketSpec(r,this._host):Hv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Gy.makeFromBucketSpec(this._url,e):this._bucket=Hv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mv(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Yy(Wy());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=ev(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new nv(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Kv="@firebase/storage",qv="0.14.0",Gv="storage";function Yv(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Wv(r,i,s,n,Dr)}Ir(new wn(Gv,Yv,"PUBLIC").setMultipleInstances(!0)),Ur(Kv,qv,""),Ur(Kv,qv,"esm2020");const Qv=Lr({apiKey:"AIzaSyC0jav3haxtGN2-_Fft5hadA5PoBHermxw",authDomain:"legiontracker-df41c.firebaseapp.com",projectId:"legiontracker-df41c",storageBucket:"legiontracker-df41c.firebasestorage.app",messagingSenderId:"345035004111",appId:"1:345035004111:web:5bda8bdeccc39b590fbfba"}),Xv=function(e,t){const n="object"==typeof e?e:Mr(),r="string"==typeof e?e:t||$c,i=Ar(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Qt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Pl(e,gg);const i=$t(t),s=e._getSettings(),a=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(en("https://".concat(o)),sn("Firestore",!0)),s.host!==fg&&s.host!==o&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:o,ssl:i,emulatorOptions:r});if(!fn(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ko.MOCK_USER;else{var u;t=tn(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new il(rl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ko(i)}e._authCredentials=new ll(new al(t,n))}}(i,...e)}return i}(Qv),Jv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr();const t=Ar(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ar(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(fn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ri(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wo,persistence:[Ia,ua,ma]}),r=Jt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Co)return;const r=null===t||void 0===t?void 0:t.token;ko!==r&&(ko=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){xn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){xn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=Yt("auth");return s&&Ss(n,"http://".concat(s)),n}(Qv),Zv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr(),t=arguments.length>1?arguments[1]:void 0;e=xn(e);const n=Ar(e,Gv).getImmediate({identifier:t}),r=Qt("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=$t(t);i&&(en("https://".concat(e.host,"/b")),sn("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:tn(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Qv),$v=(0,e.createContext)(),eb=()=>(0,e.useContext)($v),tb=t=>{let{children:n}=t;const[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!0),[u,d]=(0,e.useState)(""),h=(0,e.useCallback)(async(e,t,n)=>{try{d(""),console.log("Creating auth user...");const r=await async function(e,t,n){if(Rr(e.app))return Promise.reject(ai(e));const r=hs(e),i=Es(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qs,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ra(e),t}),a=await Gs._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(Jv,e,t);console.log("Updating auth profile..."),await ia(r.user,{displayName:n||e.split("@")[0]}),console.log("Creating Firestore user document...");const i={email:e,displayName:n||e.split("@")[0],createdAt:Ry(),lastLogin:Ry()};return await ky(wg(Xv,"users",r.user.uid),i),console.log("User document created successfully"),r.user}catch(r){throw console.error("Error during signup:",r),d(r.message),r}},[]),f=(0,e.useCallback)(async(e,t)=>{try{d("");const n=await function(e,t,n){return Rr(e.app)?Promise.reject(ai(e)):ea(xn(e),Fs.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ra(e),t})}(Jv,e,t),r=wg(Xv,"users",n.user.uid);return await ky(r,{lastLogin:Ry()},{merge:!0}),n.user}catch(n){throw console.error("Error during login:",n),d(n.message),n}},[]),p=(0,e.useCallback)(()=>function(e){return xn(e).signOut()}(Jv).catch(e=>{console.error("Logout error:",e),d(e.message)}),[]),m=(0,e.useCallback)(e=>async function(e,t,n){const r=hs(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&na(r,i,n),await Es(r,i,"getOobCode",As,"EMAIL_PASSWORD_PROVIDER")}(Jv,e).catch(e=>{throw console.error("Reset password error:",e),d(e.message),e}),[]),g=(0,e.useCallback)(async e=>{try{console.log("Fetching user profile for:",e);const t=wg(Xv,"users",e),n=await _y(t);if(n.exists())console.log("User profile found:",n.data()),a(n.data());else if(console.log("No user profile found - creating one"),Jv.currentUser){const e={email:Jv.currentUser.email,displayName:Jv.currentUser.displayName||Jv.currentUser.email.split("@")[0],createdAt:Ry(),lastLogin:Ry()};await ky(t,e),a(e),console.log("Created basic profile successfully")}}catch(t){console.error("Error fetching user profile:",t),d("Error fetching user profile: "+t.message)}},[]),y=(0,e.useCallback)(async e=>{try{if(!Jv.currentUser)return!1;const t=wg(Xv,"users",Jv.currentUser.uid);return await ky(t,c(c({},e),{},{updatedAt:Ry()}),{merge:!0}),e.displayName&&await ia(Jv.currentUser,{displayName:e.displayName}),await g(Jv.currentUser.uid),!0}catch(t){return console.error("Error updating user profile:",t),d("Error updating user profile: "+t.message),!1}},[g]);(0,e.useEffect)(()=>{console.log("Setting up auth state observer"),l(!0);const e=function(e,t,n,r){return xn(e).onAuthStateChanged(t,n,r)}(Jv,async e=>{console.log("Auth state changed:",e?"User ".concat(e.uid):"No user");try{i(e),e?await g(e.uid):a(null)}catch(t){console.error("Error during auth state change handling:",t)}finally{l(!1)}});return()=>{console.log("Cleaning up auth state observer"),e()}},[g]);const v={currentUser:r,userProfile:s,loading:o,error:u,signup:h,login:f,logout:p,resetPassword:m,updateUserProfile:y};return(0,jt.jsx)($v.Provider,{value:v,children:n})},nb=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},rb=e.createContext(null);function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ib.apply(null,arguments)}n(740);function sb(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ab(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ob(t,n){return Object.keys(n).reduce(function(i,s){var a,o=i,l=o[sb(s)],c=o[s],u=r(o,[sb(s),s].map(ab)),d=n[s],h=function(t,n,r){var i=(0,e.useRef)(void 0!==t),s=(0,e.useState)(n),a=s[0],o=s[1],l=void 0!==t,c=i.current;return i.current=l,!l&&c&&a!==n&&o(n),[l?t:a,(0,e.useCallback)(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),o(e)},[r])]}(c,l,t[d]),f=h[0],p=h[1];return ib({},u,((a={})[s]=f,a[d]=p,a))},t)}function lb(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function cb(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function ub(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}lb.__suppressDeprecationWarning=!0,cb.__suppressDeprecationWarning=!0,ub.__suppressDeprecationWarning=!0;const db=["bsPrefix","className","as"],hb=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s}=e,a=i(e,db);n=Ot(n,"navbar-brand");const o=s||(a.href?"a":"span");return(0,jt.jsx)(o,c(c({},a),{},{ref:t,className:Nt()(r,n)}))});hb.displayName="NavbarBrand";const fb=hb;function pb(e){return e&&e.ownerDocument||document}function mb(e,t){return function(e){var t=pb(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var gb=/([A-Z])/g;var yb=/^ms-/;function vb(e){return function(e){return e.replace(gb,"-$1").toLowerCase()}(e).replace(yb,"-ms-")}var bb=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const xb=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(vb(t))||mb(e).getPropertyValue(vb(t));Object.keys(t).forEach(function(i){var s=t[i];s||0===s?!function(e){return!(!e||!bb.test(e))}(i)?n+=vb(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(vb(i))}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function wb(e,t){return wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wb(e,t)}var Eb=n(950);const _b=!1,Sb=e.createContext(null);var Cb="unmounted",kb="exited",Nb="entering",jb="entered",Tb="exiting",Ib=function(t){var n,i;function s(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=kb,r.appearStatus=Nb):i=jb:i=e.unmountOnExit||e.mountOnEnter?Cb:kb,r.state={status:i},r.nextCallback=null,r}i=t,(n=s).prototype=Object.create(i.prototype),n.prototype.constructor=n,wb(n,i),s.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Cb?{status:kb}:null};var a=s.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Nb&&n!==jb&&(t=Nb):n!==Nb&&n!==jb||(t=Tb)}this.updateStatus(!1,t)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},a.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Nb){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Eb.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===kb&&this.setState({status:Cb})},a.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Eb.findDOMNode(this),r],s=i[0],a=i[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||_b?this.safeSetState({status:jb},function(){t.props.onEntered(s)}):(this.props.onEnter(s,a),this.safeSetState({status:Nb},function(){t.props.onEntering(s,a),t.onTransitionEnd(l,function(){t.safeSetState({status:jb},function(){t.props.onEntered(s,a)})})}))},a.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Eb.findDOMNode(this);t&&!_b?(this.props.onExit(r),this.safeSetState({status:Tb},function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,function(){e.safeSetState({status:kb},function(){e.props.onExited(r)})})})):this.safeSetState({status:kb},function(){e.props.onExited(r)})},a.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},a.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},a.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Eb.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},a.render=function(){var t=this.state.status;if(t===Cb)return null;var n=this.props,i=n.children,s=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,r(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Sb.Provider,{value:null},"function"===typeof i?i(t,s):e.cloneElement(e.Children.only(i),s))},s}(e.Component);function Ab(){}Ib.contextType=Sb,Ib.propTypes={},Ib.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ab,onEntering:Ab,onEntered:Ab,onExit:Ab,onExiting:Ab,onExited:Ab},Ib.UNMOUNTED=Cb,Ib.EXITED=kb,Ib.ENTERING=Nb,Ib.ENTERED=jb,Ib.EXITING=Tb;const Rb=Ib;function Pb(t){if(!t||"function"===typeof t)return null;const{major:n}=function(){const t=e.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}();return n>=19?t.props.ref:t.ref}const Ob=!("undefined"===typeof window||!window.document||!window.document.createElement);var Db=!1,Lb=!1;try{var Mb={get passive(){return Db=!0},get once(){return Lb=Db=!0}};Ob&&(window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,!0))}catch(bM){}const Ub=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Lb){var i=r.once,s=r.capture,a=n;!Lb&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=a),e.addEventListener(t,a,Db?r:s)}e.addEventListener(t,n,r)};const Fb=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const Bb=function(e,t,n,r){return Ub(e,t,n,r),function(){Fb(e,t,n,r)}};function Vb(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout(function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)},t+n),s=Bb(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function zb(e,t,n,r){null==n&&(n=function(e){var t=xb(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Vb(e,n,r),s=Bb(e,"transitionend",t);return function(){i(),s()}}function Hb(e,t){const n=xb(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function Wb(e,t){const n=Hb(e,"transitionDuration"),r=Hb(e,"transitionDelay"),i=zb(e,n=>{n.target===e&&(i(),t(n))},n+r)}const Kb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(e=>null!=e).reduce((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}},null)};function qb(e){e.offsetHeight}const Gb=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Yb=function(t,n){return(0,e.useMemo)(()=>function(e,t){const n=Gb(e),r=Gb(t);return e=>{n&&n(e),r&&r(e)}}(t,n),[t,n])};const Qb=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],Xb=e.forwardRef((t,n)=>{let{onEnter:r,onEntering:s,onEntered:a,onExit:o,onExiting:l,onExited:u,addEndListener:d,children:h,childRef:f}=t,p=i(t,Qb);const m=(0,e.useRef)(null),g=Yb(m,f),y=e=>{var t;g((t=e)&&"setState"in t?Eb.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&m.current&&e(m.current,t)},b=(0,e.useCallback)(v(r),[r]),x=(0,e.useCallback)(v(s),[s]),w=(0,e.useCallback)(v(a),[a]),E=(0,e.useCallback)(v(o),[o]),_=(0,e.useCallback)(v(l),[l]),S=(0,e.useCallback)(v(u),[u]),C=(0,e.useCallback)(v(d),[d]);return(0,jt.jsx)(Rb,c(c({ref:n},p),{},{onEnter:b,onEntered:w,onEntering:x,onExit:E,onExited:S,onExiting:_,addEndListener:C,nodeRef:m,children:"function"===typeof h?(e,t)=>h(e,c(c({},t),{},{ref:y})):e.cloneElement(h,{ref:y})}))});Xb.displayName="TransitionWrapper";const Jb=Xb,Zb=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","in","timeout","mountOnEnter","unmountOnExit","appear","getDimensionValue"],$b={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ex(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=$b[e];return n+parseInt(xb(t,r[0]),10)+parseInt(xb(t,r[1]),10)}const tx={[kb]:"collapse",[Tb]:"collapsing",[Nb]:"collapsing",[jb]:"collapse show"},nx=e.forwardRef((t,n)=>{let{onEnter:r,onEntering:s,onEntered:a,onExit:o,onExiting:l,className:u,children:d,dimension:h="height",in:f=!1,timeout:p=300,mountOnEnter:m=!1,unmountOnExit:g=!1,appear:y=!1,getDimensionValue:v=ex}=t,b=i(t,Zb);const x="function"===typeof h?h():h,w=(0,e.useMemo)(()=>Kb(e=>{e.style[x]="0"},r),[x,r]),E=(0,e.useMemo)(()=>Kb(e=>{const t="scroll".concat(x[0].toUpperCase()).concat(x.slice(1));e.style[x]="".concat(e[t],"px")},s),[x,s]),_=(0,e.useMemo)(()=>Kb(e=>{e.style[x]=null},a),[x,a]),S=(0,e.useMemo)(()=>Kb(e=>{e.style[x]="".concat(v(x,e),"px"),qb(e)},o),[o,v,x]),C=(0,e.useMemo)(()=>Kb(e=>{e.style[x]=null},l),[x,l]);return(0,jt.jsx)(Jb,c(c({ref:n,addEndListener:Wb},b),{},{"aria-expanded":b.role?f:null,onEnter:w,onEntering:E,onEntered:_,onExit:S,onExiting:C,childRef:Pb(d),in:f,timeout:p,mountOnEnter:m,unmountOnExit:g,appear:y,children:(t,n)=>e.cloneElement(d,c(c({},n),{},{className:Nt()(u,d.props.className,tx[t],"width"===x&&"collapse-horizontal")}))}))});nx.displayName="Collapse";const rx=nx,ix=e.createContext(null);ix.displayName="NavbarContext";const sx=ix,ax=["children","bsPrefix"],ox=e.forwardRef((t,n)=>{let{children:r,bsPrefix:s}=t,a=i(t,ax);s=Ot(s,"navbar-collapse");const o=(0,e.useContext)(sx);return(0,jt.jsx)(rx,c(c({in:!(!o||!o.expanded)},a),{},{children:(0,jt.jsx)("div",{ref:n,className:s,children:r})}))});ox.displayName="NavbarCollapse";const lx=ox;const cx=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function ux(t){const n=cx(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}const dx=["bsPrefix","className","children","label","as","onClick"],hx=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:a,label:o="Toggle navigation",as:l="button",onClick:u}=t,d=i(t,dx);r=Ot(r,"navbar-toggler");const{onToggle:h,expanded:f}=(0,e.useContext)(sx)||{},p=ux(e=>{u&&u(e),h&&h()});return"button"===l&&(d.type="button"),(0,jt.jsx)(l,c(c({},d),{},{ref:n,onClick:p,"aria-label":o,className:Nt()(s,r,!f&&"collapsed"),children:a||(0,jt.jsx)("span",{className:"".concat(r,"-icon")})}))});hx.displayName="NavbarToggle";const fx=hx,px="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,mx="undefined"!==typeof document||px?e.useLayoutEffect:e.useEffect,gx=new WeakMap,yx=(e,t)=>{if(!e||!t)return;const n=gx.get(t)||new Map;gx.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function vx(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=yx(t,n),[i,s]=(0,e.useState)(()=>!!r&&r.matches);return mx(()=>{let e=yx(t,n);if(!e)return s(!1);let r=gx.get(n);const i=()=>{s(e.matches)};return e.refCount++,e.addListener(i),i(),()=>{e.removeListener(i),e.refCount--,e.refCount<=0&&(null==r||r.delete(e.media)),e=void 0}},[t]),i}const bx=function(t){const n=Object.keys(t);function r(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(e){const r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(e);let i=t[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(n,s,a){let o;"object"===typeof n?(o=n,a=s,s=!0):(s=s||!0,o={[n]:s});let l=(0,e.useMemo)(()=>Object.entries(o).reduce((e,n)=>{let[s,a]=n;return"up"!==a&&!0!==a||(e=r(e,function(e){let n=t[e];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(s))),"down"!==a&&!0!==a||(e=r(e,i(s))),e},""),[JSON.stringify(o)]);return vx(l,a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),xx=bx;function wx(e){void 0===e&&(e=pb());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(bM){return e.body}}function Ex(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function _x(){const t=(0,e.useRef)(!0),n=(0,e.useRef)(()=>t.current);return(0,e.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),n.current}function Sx(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}function Cx(t){const n=(0,e.useRef)(null);return(0,e.useEffect)(()=>{n.current=t}),n.current}const kx=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)(()=>{n.current=t},[t]),n};function Nx(t){const n=kx(t);return(0,e.useCallback)(function(){return n.current&&n.current(...arguments)},[n])}function jx(e){return"".concat("data-rr-ui-").concat(e)}const Tx=jx("modal-open");const Ix=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(xb(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Tx,""),xb(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Tx),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Ax=(0,e.createContext)(Ob?window:void 0);Ax.Provider;function Rx(){return(0,e.useContext)(Ax)}const Px=(e,t)=>Ob?null==e?(t||pb()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const Ox=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const Dx=function(t,n){return(0,e.useMemo)(()=>function(e,t){const n=Ox(e),r=Ox(t);return e=>{n&&n(e),r&&r(e)}}(t,n),[t,n])},Lx="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Mx="undefined"!==typeof document||Lx?e.useLayoutEffect:e.useEffect;const Ux=function(t){let{children:n,in:r,onExited:i,mountOnEnter:s,unmountOnExit:a}=t;const o=(0,e.useRef)(null),l=(0,e.useRef)(r),c=Nx(i);(0,e.useEffect)(()=>{r?l.current=!0:c(o.current)},[r,c]);const u=Dx(o,Pb(n)),d=(0,e.cloneElement)(n,{ref:u});return r?d:a||!l.current&&s?null:d},Fx=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const Bx=["component"];const Vx=e.forwardRef((t,n)=>{let{component:r}=t;const i=function(t){let{onEnter:n,onEntering:r,onEntered:i,onExit:s,onExiting:a,onExited:o,addEndListener:l,children:c}=t,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,Fx);const d=(0,e.useRef)(null),h=Dx(d,Pb(c)),f=e=>t=>{e&&d.current&&e(d.current,t)},p=(0,e.useCallback)(f(n),[n]),m=(0,e.useCallback)(f(r),[r]),g=(0,e.useCallback)(f(i),[i]),y=(0,e.useCallback)(f(s),[s]),v=(0,e.useCallback)(f(a),[a]),b=(0,e.useCallback)(f(o),[o]),x=(0,e.useCallback)(f(l),[l]);return Object.assign({},u,{nodeRef:d},n&&{onEnter:p},r&&{onEntering:m},i&&{onEntered:g},s&&{onExit:y},a&&{onExiting:v},o&&{onExited:b},l&&{addEndListener:x},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:h})):(0,e.cloneElement)(c,{ref:h})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,Bx));return(0,jt.jsx)(r,Object.assign({ref:n},i))}),zx=Vx;function Hx(t){let{children:n,in:r,onExited:i,onEntered:s,transition:a}=t;const[o,l]=(0,e.useState)(!r);r&&o&&l(!1);const c=function(t){let{in:n,onTransition:r}=t;const i=(0,e.useRef)(null),s=(0,e.useRef)(!0),a=Nx(r);return Mx(()=>{if(!i.current)return;let e=!1;return a({in:n,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}},[n,a]),Mx(()=>(s.current=!1,()=>{s.current=!0}),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(a(e)).then(()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))},t=>{throw e.in||l(!0),t})}}),u=Dx(c,Pb(n));return o&&!r?null:(0,e.cloneElement)(n,{ref:u})}function Wx(e,t,n){return e?(0,jt.jsx)(zx,Object.assign({},n,{component:e})):t?(0,jt.jsx)(Hx,Object.assign({},n,{transition:t})):(0,jt.jsx)(Ux,Object.assign({},n))}const Kx=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let qx;function Gx(t){const n=Rx(),r=t||function(e){return qx||(qx=new Ix({ownerDocument:null==e?void 0:e.document})),qx}(n),i=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,e.useCallback)(e=>{i.current.dialog=e},[]),setBackdropRef:(0,e.useCallback)(e=>{i.current.backdrop=e},[])})}const Yx=(0,e.forwardRef)((t,n)=>{let{show:r=!1,role:i="dialog",className:s,style:a,children:o,backdrop:l=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:d,transition:h,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:v=!0,restoreFocusOptions:b,renderDialog:x,renderBackdrop:w=e=>(0,jt.jsx)("div",Object.assign({},e)),manager:E,container:_,onShow:S,onHide:C=()=>{},onExit:k,onExited:N,onExiting:j,onEnter:T,onEntering:I,onEntered:A}=t,R=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,Kx);const P=Rx(),O=function(t,n){const r=Rx(),[i,s]=(0,e.useState)(()=>Px(t,null==r?void 0:r.document));if(!i){const e=Px(t);e&&s(e)}return(0,e.useEffect)(()=>{n&&i&&n(i)},[n,i]),(0,e.useEffect)(()=>{const e=Px(t);e!==i&&s(e)},[t,i]),i}(_),D=Gx(E),L=_x(),M=Cx(r),[U,F]=(0,e.useState)(!r),B=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,()=>D,[D]),Ob&&!M&&r&&(B.current=wx(null==P?void 0:P.document)),r&&U&&F(!1);const V=Nx(()=>{if(D.add(),G.current=Bb(document,"keydown",K),q.current=Bb(document,"focus",()=>setTimeout(H),!0),S&&S(),g){var e,t;const n=wx(null!=(e=null==(t=D.dialog)?void 0:t.ownerDocument)?e:null==P?void 0:P.document);D.dialog&&n&&!Ex(D.dialog,n)&&(B.current=n,D.dialog.focus())}}),z=Nx(()=>{var e;(D.remove(),null==G.current||G.current(),null==q.current||q.current(),v)&&(null==(e=B.current)||null==e.focus||e.focus(b),B.current=null)});(0,e.useEffect)(()=>{r&&O&&V()},[r,O,V]),(0,e.useEffect)(()=>{U&&z()},[U,z]),Sx(()=>{z()});const H=Nx(()=>{if(!y||!L()||!D.isTopModal())return;const e=wx(null==P?void 0:P.document);D.dialog&&e&&!Ex(D.dialog,e)&&D.dialog.focus()}),W=Nx(e=>{e.target===e.currentTarget&&(null==u||u(e),!0===l&&C())}),K=Nx(e=>{c&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&D.isTopModal()&&(null==d||d(e),e.defaultPrevented||C())}),q=(0,e.useRef)(),G=(0,e.useRef)();if(!O)return null;const Y=Object.assign({role:i,ref:D.setDialogRef,"aria-modal":"dialog"===i||void 0},R,{style:a,className:s,tabIndex:-1});let Q=x?x(Y):(0,jt.jsx)("div",Object.assign({},Y,{children:e.cloneElement(o,{role:"document"})}));Q=Wx(h,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:k,onExiting:j,onExited:function(){F(!0),null==N||N(...arguments)},onEnter:T,onEntering:I,onEntered:A,children:Q});let X=null;return l&&(X=w({ref:D.setBackdropRef,onClick:W}),X=Wx(p,m,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,jt.jsx)(jt.Fragment,{children:Eb.createPortal((0,jt.jsxs)(jt.Fragment,{children:[X,Q]}),O)})});Yx.displayName="Modal";const Qx=Object.assign(Yx,{Manager:Ix}),Xx=["className","children","transitionClasses","onEnter"],Jx={[Nb]:"show",[jb]:"show"},Zx=e.forwardRef((t,n)=>{let{className:r,children:s,transitionClasses:a={},onEnter:o}=t;const l=c({in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},i(t,Xx)),u=(0,e.useCallback)((e,t)=>{qb(e),null==o||o(e,t)},[o]);return(0,jt.jsx)(Jb,c(c({ref:n,addEndListener:Wb},l),{},{onEnter:u,childRef:Pb(s),children:(t,n)=>e.cloneElement(s,c(c({},n),{},{className:Nt()("fade",r,s.props.className,Jx[t],a[t])}))}))});Zx.displayName="Fade";const $x=Zx,ew=["className","bsPrefix","as"],tw=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,ew);return r=Ot(r,"offcanvas-body"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});tw.displayName="OffcanvasBody";const nw=tw,rw=["bsPrefix","className","children","in","mountOnEnter","unmountOnExit","appear"],iw={[Nb]:"show",[jb]:"show"},sw=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:a,in:o=!1,mountOnEnter:l=!1,unmountOnExit:u=!1,appear:d=!1}=t,h=i(t,rw);return r=Ot(r,"offcanvas"),(0,jt.jsx)(Jb,c(c({ref:n,addEndListener:Wb,in:o,mountOnEnter:l,unmountOnExit:u,appear:d},h),{},{childRef:Pb(a),children:(t,n)=>e.cloneElement(a,c(c({},n),{},{className:Nt()(s,a.props.className,(t===Nb||t===Tb)&&"".concat(r,"-toggling"),iw[t])}))}))});sw.displayName="OffcanvasToggling";const aw=sw,ow=e.createContext({onHide(){}});var lw=n(173),cw=n.n(lw);const uw=["className","variant","aria-label"],dw={"aria-label":cw().string,onClick:cw().func,variant:cw().oneOf(["white"])},hw=e.forwardRef((e,t)=>{let{className:n,variant:r,"aria-label":s="Close"}=e,a=i(e,uw);return(0,jt.jsx)("button",c({ref:t,type:"button",className:Nt()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":s},a))});hw.displayName="CloseButton",hw.propTypes=dw;const fw=hw,pw=["closeLabel","closeVariant","closeButton","onHide","children"],mw=e.forwardRef((t,n)=>{let{closeLabel:r="Close",closeVariant:s,closeButton:a=!1,onHide:o,children:l}=t,u=i(t,pw);const d=(0,e.useContext)(ow),h=ux(()=>{null==d||d.onHide(),null==o||o()});return(0,jt.jsxs)("div",c(c({ref:n},u),{},{children:[l,a&&(0,jt.jsx)(fw,{"aria-label":r,variant:s,onClick:h})]}))});mw.displayName="AbstractModalHeader";const gw=mw,yw=["bsPrefix","className","closeLabel","closeButton"],vw=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:a=!1}=e,o=i(e,yw);return n=Ot(n,"offcanvas-header"),(0,jt.jsx)(gw,c(c({ref:t},o),{},{className:Nt()(r,n),closeLabel:s,closeButton:a}))});vw.displayName="OffcanvasHeader";const bw=vw,xw=t=>e.forwardRef((e,n)=>(0,jt.jsx)("div",c(c({},e),{},{ref:n,className:Nt()(e.className,t)}))),ww=["className","bsPrefix","as"],Ew=xw("h5"),_w=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=Ew}=e,a=i(e,ww);return r=Ot(r,"offcanvas-title"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});_w.displayName="OffcanvasTitle";const Sw=_w;var Cw=Function.prototype.bind.call(Function.prototype.call,[].slice);function kw(e,t){return Cw(e.querySelectorAll(t))}function Nw(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const jw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Tw=".sticky-top",Iw=".navbar-toggler";class Aw extends Ix{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,xb(t,{[e]:"".concat(parseFloat(xb(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],xb(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";kw(t,jw).forEach(t=>this.adjustAndStore(i,t,e.scrollBarWidth)),kw(t,Tw).forEach(t=>this.adjustAndStore(s,t,-e.scrollBarWidth)),kw(t,Iw).forEach(t=>this.adjustAndStore(s,t,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=Nw(n.className,r):n.setAttribute("class",Nw(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";kw(t,jw).forEach(e=>this.restore(i,e)),kw(t,Tw).forEach(e=>this.restore(s,e)),kw(t,Iw).forEach(e=>this.restore(s,e))}}let Rw;function Pw(e){return Rw||(Rw=new Aw(e)),Rw}const Ow=Aw,Dw=["bsPrefix","className","children","aria-labelledby","placement","responsive","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager","renderStaticNode"];function Lw(e){return(0,jt.jsx)(aw,c({},e))}function Mw(e){return(0,jt.jsx)($x,c({},e))}const Uw=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,children:a,"aria-labelledby":o,placement:l="start",responsive:u,show:d=!1,backdrop:h=!0,keyboard:f=!0,scroll:p=!1,onEscapeKeyDown:m,onShow:g,onHide:y,container:v,autoFocus:b=!0,enforceFocus:x=!0,restoreFocus:w=!0,restoreFocusOptions:E,onEntered:_,onExit:S,onExiting:C,onEnter:k,onEntering:N,onExited:j,backdropClassName:T,manager:I,renderStaticNode:A=!1}=t,R=i(t,Dw);const P=(0,e.useRef)();r=Ot(r,"offcanvas");const[O,D]=(0,e.useState)(!1),L=ux(y),M=xx(u||"xs","up");(0,e.useEffect)(()=>{D(u?d&&!M:d)},[d,u,M]);const U=(0,e.useMemo)(()=>({onHide:L}),[L]);const F=(0,e.useCallback)(e=>(0,jt.jsx)("div",c(c({},e),{},{className:Nt()("".concat(r,"-backdrop"),T)})),[T,r]),B=e=>(0,jt.jsx)("div",c(c(c({},e),R),{},{className:Nt()(s,u?"".concat(r,"-").concat(u):r,"".concat(r,"-").concat(l)),"aria-labelledby":o,children:a}));return(0,jt.jsxs)(jt.Fragment,{children:[!O&&(u||A)&&B({}),(0,jt.jsx)(ow.Provider,{value:U,children:(0,jt.jsx)(Qx,{show:O,ref:n,backdrop:h,container:v,keyboard:f,autoFocus:b,enforceFocus:x&&!p,restoreFocus:w,restoreFocusOptions:E,onEscapeKeyDown:m,onShow:g,onHide:L,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==k||k(e,...n)},onEntering:N,onEntered:_,onExit:S,onExiting:C,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==j||j(...n)},manager:I||(p?(P.current||(P.current=new Ow({handleContainerOverflow:!1})),P.current):Pw()),transition:Lw,backdropTransition:Mw,renderBackdrop:F,renderDialog:B})})]})});Uw.displayName="Offcanvas";const Fw=Object.assign(Uw,{Body:nw,Header:bw,Title:Sw}),Bw=["onHide"],Vw=e.forwardRef((t,n)=>{let{onHide:r}=t,s=i(t,Bw);const a=(0,e.useContext)(sx),o=ux(()=>{null==a||null==a.onToggle||a.onToggle(),null==r||r()});return(0,jt.jsx)(Fw,c(c({ref:n,show:!(null==a||!a.expanded)},s),{},{renderStaticNode:!0,onHide:o}))});Vw.displayName="NavbarOffcanvas";const zw=Vw,Hw=["className","bsPrefix","as"],Ww=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span"}=e,a=i(e,Hw);return r=Ot(r,"navbar-text"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});Ww.displayName="NavbarText";const Kw=Ww,qw=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Gw=e.forwardRef((t,n)=>{const r=ob(t,{expanded:"onToggle"}),{bsPrefix:s,expand:a=!0,variant:o="light",bg:l,fixed:u,sticky:d,className:h,as:f="nav",expanded:p,onToggle:m,onSelect:g,collapseOnSelect:y=!1}=r,v=i(r,qw),b=Ot(s,"navbar"),x=(0,e.useCallback)(function(){null==g||g(...arguments),y&&p&&(null==m||m(!1))},[g,y,p,m]);void 0===v.role&&"nav"!==f&&(v.role="navigation");let w="".concat(b,"-expand");"string"===typeof a&&(w="".concat(w,"-").concat(a));const E=(0,e.useMemo)(()=>({onToggle:()=>null==m?void 0:m(!p),bsPrefix:b,expanded:!!p,expand:a}),[b,p,a,m]);return(0,jt.jsx)(sx.Provider,{value:E,children:(0,jt.jsx)(rb.Provider,{value:x,children:(0,jt.jsx)(f,c(c({ref:n},v),{},{className:Nt()(h,b,a&&w,o&&"".concat(b,"-").concat(o),l&&"bg-".concat(l),d&&"sticky-".concat(d),u&&"fixed-".concat(u))}))})})});Gw.displayName="Navbar";const Yw=Object.assign(Gw,{Brand:fb,Collapse:lx,Offcanvas:zw,Text:Kw,Toggle:fx});function Qw(){const[,t]=(0,e.useReducer)(e=>e+1,0);return t}const Xw=e.createContext(null);Xw.displayName="NavContext";const Jw=Xw,Zw=e.createContext(null),$w=["as","disabled"];function eE(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:a,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const d=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},u]}const tE=e.forwardRef((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,$w);const[s,{tagName:a}]=eE(Object.assign({tagName:n,disabled:r},i));return(0,jt.jsx)(a,Object.assign({},i,s,{ref:t}))});tE.displayName="Button";const nE=tE,rE=["as","active","eventKey"];function iE(t){let{key:n,onClick:r,active:i,id:s,role:a,disabled:o}=t;const l=(0,e.useContext)(rb),c=(0,e.useContext)(Jw),u=(0,e.useContext)(Zw);let d=i;const h={role:a};if(c){a||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);h[jx("event-key")]=n,h.id=e||s,d=null==i&&null!=n?c.activeKey===n:i,!d&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(h["aria-controls"]=t)}return"tab"===h.role&&(h["aria-selected"]=d,d||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=Nx(e=>{o||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))}),[h,{isActive:d}]}const sE=e.forwardRef((e,t)=>{let{as:n=nE,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,rE);const[a,o]=iE(Object.assign({key:nb(i,s.href),active:r},s));return a[jx("active")]=o.isActive,(0,jt.jsx)(n,Object.assign({},s,a,{ref:t}))});sE.displayName="NavItem";const aE=sE,oE=["as","onSelect","activeKey","role","onKeyDown"];const lE=()=>{},cE=jx("event-key"),uE=e.forwardRef((t,n)=>{let{as:r="div",onSelect:i,activeKey:s,role:a,onKeyDown:o}=t,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,oE);const c=Qw(),u=(0,e.useRef)(!1),d=(0,e.useContext)(rb),h=(0,e.useContext)(Zw);let f,p;h&&(a=a||"tablist",s=h.activeKey,f=h.getControlledId,p=h.getControllerId);const m=(0,e.useRef)(null),g=e=>{const t=m.current;if(!t)return null;const n=kw(t,"[".concat(cE,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},y=(e,t)=>{null!=e&&(null==i||i(e,t),null==d||d(e,t))};(0,e.useEffect)(()=>{if(m.current&&u.current){const e=m.current.querySelector("[".concat(cE,"][aria-selected=true]"));null==e||e.focus()}u.current=!1});const v=Dx(n,m);return(0,jt.jsx)(rb.Provider,{value:y,children:(0,jt.jsx)(Jw.Provider,{value:{role:a,activeKey:nb(s),getControlledId:f||lE,getControllerId:p||lE},children:(0,jt.jsx)(r,Object.assign({},l,{onKeyDown:e=>{if(null==o||o(e),!h)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=g(-1);break;case"ArrowRight":case"ArrowDown":t=g(1);break;default:return}t&&(e.preventDefault(),y(t.dataset[function(e){return"".concat("rrUi").concat(e)}("EventKey")]||null,e),u.current=!0,c())},ref:v,role:a}))})})});uE.displayName="Nav";const dE=Object.assign(uE,{Item:aE}),hE=e.createContext(null);hE.displayName="CardHeaderContext";const fE=hE,pE=["className","bsPrefix","as"],mE=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,pE);return r=Ot(r,"nav-item"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});mE.displayName="NavItem";const gE=mE;new WeakMap;const yE=["onKeyDown"];const vE=e.forwardRef((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,yE);const[i]=eE(Object.assign({tagName:"a"},r)),s=Nx(e=>{i.onKeyDown(e),null==n||n(e)});return(a=r.href)&&"#"!==a.trim()&&"button"!==r.role?(0,jt.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,jt.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var a});vE.displayName="Anchor";const bE=vE,xE=["bsPrefix","className","as","active","eventKey","disabled"],wE=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s=bE,active:a,eventKey:o,disabled:l=!1}=e,u=i(e,xE);n=Ot(n,"nav-link");const[d,h]=iE(c({key:nb(o,u.href),active:a,disabled:l},u));return(0,jt.jsx)(s,c(c(c({},u),d),{},{ref:t,disabled:l,className:Nt()(r,n,l&&"disabled",h.isActive&&"active")}))});wE.displayName="NavLink";const EE=wE,_E=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],SE=e.forwardRef((t,n)=>{const r=ob(t,{activeKey:"onSelect"}),{as:s="div",bsPrefix:a,variant:o,fill:l=!1,justify:u=!1,navbar:d,navbarScroll:h,className:f,activeKey:p}=r,m=i(r,_E),g=Ot(a,"nav");let y,v,b=!1;const x=(0,e.useContext)(sx),w=(0,e.useContext)(fE);return x?(y=x.bsPrefix,b=null==d||d):w&&({cardHeaderBsPrefix:v}=w),(0,jt.jsx)(dE,c({as:s,ref:n,activeKey:p,className:Nt()(f,{[g]:!b,["".concat(y,"-nav")]:b,["".concat(y,"-nav-scroll")]:b&&h,["".concat(v,"-").concat(o)]:!!v,["".concat(g,"-").concat(o)]:!!o,["".concat(g,"-fill")]:l,["".concat(g,"-justified")]:u})},m))});SE.displayName="Nav";const CE=Object.assign(SE,{Item:gE,Link:EE});function kE(t,n,r){const i=(0,e.useRef)(void 0!==t),[s,a]=(0,e.useState)(n),o=void 0!==t,l=i.current;return i.current=o,!o&&l&&s!==n&&a(n),[o?t:s,(0,e.useCallback)(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,...s]=t;let o=null==r?void 0:r(i,...s);return a(i),o},[r])]}const NE=e.createContext(null);var jE=Object.prototype.hasOwnProperty;function TE(e,t,n){for(n of e.keys())if(IE(n,t))return n}function IE(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&IE(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=TE(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=TE(t,i)))return!1;if(!IE(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(jE.call(e,n)&&++r&&!jE.call(t,n))return!1;if(!(n in t)||!IE(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}const AE=function(t){const n=_x();return[t[0],(0,e.useCallback)(e=>{if(n())return t[1](e)},[n,t[1]])]};function RE(e){return e.split("-")[0]}function PE(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function OE(e){return e instanceof PE(e).Element||e instanceof Element}function DE(e){return e instanceof PE(e).HTMLElement||e instanceof HTMLElement}function LE(e){return"undefined"!==typeof ShadowRoot&&(e instanceof PE(e).ShadowRoot||e instanceof ShadowRoot)}var ME=Math.max,UE=Math.min,FE=Math.round;function BE(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function VE(){return!/^((?!chrome|android).)*safari/i.test(BE())}function zE(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&DE(e)&&(i=e.offsetWidth>0&&FE(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&FE(r.height)/e.offsetHeight||1);var a=(OE(e)?PE(e):window).visualViewport,o=!VE()&&n,l=(r.left+(o&&a?a.offsetLeft:0))/i,c=(r.top+(o&&a?a.offsetTop:0))/s,u=r.width/i,d=r.height/s;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l,x:l,y:c}}function HE(e){var t=zE(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function WE(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&LE(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function KE(e){return e?(e.nodeName||"").toLowerCase():null}function qE(e){return PE(e).getComputedStyle(e)}function GE(e){return["table","td","th"].indexOf(KE(e))>=0}function YE(e){return((OE(e)?e.ownerDocument:e.document)||window.document).documentElement}function QE(e){return"html"===KE(e)?e:e.assignedSlot||e.parentNode||(LE(e)?e.host:null)||YE(e)}function XE(e){return DE(e)&&"fixed"!==qE(e).position?e.offsetParent:null}function JE(e){for(var t=PE(e),n=XE(e);n&&GE(n)&&"static"===qE(n).position;)n=XE(n);return n&&("html"===KE(n)||"body"===KE(n)&&"static"===qE(n).position)?t:n||function(e){var t=/firefox/i.test(BE());if(/Trident/i.test(BE())&&DE(e)&&"fixed"===qE(e).position)return null;var n=QE(e);for(LE(n)&&(n=n.host);DE(n)&&["html","body"].indexOf(KE(n))<0;){var r=qE(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function ZE(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $E(e,t,n){return ME(e,UE(t,n))}function e_(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function t_(e,t){return t.reduce(function(t,n){return t[n]=e,t},{})}var n_="top",r_="bottom",i_="right",s_="left",a_="auto",o_=[n_,r_,i_,s_],l_="start",c_="end",u_="viewport",d_="popper",h_=o_.reduce(function(e,t){return e.concat([t+"-"+l_,t+"-"+c_])},[]),f_=[].concat(o_,[a_]).reduce(function(e,t){return e.concat([t,t+"-"+l_,t+"-"+c_])},[]),p_=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];const m_={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,a=n.modifiersData.popperOffsets,o=RE(n.placement),l=ZE(o),c=[s_,i_].indexOf(o)>=0?"height":"width";if(s&&a){var u=function(e,t){return e_("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:t_(e,o_))}(i.padding,n),d=HE(s),h="y"===l?n_:s_,f="y"===l?r_:i_,p=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],m=a[l]-n.rects.reference[l],g=JE(s),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=p/2-m/2,b=u[h],x=y-d[c]-u[f],w=y/2-d[c]/2+v,E=$E(b,w,x),_=l;n.modifiersData[r]=((t={})[_]=E,t.centerOffset=E-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&WE(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function g_(e){return e.split("-")[1]}var y_={top:"auto",right:"auto",bottom:"auto",left:"auto"};function v_(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=a.x,f=void 0===h?0:h,p=a.y,m=void 0===p?0:p,g="function"===typeof u?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var y=a.hasOwnProperty("x"),v=a.hasOwnProperty("y"),b=s_,x=n_,w=window;if(c){var E=JE(n),_="clientHeight",S="clientWidth";if(E===PE(n)&&"static"!==qE(E=YE(n)).position&&"absolute"===o&&(_="scrollHeight",S="scrollWidth"),i===n_||(i===s_||i===i_)&&s===c_)x=r_,m-=(d&&E===w&&w.visualViewport?w.visualViewport.height:E[_])-r.height,m*=l?1:-1;if(i===s_||(i===n_||i===r_)&&s===c_)b=i_,f-=(d&&E===w&&w.visualViewport?w.visualViewport.width:E[S])-r.width,f*=l?1:-1}var C,k=Object.assign({position:o},c&&y_),N=!0===u?function(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:FE(n*i)/i||0,y:FE(r*i)/i||0}}({x:f,y:m},PE(n)):{x:f,y:m};return f=N.x,m=N.y,l?Object.assign({},k,((C={})[x]=v?"0":"",C[b]=y?"0":"",C.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",C)):Object.assign({},k,((t={})[x]=v?m+"px":"",t[b]=y?f+"px":"",t.transform="",t))}const b_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,a=void 0===s||s,o=n.roundOffsets,l=void 0===o||o,c={placement:RE(t.placement),variation:g_(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,v_(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,v_(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var x_={passive:!0};const w_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,a=r.resize,o=void 0===a||a,l=PE(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(e){e.addEventListener("scroll",n.update,x_)}),o&&l.addEventListener("resize",n.update,x_),function(){s&&c.forEach(function(e){e.removeEventListener("scroll",n.update,x_)}),o&&l.removeEventListener("resize",n.update,x_)}},data:{}};var E_={left:"right",right:"left",bottom:"top",top:"bottom"};function __(e){return e.replace(/left|right|bottom|top/g,function(e){return E_[e]})}var S_={start:"end",end:"start"};function C_(e){return e.replace(/start|end/g,function(e){return S_[e]})}function k_(e){var t=PE(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function N_(e){return zE(YE(e)).left+k_(e).scrollLeft}function j_(e){var t=qE(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function T_(e){return["html","body","#document"].indexOf(KE(e))>=0?e.ownerDocument.body:DE(e)&&j_(e)?e:T_(QE(e))}function I_(e,t){var n;void 0===t&&(t=[]);var r=T_(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=PE(r),a=i?[s].concat(s.visualViewport||[],j_(r)?r:[]):r,o=t.concat(a);return i?o:o.concat(I_(QE(a)))}function A_(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function R_(e,t,n){return t===u_?A_(function(e,t){var n=PE(e),r=YE(e),i=n.visualViewport,s=r.clientWidth,a=r.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;var c=VE();(c||!c&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o+N_(e),y:l}}(e,n)):OE(t)?function(e,t){var n=zE(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):A_(function(e){var t,n=YE(e),r=k_(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=ME(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ME(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),o=-r.scrollLeft+N_(e),l=-r.scrollTop;return"rtl"===qE(i||n).direction&&(o+=ME(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}(YE(e)))}function P_(e,t,n,r){var i="clippingParents"===t?function(e){var t=I_(QE(e)),n=["absolute","fixed"].indexOf(qE(e).position)>=0&&DE(e)?JE(e):e;return OE(n)?t.filter(function(e){return OE(e)&&WE(e,n)&&"body"!==KE(e)}):[]}(e):[].concat(t),s=[].concat(i,[n]),a=s[0],o=s.reduce(function(t,n){var i=R_(e,n,r);return t.top=ME(i.top,t.top),t.right=UE(i.right,t.right),t.bottom=UE(i.bottom,t.bottom),t.left=ME(i.left,t.left),t},R_(e,a,r));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function O_(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?RE(i):null,a=i?g_(i):null,o=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(s){case n_:t={x:o,y:n.y-r.height};break;case r_:t={x:o,y:n.y+n.height};break;case i_:t={x:n.x+n.width,y:l};break;case s_:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=s?ZE(s):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case l_:t[c]=t[c]-(n[u]/2-r[u]/2);break;case c_:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}function D_(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,a=void 0===s?e.strategy:s,o=n.boundary,l=void 0===o?"clippingParents":o,c=n.rootBoundary,u=void 0===c?u_:c,d=n.elementContext,h=void 0===d?d_:d,f=n.altBoundary,p=void 0!==f&&f,m=n.padding,g=void 0===m?0:m,y=e_("number"!==typeof g?g:t_(g,o_)),v=h===d_?"reference":d_,b=e.rects.popper,x=e.elements[p?v:h],w=P_(OE(x)?x:x.contextElement||YE(e.elements.popper),l,u,a),E=zE(e.elements.reference),_=O_({reference:E,element:b,strategy:"absolute",placement:i}),S=A_(Object.assign({},b,_)),C=h===d_?S:E,k={top:w.top-C.top+y.top,bottom:C.bottom-w.bottom+y.bottom,left:w.left-C.left+y.left,right:C.right-w.right+y.right},N=e.modifiersData.offset;if(h===d_&&N){var j=N[i];Object.keys(k).forEach(function(e){var t=[i_,r_].indexOf(e)>=0?1:-1,n=[n_,r_].indexOf(e)>=0?"y":"x";k[e]+=j[n]*t})}return k}const L_={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,a=n.altAxis,o=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=void 0===f||f,m=n.allowedAutoPlacements,g=t.options.placement,y=RE(g),v=l||(y===g||!p?[__(g)]:function(e){if(RE(e)===a_)return[];var t=__(e);return[C_(e),t,C_(t)]}(g)),b=[g].concat(v).reduce(function(e,n){return e.concat(RE(n)===a_?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,a=n.padding,o=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?f_:l,u=g_(r),d=u?o?h_:h_.filter(function(e){return g_(e)===u}):o_,h=d.filter(function(e){return c.indexOf(e)>=0});0===h.length&&(h=d);var f=h.reduce(function(t,n){return t[n]=D_(e,{placement:n,boundary:i,rootBoundary:s,padding:a})[RE(n)],t},{});return Object.keys(f).sort(function(e,t){return f[e]-f[t]})}(t,{placement:n,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):n)},[]),x=t.rects.reference,w=t.rects.popper,E=new Map,_=!0,S=b[0],C=0;C<b.length;C++){var k=b[C],N=RE(k),j=g_(k)===l_,T=[n_,r_].indexOf(N)>=0,I=T?"width":"height",A=D_(t,{placement:k,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=T?j?i_:s_:j?r_:n_;x[I]>w[I]&&(R=__(R));var P=__(R),O=[];if(s&&O.push(A[N]<=0),o&&O.push(A[R]<=0,A[P]<=0),O.every(function(e){return e})){S=k,_=!1;break}E.set(k,O)}if(_)for(var D=function(e){var t=b.find(function(t){var n=E.get(t);if(n)return n.slice(0,e).every(function(e){return e})});if(t)return S=t,"break"},L=p?3:1;L>0;L--){if("break"===D(L))break}t.placement!==S&&(t.modifiersData[r]._skip=!0,t.placement=S,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function M_(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function U_(e){return[n_,i_,r_,s_].some(function(t){return e[t]>=0})}const F_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,a=f_.reduce(function(e,n){return e[n]=function(e,t,n){var r=RE(e),i=[s_,n_].indexOf(r)>=0?-1:1,s="function"===typeof n?n(Object.assign({},t,{placement:e})):n,a=s[0],o=s[1];return a=a||0,o=(o||0)*i,[s_,i_].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,s),e},{}),o=a[t.placement],l=o.x,c=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}};const B_={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,a=n.altAxis,o=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=void 0===h||h,p=n.tetherOffset,m=void 0===p?0:p,g=D_(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=RE(t.placement),v=g_(t.placement),b=!v,x=ZE(y),w="x"===x?"y":"x",E=t.modifiersData.popperOffsets,_=t.rects.reference,S=t.rects.popper,C="function"===typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,k="number"===typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),N=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,j={x:0,y:0};if(E){if(s){var T,I="y"===x?n_:s_,A="y"===x?r_:i_,R="y"===x?"height":"width",P=E[x],O=P+g[I],D=P-g[A],L=f?-S[R]/2:0,M=v===l_?_[R]:S[R],U=v===l_?-S[R]:-_[R],F=t.elements.arrow,B=f&&F?HE(F):{width:0,height:0},V=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=V[I],H=V[A],W=$E(0,_[R],B[R]),K=b?_[R]/2-L-W-z-k.mainAxis:M-W-z-k.mainAxis,q=b?-_[R]/2+L+W+H+k.mainAxis:U+W+H+k.mainAxis,G=t.elements.arrow&&JE(t.elements.arrow),Y=G?"y"===x?G.clientTop||0:G.clientLeft||0:0,Q=null!=(T=null==N?void 0:N[x])?T:0,X=P+q-Q,J=$E(f?UE(O,P+K-Q-Y):O,P,f?ME(D,X):D);E[x]=J,j[x]=J-P}if(o){var Z,$="x"===x?n_:s_,ee="x"===x?r_:i_,te=E[w],ne="y"===w?"height":"width",re=te+g[$],ie=te-g[ee],se=-1!==[n_,s_].indexOf(y),ae=null!=(Z=null==N?void 0:N[w])?Z:0,oe=se?re:te-_[ne]-S[ne]-ae+k.altAxis,le=se?te+_[ne]+S[ne]-ae-k.altAxis:ie,ce=f&&se?function(e,t,n){var r=$E(e,t,n);return r>n?n:r}(oe,te,le):$E(f?oe:re,te,f?le:ie);E[w]=ce,j[w]=ce-te}t.modifiersData[r]=j}},requiresIfExists:["offset"]};function V_(e,t,n){void 0===n&&(n=!1);var r=DE(t),i=DE(t)&&function(e){var t=e.getBoundingClientRect(),n=FE(t.width)/e.offsetWidth||1,r=FE(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),s=YE(t),a=zE(e,i,n),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==KE(t)||j_(s))&&(o=function(e){return e!==PE(e)&&DE(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:k_(e);var t}(t)),DE(t)?((l=zE(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=N_(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function z_(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}}),r.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){n.has(e.name)||i(e)}),r}function H_(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}var W_={placement:"bottom",modifiers:[],strategy:"absolute"};function K_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"===typeof e.getBoundingClientRect)})}function q_(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?W_:i;return function(e,t,n){void 0===n&&(n=s);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},W_,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},a=[],o=!1,l={state:i,setOptions:function(n){var o="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},s,i.options,o),i.scrollParents={reference:OE(e)?I_(e):e.contextElement?I_(e.contextElement):[],popper:I_(t)};var u=function(e){var t=z_(e);return p_.reduce(function(e,n){return e.concat(t.filter(function(e){return e.phase===n}))},[])}(function(e){var t=e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e},{});return Object.keys(t).map(function(e){return t[e]})}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"===typeof s){var o=s({state:i,name:t,instance:l,options:r}),c=function(){};a.push(o||c)}}),l.update()},forceUpdate:function(){if(!o){var e=i.elements,t=e.reference,n=e.popper;if(K_(t,n)){i.rects={reference:V_(t,JE(n),"fixed"===i.options.strategy),popper:HE(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var s=i.orderedModifiers[r],a=s.fn,c=s.options,u=void 0===c?{}:c,d=s.name;"function"===typeof a&&(i=a({state:i,options:u,name:d,instance:l})||i)}else i.reset=!1,r=-1}}},update:H_(function(){return new Promise(function(e){l.forceUpdate(),e(i)})}),destroy:function(){c(),o=!0}};if(!K_(e,t))return l;function c(){a.forEach(function(e){return e()}),a=[]}return l.setOptions(n).then(function(e){!o&&n.onFirstUpdate&&n.onFirstUpdate(e)}),l}}const G_=q_({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,a=D_(t,{elementContext:"reference"}),o=D_(t,{altBoundary:!0}),l=M_(a,r),c=M_(o,i,s),u=U_(l),d=U_(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=O_({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},b_,w_,F_,L_,B_,m_]}),Y_=["enabled","placement","strategy","modifiers"];const Q_={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},X_={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:e=>{let{state:t}=e;return()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const t=(e.getAttribute("aria-describedby")||"").split(",").filter(e=>e.trim()!==n.id);t.length?e.setAttribute("aria-describedby",t.join(",")):e.removeAttribute("aria-describedby")}}},fn:e=>{let{state:t}=e;var n;const{popper:r,reference:i}=t.elements,s=null==(n=r.getAttribute("role"))?void 0:n.toLowerCase();if(r.id&&"tooltip"===s&&"setAttribute"in i){const e=i.getAttribute("aria-describedby");if(e&&-1!==e.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",e?"".concat(e,",").concat(r.id):r.id)}}},J_=[];const Z_=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{enabled:i=!0,placement:s="bottom",strategy:a="absolute",modifiers:o=J_}=r,l=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(r,Y_);const c=(0,e.useRef)(o),u=(0,e.useRef)(),d=(0,e.useCallback)(()=>{var e;null==(e=u.current)||e.update()},[]),h=(0,e.useCallback)(()=>{var e;null==(e=u.current)||e.forceUpdate()},[]),[f,p]=AE((0,e.useState)({placement:s,update:d,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),m=(0,e.useMemo)(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:e=>{let{state:t}=e;const n={},r={};Object.keys(t.elements).forEach(e=>{n[e]=t.styles[e],r[e]=t.attributes[e]}),p({state:t,styles:n,attributes:r,update:d,forceUpdate:h,placement:t.placement})}}),[d,h,p]),g=(0,e.useMemo)(()=>(IE(c.current,o)||(c.current=o),c.current),[o]);return(0,e.useEffect)(()=>{u.current&&i&&u.current.setOptions({placement:s,strategy:a,modifiers:[...g,m,Q_]})},[a,s,m,i,g]),(0,e.useEffect)(()=>{if(i&&null!=t&&null!=n)return u.current=G_(t,n,Object.assign({},l,{placement:s,strategy:a,modifiers:[...g,X_,m]})),()=>{null!=u.current&&(u.current.destroy(),u.current=void 0,p(e=>Object.assign({},e,{attributes:{},styles:{popper:{}}})))}},[i,t,n]),f};var $_=n(440),eS=n.n($_);const tS=()=>{};const nS=e=>e&&("current"in e?e.current:e),rS={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};const iS=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tS,{disabled:r,clickTrigger:i="click"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,e.useRef)(!1),a=(0,e.useRef)(!1),o=(0,e.useCallback)(e=>{const n=nS(t);var r;eS()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||!!((r=e).metaKey||r.altKey||r.ctrlKey||r.shiftKey)||!function(e){return 0===e.button}(e)||!!Ex(n,e.target)||a.current,a.current=!1},[t]),l=Nx(e=>{const n=nS(t);n&&Ex(n,e.target)?a.current=!0:a.current=!1}),c=Nx(e=>{s.current||n(e)});(0,e.useEffect)(()=>{var e,n;if(r||null==t)return;const s=pb(nS(t)),a=s.defaultView||window;let u=null!=(e=a.event)?e:null==(n=a.parent)?void 0:n.event,d=null;rS[i]&&(d=Bb(s,rS[i],l,!0));const h=Bb(s,i,o,!0),f=Bb(s,i,e=>{e!==u?c(e):u=void 0});let p=[];return"ontouchstart"in s.documentElement&&(p=[].slice.call(s.body.children).map(e=>Bb(e,"mousemove",tS))),()=>{null==d||d(),h(),f(),p.forEach(e=>e())}},[t,r,i,o,l,c])};function sS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function aS(e){let{enabled:t,enableEvents:n,placement:r,flip:i,offset:s,fixed:a,containerPadding:o,arrowElement:l,popperConfig:c={}}=e;var u,d,h,f,p;const m=function(e){const t={};return Array.isArray(e)?(null==e||e.forEach(e=>{t[e.name]=e}),t):e||t}(c.modifiers);return Object.assign({},c,{placement:r,enabled:t,strategy:a?"fixed":c.strategy,modifiers:sS(Object.assign({},m,{eventListeners:{enabled:n,options:null==(u=m.eventListeners)?void 0:u.options},preventOverflow:Object.assign({},m.preventOverflow,{options:o?Object.assign({padding:o},null==(d=m.preventOverflow)?void 0:d.options):null==(h=m.preventOverflow)?void 0:h.options}),offset:{options:Object.assign({offset:s},null==(f=m.offset)?void 0:f.options)},arrow:Object.assign({},m.arrow,{enabled:!!l,options:Object.assign({},null==(p=m.arrow)?void 0:p.options,{element:l})}),flip:Object.assign({enabled:!!i},m.flip)}))})}const oS=["children","usePopper"];const lS=()=>{};function cS(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=(0,e.useContext)(NE),[r,i]=(0,e.useState)(null),s=(0,e.useRef)(!1),{flip:a,offset:o,rootCloseEvent:l,fixed:c=!1,placement:u,popperConfig:d={},enableEventListeners:h=!0,usePopper:f=!!n}=t,p=null==(null==n?void 0:n.show)?!!t.show:n.show;p&&!s.current&&(s.current=!0);const{placement:m,setMenu:g,menuElement:y,toggleElement:v}=n||{},b=Z_(v,y,aS({placement:u||m||"bottom-start",enabled:f,enableEvents:null==h?p:h,offset:o,flip:a,fixed:c,arrowElement:r,popperConfig:d})),x=Object.assign({ref:g||lS,"aria-labelledby":null==v?void 0:v.id},b.attributes.popper,{style:b.styles.popper}),w={show:p,placement:m,hasShown:s.current,toggle:null==n?void 0:n.toggle,popper:f?b:null,arrowProps:f?Object.assign({ref:i},b.attributes.arrow,{style:b.styles.arrow}):{}};return iS(y,e=>{null==n||n.toggle(!1,e)},{clickTrigger:l,disabled:!p}),[x,w]}function uS(e){let{children:t,usePopper:n=!0}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,oS);const[i,s]=cS(Object.assign({},r,{usePopper:n}));return(0,jt.jsx)(jt.Fragment,{children:t(i,s)})}uS.displayName="DropdownMenu";const dS=uS,hS={prefix:String(Math.round(1e10*Math.random())),current:0},fS=e.createContext(hS),pS=e.createContext(!1);Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);let mS=new WeakMap;function gS(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,e.useContext)(fS),r=(0,e.useRef)(null);if(null===r.current&&!t){var i,s;let t=null===(s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(t){let e=mS.get(t);null==e?mS.set(t,{id:n.current,state:t.memoizedState}):t.memoizedState!==e.state&&(n.current=e.id,mS.delete(t))}r.current=++n.current}return r.current}const yS="function"===typeof e.useId?function(t){let n=e.useId(),[r]=(0,e.useState)("function"===typeof e.useSyncExternalStore?e.useSyncExternalStore(xS,vS,bS):(0,e.useContext)(pS)),i=r?"react-aria":"react-aria".concat(hS.prefix);return t||"".concat(i,"-").concat(n)}:function(t){let n=(0,e.useContext)(fS),r=gS(!!t),i="react-aria".concat(n.prefix);return t||"".concat(i,"-").concat(r)};function vS(){return!1}function bS(){return!0}function xS(e){return()=>{}}const wS=e=>{var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},ES=()=>{};function _S(){const t=yS(),{show:n=!1,toggle:r=ES,setToggle:i,menuElement:s}=(0,e.useContext)(NE)||{},a=(0,e.useCallback)(e=>{r(!n,e)},[n,r]),o={id:t,ref:i||ES,onClick:a,"aria-expanded":!!n};return s&&wS(s)&&(o["aria-haspopup"]=!0),[o,{show:n,toggle:r}]}function SS(e){let{children:t}=e;const[n,r]=_S();return(0,jt.jsx)(jt.Fragment,{children:t(n,r)})}SS.displayName="DropdownToggle";const CS=SS,kS=["eventKey","disabled","onClick","active","as"];function NS(t){let{key:n,href:r,active:i,disabled:s,onClick:a}=t;const o=(0,e.useContext)(rb),l=(0,e.useContext)(Jw),{activeKey:c}=l||{},u=nb(n,r),d=null==i&&null!=n?nb(c)===u:i;return[{onClick:Nx(e=>{s||(null==a||a(e),o&&!e.isPropagationStopped()&&o(u,e))}),"aria-disabled":s||void 0,"aria-selected":d,[jx("dropdown-item")]:""},{isActive:d}]}const jS=e.forwardRef((e,t)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:a=nE}=e,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,kS);const[l]=NS({key:n,href:o.href,disabled:r,onClick:i,active:s});return(0,jt.jsx)(a,Object.assign({},o,{ref:t},l))});jS.displayName="DropdownItem";const TS=jS;function IS(){const t=Qw(),n=(0,e.useRef)(null),r=(0,e.useCallback)(e=>{n.current=e,t()},[t]);return[n,r]}function AS(t){let{defaultShow:n,show:r,onSelect:i,onToggle:s,itemSelector:a="* [".concat(jx("dropdown-item"),"]"),focusFirstItemOnShow:o,placement:l="bottom-start",children:c}=t;const u=Rx(),[d,h]=kE(r,n,s),[f,p]=IS(),m=f.current,[g,y]=IS(),v=g.current,b=Cx(d),x=(0,e.useRef)(null),w=(0,e.useRef)(!1),E=(0,e.useContext)(rb),_=(0,e.useCallback)(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;h(e,{originalEvent:t,source:n})},[h]),S=Nx((e,t)=>{null==i||i(e,t),_(!1,t,"select"),t.isPropagationStopped()||null==E||E(e,t)}),C=(0,e.useMemo)(()=>({toggle:_,placement:l,show:d,menuElement:m,toggleElement:v,setMenu:p,setToggle:y}),[_,l,d,m,v,p,y]);m&&b&&!d&&(w.current=m.contains(m.ownerDocument.activeElement));const k=Nx(()=>{v&&v.focus&&v.focus()}),N=Nx(()=>{const e=x.current;let t=o;if(null==t&&(t=!(!f.current||!wS(f.current))&&"keyboard"),!1===t||"keyboard"===t&&!/^key.+$/.test(e))return;const n=kw(f.current,a)[0];n&&n.focus&&n.focus()});(0,e.useEffect)(()=>{d?N():w.current&&(w.current=!1,k())},[d,w,k,N]),(0,e.useEffect)(()=>{x.current=null});const j=(e,t)=>{if(!f.current)return null;const n=kw(f.current,a);let r=n.indexOf(e)+t;return r=Math.max(0,Math.min(r,n.length)),n[r]};return function(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=Nx(r);(0,e.useEffect)(()=>{const e="function"===typeof t?t():t;return e.addEventListener(n,s,i),()=>e.removeEventListener(n,s,i)},[t])}((0,e.useCallback)(()=>u.document,[u]),"keydown",e=>{var t,n;const{key:r}=e,i=e.target,s=null==(t=f.current)?void 0:t.contains(i),a=null==(n=g.current)?void 0:n.contains(i);if(/input|textarea/i.test(i.tagName)&&(" "===r||"Escape"!==r&&s||"Escape"===r&&"search"===i.type))return;if(!s&&!a)return;if("Tab"===r&&(!f.current||!d))return;x.current=e.type;const o={originalEvent:e,source:e.type};switch(r){case"ArrowUp":{const t=j(i,-1);return t&&t.focus&&t.focus(),void e.preventDefault()}case"ArrowDown":if(e.preventDefault(),d){const e=j(i,1);e&&e.focus&&e.focus()}else h(!0,o);return;case"Tab":Ub(i.ownerDocument,"keyup",e=>{var t;("Tab"!==e.key||e.target)&&null!=(t=f.current)&&t.contains(e.target)||h(!1,o)},{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),h(!1,o)}}),(0,jt.jsx)(rb.Provider,{value:S,children:(0,jt.jsx)(NE.Provider,{value:C,children:c})})}AS.displayName="Dropdown",AS.Menu=dS,AS.Toggle=CS,AS.Item=TS;const RS=AS,PS=e.createContext({});PS.displayName="DropdownContext";const OS=PS,DS=["className","bsPrefix","as","role"],LS=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="hr",role:a="separator"}=e,o=i(e,DS);return r=Ot(r,"dropdown-divider"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r),role:a},o))});LS.displayName="DropdownDivider";const MS=LS,US=["className","bsPrefix","as","role"],FS=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div",role:a="heading"}=e,o=i(e,US);return r=Ot(r,"dropdown-header"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r),role:a},o))});FS.displayName="DropdownHeader";const BS=FS,VS=["bsPrefix","className","eventKey","disabled","onClick","active","as"],zS=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,eventKey:s,disabled:a=!1,onClick:o,active:l,as:u=bE}=e,d=i(e,VS);const h=Ot(n,"dropdown-item"),[f,p]=NS({key:s,href:d.href,disabled:a,onClick:o,active:l});return(0,jt.jsx)(u,c(c(c({},d),f),{},{ref:t,className:Nt()(r,h,p.isActive&&"active",a&&"disabled")}))});zS.displayName="DropdownItem";const HS=zS,WS=["className","bsPrefix","as"],KS=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span"}=e,a=i(e,WS);return r=Ot(r,"dropdown-item-text"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});KS.displayName="DropdownItemText";const qS=KS,GS=e.createContext(null);GS.displayName="InputGroupContext";const YS=GS;function QS(e,t){return e}const XS=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function JS(e,t,n){let r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t?r=e?n?"right-end":"left-end":n?"right-start":"left-start":"down-centered"===t?r="bottom":"up-centered"===t&&(r="top"),r}const ZS=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,align:a,rootCloseEvent:o,flip:l=!0,show:u,renderOnMount:d,as:h="div",popperConfig:f,variant:p}=t,m=i(t,XS),g=!1;const y=(0,e.useContext)(sx),v=Ot(r,"dropdown-menu"),{align:b,drop:x,isRTL:w}=(0,e.useContext)(OS);a=a||b;const E=(0,e.useContext)(YS),_=[];if(a)if("object"===typeof a){const e=Object.keys(a);if(e.length){const t=e[0],n=a[t];g="start"===n,_.push("".concat(v,"-").concat(t,"-").concat(n))}}else"end"===a&&(g=!0);const S=JS(g,x,w),[C,{hasShown:k,popper:N,show:j,toggle:T}]=cS({flip:l,rootCloseEvent:o,show:u,usePopper:!y&&0===_.length,offset:[0,2],popperConfig:f,placement:S});if(C.ref=Yb(QS(n),C.ref),mx(()=>{j&&(null==N||N.update())},[j]),!k&&!d&&!E)return null;"string"!==typeof h&&(C.show=j,C.close=()=>null==T?void 0:T(!1),C.align=a);let I=m.style;return null!=N&&N.placement&&(I=c(c({},m.style),C.style),m["x-placement"]=N.placement),(0,jt.jsx)(h,c(c(c(c({},m),C),{},{style:I},(_.length||y)&&{"data-bs-popper":"static"}),{},{className:Nt()(s,v,j&&"show",g&&"".concat(v,"-end"),p&&"".concat(v,"-").concat(p),..._)}))});ZS.displayName="DropdownMenu";const $S=ZS,eC=["as","bsPrefix","variant","size","active","disabled","className"],tC=e.forwardRef((e,t)=>{let{as:n,bsPrefix:r,variant:s="primary",size:a,active:o=!1,disabled:l=!1,className:u}=e,d=i(e,eC);const h=Ot(r,"btn"),[f,{tagName:p}]=eE(c({tagName:n,disabled:l},d)),m=p;return(0,jt.jsx)(m,c(c(c({},f),d),{},{ref:t,disabled:l,className:Nt()(u,h,o&&"active",s&&"".concat(h,"-").concat(s),a&&"".concat(h,"-").concat(a),d.href&&l&&"disabled")}))});tC.displayName="Button";const nC=tC,rC=["bsPrefix","split","className","childBsPrefix","as"],iC=e.forwardRef((t,n)=>{let{bsPrefix:r,split:s,className:a,childBsPrefix:o,as:l=nC}=t,u=i(t,rC);const d=Ot(r,"dropdown-toggle"),h=(0,e.useContext)(NE);void 0!==o&&(u.bsPrefix=o);const[f]=_S();return f.ref=Yb(f.ref,QS(n)),(0,jt.jsx)(l,c(c({className:Nt()(a,d,s&&"".concat(d,"-split"),(null==h?void 0:h.show)&&"show")},f),u))});iC.displayName="DropdownToggle";const sC=iC,aC=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],oC=e.forwardRef((t,n)=>{const r=ob(t,{show:"onToggle"}),{bsPrefix:s,drop:a="down",show:o,className:l,align:u="start",onSelect:d,onToggle:h,focusFirstItemOnShow:f,as:p="div",navbar:m,autoClose:g=!0}=r,y=i(r,aC),v=(0,e.useContext)(YS),b=Ot(s,"dropdown"),x=Mt(),w=ux((e,t)=>{var n;var r;(null==(n=t.originalEvent)||null==(n=n.target)?void 0:n.classList.contains("dropdown-toggle"))&&"mousedown"===t.source||(t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),r=t.source,(!1===g?"click"===r:"inside"===g?"rootClose"!==r:"outside"!==g||"select"!==r)&&(null==h||h(e,t)))}),E=JS("end"===u,a,x),_=(0,e.useMemo)(()=>({align:u,drop:a,isRTL:x}),[u,a,x]),S={down:b,"down-centered":"".concat(b,"-center"),up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return(0,jt.jsx)(OS.Provider,{value:_,children:(0,jt.jsx)(RS,{placement:E,show:o,onSelect:d,onToggle:w,focusFirstItemOnShow:f,itemSelector:".".concat(b,"-item:not(.disabled):not(:disabled)"),children:v?y.children:(0,jt.jsx)(p,c(c({},y),{},{ref:n,className:Nt()(l,o&&"show",S[a])}))})})});oC.displayName="Dropdown";const lC=Object.assign(oC,{Toggle:sC,Menu:$S,Item:HS,ItemText:qS,Divider:MS,Header:BS}),cC=["id","title","children","bsPrefix","className","rootCloseEvent","menuRole","disabled","active","renderMenuOnMount","menuVariant"],uC=e.forwardRef((e,t)=>{let{id:n,title:r,children:s,bsPrefix:a,className:o,rootCloseEvent:l,menuRole:u,disabled:d,active:h,renderMenuOnMount:f,menuVariant:p}=e,m=i(e,cC);const g=Ot(void 0,"nav-item");return(0,jt.jsxs)(lC,c(c({ref:t},m),{},{className:Nt()(o,g),children:[(0,jt.jsx)(lC.Toggle,{id:n,eventKey:null,active:h,disabled:d,childBsPrefix:a,as:EE,children:r}),(0,jt.jsx)(lC.Menu,{role:u,renderOnMount:f,rootCloseEvent:l,variant:p,children:s})]}))});uC.displayName="NavDropdown";const dC=Object.assign(uC,{Item:lC.Item,ItemText:lC.ItemText,Divider:lC.Divider,Header:lC.Header}),hC=()=>{const{currentUser:e,logout:t}=eb(),n=pe();return(0,jt.jsx)(Yw,{bg:"dark",variant:"dark",expand:"lg",className:"mb-4",children:(0,jt.jsxs)(Bt,{children:[(0,jt.jsxs)(Yw.Brand,{as:vt,to:"/",children:[(0,jt.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAAA+s9J6AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABtnSURBVHgB7Z1fiBxXdsaPtXaijR9mBBFxAvGUyBLsB2lkG4MWNKgUjP8ggUYYll3pQa0FQ0YvGu8GIj1s1JM8zDxk0SgP0gYv654HifXCRiOwyMokqIQEscnaHlkPNgTjGuUhznpBo4cNEn7Y1FfVd6an1d11btWtqlu3zg/uVE9P9WjUXV+dc88599zHSLAFr2+MRWO8+5h6jv2P+1nrDhD2HPHc/e5j9f0KCZXzGAllokS1OxqTPY89qg4IUQlytXtUzwklICIsFgjMp0RwOHpUHyDEMBo3uo8DEgpBRGgWPxr7ukcIcJzcQVlLiDIgEaUxRIT5gMhatCE8l0SXBkQZRONK9xiSIJQEhDYbjevR+L2M9XGdkhuSR4JQACI8EaRQET6J8PKOt6MxTYKgAazemWjco3pd7LaPL6JxksQ6PoIEZjbwo3GMkrt26QGW8bE/Iu/pP14f+H5iYnt8VD9T9D7uJ7z72/i4dv//4qGeW139Kv4ej9VQP6+ATjTmSII5MSLCRHxnusfCgaB273w6HpO7JuKjEl3ZQIQrd+7GAyJVj0sUZ0CJGANqME0WoU8liA8i8/c+EwsOx1FWzBYgRFjKGzc/jR8Htz6jggkpEWOHGkgTRehTgeKDyKYPPE+HDr4QC7AKC2caZTGvvPthLEg8LoiQGijGJonQp4LEBwsH0UF8dbB0eYGVhBiXLt4sykoG0ThODZkzNkGEXjTOkuEwOYR37OhULDwXrF1WYCWXr35UlCA71IAAjssiRIQTIfFZMhTtVBavdWRvo4U3DGUhz52/ZtplbVMiRidxVYQ+JUlij3ICsUF0EB9EKPCACCFGWElD0daQHJ0vuiZCjxLx+ZQTzO3gbs7OvCxWLwfKOs7NX17PYeakQ465qC6JEK5nm3K6nrB2Z04fFqtXAJ1Lt0yJMSSHrKILIvTIgPUT8ZWHsowGAjkdcsAq1l2EiHhCgJmtn4ivOiDCN09dzBvECanmVrGuIlRF1rOUEcz53r7whojPAgy5qYuUiLF2vXHqKEKPkuVFHmUAQRZYPgRcBLswIMYwGvupZu7pN6heIPjy82g8RRk4eeJlWr50UqyfpaDMbzpKBd3vlsllQLUbeRiN96km1MkSouolk/sp8776AWu4/8B8HqvYppok+OsgQtzdLlOG6Ke4nvWnvbAcJ/0zJvzRHe4wWe6e2i5CjzLO/2D1EHhpQkG168AaHp95K2tKIyTL54k2zwl9SgSoNf+D9Zuf+w795GxLKl0cIS4dPDoVmYzH6Ia+ENU88Vo0viQLsdUSos1EhzSB1bscBV4wwRfcJOdc8U1KUhlWYaMlRP5P+41C5PPnPzsh7qfjKKv48MHX9P6vPydNXu0eb5BF2CZCCLCt8wLlfrZPHaatW58gwX3wOb/60i4aH3+SPvjPz+nBw691Xu53j9YI0SZ3VFuA4n4KOdzTNlmSwrDFEmoLENHP61dPi/vZcOAJIcGPgM2Xv7mv81K/e6zcItogQm0BqvmfuJ8CgBD/+vt/FVfaaM4T/e6xUiFWLUJtAZ45PU0L7e+QIPSDeWKGNIbfPVYmxCpFqC1AJN9nZ14hQRgGpikI2Fz7tztaL+seKxFiVSLUEiDcjX/9l7+JO5sJQhp7XvwL2r1rIhaiRuTU7x5LF2IV0VGshGDnASFABGAkAirogpUYiJxq1p22orFEJVK2CLGF9Mfck0WAQl4yChG1pgGVRJki9CgRIKsVhQhQMEUGIWJ1/nNUUtH3FioHj5JibBGgUDq4jnA9aRT04zplX695KcsSwgLu5pwoAhSKIoNFDChxTQulDEuISChLgABpCBGgUAS4rlDmqIFPSUeHQik6RYH/8QL35LMLR+OW84JQFPFOyBPb6crVj7gv2RMN1MMV1rOmSBF6lDRl2so5GZUwp948SIJQNLGnpVdZAyG+QwW1UyxKhJjQ/gcxV8WjFlRK0YQyQWWNRq0pDAkaTSN/+IAMU5QI52ljAeVIcFda1vPTBcEIqDWFNWQug4JhgRivkWGKCMy0iNmaUK0HFISqwPWnsRwO17XRzWaB6RSFR8zuaEhFfHzrH2Q9oFA5mqkL44l80+4owrk+50S0pHj1pZ0kCFXz1J+M0datf8BdeQGXFCk3Y/WlJi1hi5IdklJBIGZx/ig1Gdx1Vz5Zpdt3/juak3y16S4MLwFjMpovw1PAigCheLBD1OKF99ink6HObaZE6BHTDcVFBTe0iT1BITR0k0YTW51GtnivEM2bPvAC7Zt6Rlz4gsDn89zeH3EDNcbcUlMihAVscU784s6PG3cRBTc/pbmFZRObYsagoOFYNPypZ0kwi+b8MCADZW0m5oQtYi7QRUIed/OmgDvq4SPnYgEa2q89BhfK0qVb8dg29mTkrkqZnyk054ceJYuAQ8qBCUv4BTHcUNUdrSmcO/8etRcuZ93IRAvZd8M8sIZMzyWkxC3NXE2T1xKiODs1b6LaUzRhHgjRvfb6P9JP3r6u25Q2M7Cy56KAAipA9rz4LelCZwC4+vA0GJ8hkvjYDzGgjOQRoReNZc6Jf/uDA41wQyGGb7/093n3YM8MSrDe+eUH8QUEt0rIDgyGhluKlEXm2tI8IjxLjCVKcJGaUJZmYFNLI8AS//PPrsfzDAnc5AMNo5hlbcgdepQIUZusIvSIuWtSE9IRtgiwF8xnbkcWGe6pbBGXHSx7glvKANtAZwrSZK0dZSXlEUp3PVhgowAVy1c/svZvqwsIemns9HyGMpBFhC1ilKZBfNiq2nXm5i9bfZGrm0RV81QXwHXM9CZ8yrCtexYRstSOP9x1K9i5eJM6PFelUkSI+YAANQyKtjXUzRO2iOGKQnyojHGdHTt/WDtXrxPlE49JC5FMaHzeWn1LdS0h2wq6DqxgHedarZm3uIEGoQ8URDDRsoY6IvSJURmDlfJNaNaEUrS6AiGaqmNtEgjSYHBOJY25oY4IWepGxzTXqasV7AU1rTJH1KeIuSFXhB4xlK1xp6g1dbaCCiT1IURJX+hRhDXkilDmgl1QmO3KhWtzjtNmNK7zY5yTOCL0iLFWEBFR160gLtbFC8abbVWKWm4l8NGwhljckLqfBUeErO5STbCCSxdvOWk1MDdEaweBD/N6hwBTOw9y8oSp6wWbkBcsw3XrLW6oQuyL80fo5AnZjpwLM2+IlRXbRp3wOI0GVtBLOachc8FrxoWBSgxsAX7s6FSc2ukvjUIaYSmKxAb8BrW5mD19iSZ3TTQiuGaC1pGpeOF2CrCGPo1I3qdZwtTeMU3oHwoB4K5nEnSca5/i1STi30eNahklck1uxKULIsy4LhjdEwIa0Ytm1JzQI0ZABndy12tEIQBTqIscLR+5Fzpeg2qNMnKwEqjhg8+PWZji04gAzaj1hNPECMrg4nB5FTcuyuMnfkomOHZ0b7zAOetNC4tMx8ef5K72zgz+z9uiCwxrEYXRYPU9swzwf2nI9mqjLGFqjgPzGNc39DRlBeF+ds6/kdvNw9o2jfVtmWkb7hDnKhrpikPDfjBMhB4xsv2uR9JwEZqYh8FlMdlxvIxlYpjnHJ95i4R0mP2TfBrikm4Z8YL03+p4FM2UFTQdPdZc35YZ3U7hTQXTDCatQU8OE2GqKwoBuh4RNWEF0fA47X1S+1KgUzeOHGBdy4hgwhqW0Tu1zqhtChgMdEkHidAjhiVEbstlTFhBiG92ZrjLjosb/w7C3M9N/R3tP7gQH/E9598f9btNEfc0Pe9WqV4RHMsRJR2UJ2wRY/X8vbsXnM0lmcoLInI8LITNqcBB0Atdy4e9zyg3wwYmRSN7SaaDG+q2p2c4pz6ym9MgSzg0iqOA6XU5mWsiIIELdlQOiVMCB5GNytkNqrIpAgnSpKPhkvr9T2zhnNSPy65ocNNMMGLUvhtX3v2QHf5PC46UFRzD34AWisJwmFHSff1P9IvQJ8bSC5ejonML+eeCaf1WdUV+e0Swxt9bXpdtrLSQIM1wDh18nnOaqiVdZ5AIR7K7u3usi3S6xdJ54PRb1W0rMer8yRK3RZMgzWjw2U/wtOH3ftMvwn2U9mqnrWD+thUoYEi7SenexEbN+8quWEIljfSmGc7hAyxruEln/SJM3eDl0EE3d1cy0bwpSUmkl5TpvoejzodAyxaiLAAeDvOz3aSzXhH6xJgPulorasIKcqtYdFaecNqGlP2ZJOscpXfpIJifBXS2LsReEaZaQVdTEyYWzSIYo9NvFdFTjtvK2d14XwVThNnTEqQZhIZn4qsHvSJMnQ+6agXVVt55bjC6tZxKYNND5hDqb+JYzCr2IVTVPsKjMOMmk+pBb3sLL+VFtM/hTSfxxqEqJEsfGU596CDwmsuXTsb/HoIdOKqWFzo3BPwenF+2ZVq88F48B5J2GJuZ1LSEqmwNPuq9tFfhInV9/aBaWc6NANrSDgI3jypWPCiLLWygUfaIBlBryh1NnQ9WEYWrAiUq7sJZjb3rCqWqzwbCl9zhZpRnwjkVX9gibIIAe0E/l7R5Xlp9aJlU6RIidyhBms0w9RLrTonQSz27YSIE7VPT8UqIYXc1m9ywKufrEqR5lCwinEw7u6nLWGDpBi3jSasP5YALF0uRkPzGgt481gQ3iokKPyMEaWQV/gbM4IyHL0qEqUl6NIVtKiqdoETHqQ/lggAQLmAs6MV6NARYlCh12V9xlFKs4Qa7eXqJjZ/MCZmogA3SB5z6UA6DLB+siRKlLrt3VnujlCDNBszrw8MXiJAVGZWOzMn7gLyeqZaDpoMZZa6oGIYEaRI0NDMBEaa6otLWoHyy3PRs8FYgQCnwTmDqZgdE6Bn6ZYImoypzsojQllwuutRJkIbvkooIHcOWEjLpSaMnwlR3VOaD9WHSkgCa2kmqyTB1My5zwgopIoDhW1Rkjyhvk/ezYOZtxyDC1Lj2xMR2EsxzrwARatQtFk7TgzTbmPWjnD3rhZphU04XbRKbGqQZG3uSdR4rMCNzwmJYHeGq5ZkC2FZY0dT9LLwJfmAmFRFhvbBtka20ShwNKzAjmKdIy4DV7scsWWKlaHqQZhQSHa2Iot2zzoU3StnDkEsT97PQyRMKjoL1kDYJUTYdHYyIsCLC1XJcM9uEKJuOPoqIsAFAiGjXYQMSpHkUEaGlmI5IY/kVlmHZEOnGcicJ0mwgIqyI+/d/N/LnRYgFC5LzNjk2hRR4byAirIh7Fc2LkMi3Yetr2XR0A4gwTDtJXAe36O+ZUxWubzrK1M2aWMKKWK34xmaDEGW5U4yIsMmo5lVV1pqiksbVTUe5Vl7c0YqwxQ1DkGbU7lBl4Opyp7U11mccsiyhJFfNk/aelhnBNN1FTpemt0qECFfTTrq/9jsSyqWKNAJn/42icLFVYnj3K9ZpEOFa+i8Td9Q0tl5wVZW5ubifBTP4dp8lQnFHzWPze1qVEF3bz4L5Ga9JYEYYiNqRqmxcsoZM3YQiwoqog3eBnafKrjd1KUgjIrScezVx8VW9aZlJfVeCNDoVM2HqWdEbIvPCcrGprw+S+WUK0YUgjYZmVlSeMEw7U6yhWdIiZ7Y11yq7zK3uQZqVT1hVQCv4sqX3m1Hc/iQ1nSg4TtlCrHMlzW1eKV6cmVAiTFWYq/V9gh5l1pvimqtrkIaZqL+NL2xLKCI0R91de7jKEGIZbRXrGqRh6iXEFxGhkBm0VSy63rSurRKZetk0JwzTzsabIcEZM7gUaS6j3rRu+1lAgNzIKL4oEWKCGKa94sbNT0nID2eJy9g4bzMRGyijzK1O1nB1lTUfhAA3BWbAjdRXiUtaGnXb/6Potop1WoXPtNrrwdBeEabOC6V7shnSOq3VFcwPi6w3rct+FkxjFagHWwY9OeqXS+VMfupSspYF1JsiclqEJa9DkAZ/I9NYrRu9fkuYuqxJXFIhjSLL3Gzfz4JZKQOdBeqb/vYWqS7plXc/JCEfVXdaK4MihWjzfhZXrrL0sUln/SJMDc5Iw1aBS1FlbjbvZ8G00pt01i/CgFLAGyD5QoGLEqLpMjcbgzT4e3SDMmCQCFPnheKS5oNz8bi0MWsRQrQxSBPw8uib5oNgUMvDgFIQl1TQpYh6U9uCNEuXbnFOe2TKt4VzUj/4j0uqIjtNfu9Mb+NtS5BGIzWx3P/EIBF2iIG4pNlp+g3MZJmbLUGaZb4egv4nBolwjRguaYdnegVhICaFaMOmo0xXNKABNdrD2uBfobTfJi5pZuR9SzBRb4q5pr/3mUrnhrgBMP/9pUFPPj7k5E40zlLab7x4k06eeIUEPVwuW9MF9aYQEmevQiU4RFsnd02sP66agL+6KBj05DARKpfUpxEgSioiLAaXUhRpoN4U6Yv9B+bXhYj/P57Dcd/Us+uPbeRclLNkENCQ5YKPj3gRXFKfRv3WbogYdyRByIPaxhvJblxPdVnKhb+XmaBfGvaDUVujdYiBREkFU8DSodlwndZSakRmg2E/GCVCdpRUAg167GiQq+kyCMgwC1c6NKJzxSgRgrmUn8cCbPIGj1mo26p5YTAIyDAN0MhsQ5oIA2LUkkrOUA8RoRvMLSxzTgtpQJVML5ztss+lnaCRJxEEJ+hE6TlmgUCqfjgiXCSGNXRtl9UiSQu1Nyk9UVeYVhCknsgRIQTIqqARayg0geDmZ1wr2CFGK1GOCNUvS0WsIY8JsXS1Zm6BfZ2nBjYBV4QBMdIVYg0F14EVZF7jATGsIOCKELBULdYwHe/p7STUkzdPs7drY+kF6IgwILGGRhgflxRFHUFEVGO3pYCY6IgQsNRdx110ykTyhPVEIyLKtoJAV4QBMTuySRVNdiRFYR8aecGQmIFMha4IAUvldd3csQxEZPUi3oymICsIsogwIIY1hAAlSDMccUnrA65jphUMSNMKgiwiBCy1o0GrBGkGMyYirAUQn0Zt9HHKQFYRBsQoxwFiDYU6g9X+TDrEzAv2k1WE4E1i1JTCEkqQ5lFkTaH9zM1rdXHTngsqvkHZgQC/SSktMMD7v/6cvvv6HpkH9TB98AXa8+K36Jt/+ET8/Ze/ub/+MwRuWkenSKgOiO/4ibfowcOvOadDgOzITT+PUT7Go/FxNLy0E9E3BPsRCINRm4mgXchYlMxfnC9u62khHbihzHhGGI0dlIO8IgR+NK5zTlycPyLd2QTrgRva5hdpIxjToRyYECGACP20k+COFrFNliCYAh7Jjp0/5J7eoYwR0V7yBGZ6wR+SGqRB7vDwkXOSxBesBNelRjQ0pBzBmF7yBGZ6gQAfRuPV1BOj/+jDB1/Tqy/tIkGwidPtX9Cv/v0O93RkBwIygCkRgvcpcUm91BOjaOm2yDVFdFAQbODc+ffiUksmHTJkBYGpOaHCoyRaOp52oswPBVvAPPC5vT/iTpPCaOynjIn5QZiaEypCYk5UZX4o2AAE2LsHBgNYwJAMYlqEADY9tc0bwBsAIQpCVeD606iKwcXaIcOYnBP2gvnhd4nhluINuB/dhSRQI5QNtmNjtrEHYTS+F40HZJiiRIg/FG0SW9HYmnYyAjWYnPpTz5IglAES8guLV7mnI/r/7Wh8SQVQlAgBO20BUCK0Y2K7BGqEwkEk9NTcL3RegnrLX1FBFClCALd0WzT2cE6GawBrKCvPhaJYfvdDOn7ipzovQSBmgQrEdIpiGKyyNiCpC6EoUCCvGQldicZzVDBliZC92iI+WYQoGCaDAEMynA8cRlkiBB4xE/lAhCiYIoMAEc+ABQypBIrIEw4jjMZh7smqmJbZbFUQBpJBgKAUC6goU4QgII2lHyJEIQ8ZBYjC7BUqkaKjo4PAfzBOC3JORnuBd375AT3zl38WjT8lQeCAraxfe/3HugIsPBI6iCpECALKIERZeSFwWLp4iw4f/SdufxgFBNimCqhKhCAgDSECrPWSyhphFKiEmeXvnLT+MqpIgKBKEYKANIWIyhqpNRUGgVpQjVI0RaUCBGWmKEbRjsYZnRcgdXH50kmprhHWl8Vl6PZeuQBB1ZZQEZCmRUSfzitXP4r7d0o/0+aiIqAZIuhWCBDYIkIQkKYQcQdcunQrbqArAZvmgUJsNOjtbZzMxBoBAptECALSFCIiYAjYYJ4IIW7d+gQJboObL5oyoSeMZgQUWCVAYMucsJ/ZaJwlTTA/RKmbzBPdBW6n5mr4XnI36i0C2yyhAkugsCgYq/NTFwUrcIc8d+E9SWM4Sg73E7Wgr1GO/SKKxFZLqPAoWQblkSbY++LtC2+IVXSAeHOWmbey7nUZUsm1oLrYagkVuIPBIvrReErjdfEHh6ANGg2LVawvsH7f+/55+uy//ocyEFAiwELaUpjCdkvYS5s0c4kKmSvWD9R+Yp/4HDs9ozPaLNUA2y1hL0E0MBlAqwz2PBGoueJqZB1375qQvKLFqMjnzA+WsgZf4D2hJ0ybakKdLKHCo4zzxPjFkTVsnzpMx47uJcEuklb0l/M0hA7J8vnfIOooQoDV+e1onKSMiBjtAa4nmi9ltHwKuJ9tYuwOZht1FaGiRck80aOMoAb17PwRCd5UgIF5H4DokP+zMv3Aoe4iBB4ld8BjlAOkNM6cmhYxloAh8cW/ihIBhlRjXBChokU5rSIQN7U4DIoP1g/lZ4vkAC6JEHhkwCrGv6grxn1Tz0hqIwdxZPr8NepEOduccz5FQA5Yv15cE6GiRQasIkA6Y/rA83Ry5uU4vSHwgNXDUjOIz9D2dyEl4gvIMVwVoaJNGRP8g0AQZ3bmFbGOQ4iXll28RctXPzThcq7/Wkoin4tUw8gnB9dFCDwy5KL2gkBO68gUHTr4fKOT/xAe9ndAiaBB4SkQ8UQLwpAcpgkiVHjReJs01ipyUYJsioUMV38bu5qGLV4vASWBl4AaQJNEqGiRofniIOCyQpSHonmkKyVysHYrn6x2hfeRqQDLIAJqkPgUTRShokUFilEBQUKY+/YmVrIOwR1YuuDWp3T7zt3Y0pXQAT2gBopP0WQRKnxKxOhTCcAyQpQY3tPbaXLnn1dmMWHhwtWvYpFBcCvdYSiaySGgBotPISLcwKMCAjhcIEJYSjXw/UT3sfr5+NiT8WNvYvi8E1Zs/fHdr2JBYWAFSSy66KhGiWLrBRFOBFyWqOHiE4bjUbIO7Yto/F6GsXGPkpsca2s8QVBMU9IYqE4Xu23jOpXk6gtu41ESyMEFVYcL3wbhwZsQqycUgkciSBGeQSQwkw+PElfrUPfYpAsQAZYgGjcocdmdLCkrAxGhWfzu2BeN3eSWKCEybPAK0QUkkU1jiAiLxadEjBCl131cF0JKhHa7eyx1C+kmISIsF1jG3d3hRWOy57mqCCkR2Gr3uNJ9TtzLkhAR2oNyX73uwOMx2iirU8dxGu3mhgMe44h2kWvdx71DqJj/B5aN5/Oxc8sfAAAAAElFTkSuQmCC",width:"30",height:"30",className:"d-inline-block align-top me-2",alt:"Star Wars Legion Tracker"}),"SW Legion Tracker"]}),(0,jt.jsx)(Yw.Toggle,{"aria-controls":"basic-navbar-nav"}),(0,jt.jsxs)(Yw.Collapse,{id:"basic-navbar-nav",children:[(0,jt.jsxs)(CE,{className:"me-auto",children:[(0,jt.jsx)(CE.Link,{as:vt,to:"/",children:"Home"}),e&&(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)(dC,{title:"Units & Armies",id:"units-dropdown",children:[(0,jt.jsx)(dC.Item,{as:vt,to:"/units",children:"My Units"}),(0,jt.jsx)(dC.Item,{as:vt,to:"/units/create",children:"Create Unit"}),(0,jt.jsx)(dC.Divider,{}),(0,jt.jsx)(dC.Item,{as:vt,to:"/armies",children:"My Armies"}),(0,jt.jsx)(dC.Item,{as:vt,to:"/armies/create",children:"Create Army"})]}),(0,jt.jsxs)(dC,{title:"Customization",id:"custom-dropdown",children:[(0,jt.jsx)(dC.Header,{children:"Keywords & Types"}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/units/keywords",children:[(0,jt.jsx)("i",{className:"bi bi-tag-fill me-2"}),"Custom Keywords"]}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/units/types",children:[(0,jt.jsx)("i",{className:"bi bi-diagram-3-fill me-2"}),"Custom Unit Types"]}),(0,jt.jsx)(dC.Divider,{}),(0,jt.jsx)(dC.Header,{children:"Abilities & Upgrades"}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/abilities",children:[(0,jt.jsx)("i",{className:"bi bi-stars me-2"}),"Abilities"]}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/upgrades",children:[(0,jt.jsx)("i",{className:"bi bi-arrow-up-circle-fill me-2"}),"Upgrade Cards"]})]}),(0,jt.jsxs)(dC,{title:"Battles",id:"battles-dropdown",children:[(0,jt.jsx)(dC.Item,{as:vt,to:"/battles",children:"My Battles"}),(0,jt.jsx)(dC.Item,{as:vt,to:"/battles/create",children:"Start New Battle"})]}),(0,jt.jsx)(CE.Link,{as:vt,to:"/references",children:"Reference"})]})]}),(0,jt.jsx)(CE,{children:e?(0,jt.jsxs)(dC,{title:(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)("i",{className:"bi bi-person-circle me-2"}),e.displayName||e.email]}),id:"user-dropdown",align:"end",children:[(0,jt.jsxs)(dC.Item,{as:vt,to:"/profile",children:[(0,jt.jsx)("i",{className:"bi bi-person-fill me-2"}),"Profile"]}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/profile/settings",children:[(0,jt.jsx)("i",{className:"bi bi-gear-fill me-2"}),"Settings"]}),(0,jt.jsxs)(dC.Item,{as:vt,to:"/profile/stats",children:[(0,jt.jsx)("i",{className:"bi bi-graph-up me-2"}),"Battle Statistics"]}),(0,jt.jsx)(dC.Divider,{}),(0,jt.jsxs)(dC.Item,{onClick:async()=>{try{await t(),n("/login")}catch(e){console.error("Failed to logout:",e)}},children:[(0,jt.jsx)("i",{className:"bi bi-box-arrow-right me-2"}),"Logout"]})]}):(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)(CE.Link,{as:vt,to:"/login",children:"Login"}),(0,jt.jsx)(CE.Link,{as:vt,to:"/register",children:"Register"})]})})]})]})})},fC=()=>(0,jt.jsx)("footer",{className:"bg-dark text-light py-3 mt-5",children:(0,jt.jsx)(Bt,{children:(0,jt.jsxs)("p",{className:"text-center mb-0",children:["Star Wars Legion Tracker \xa9 ",(new Date).getFullYear()]})})}),pC=["className","bsPrefix","as"],mC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,pC);return r=Ot(r,"card-body"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});mC.displayName="CardBody";const gC=mC,yC=["className","bsPrefix","as"],vC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,yC);return r=Ot(r,"card-footer"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});vC.displayName="CardFooter";const bC=vC,xC=["bsPrefix","className","as"],wC=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,as:a="div"}=t,o=i(t,xC);const l=Ot(r,"card-header"),u=(0,e.useMemo)(()=>({cardHeaderBsPrefix:l}),[l]);return(0,jt.jsx)(fE.Provider,{value:u,children:(0,jt.jsx)(a,c(c({ref:n},o),{},{className:Nt()(s,l)}))})});wC.displayName="CardHeader";const EC=wC,_C=["bsPrefix","className","variant","as"],SC=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,variant:s,as:a="img"}=e,o=i(e,_C);const l=Ot(n,"card-img");return(0,jt.jsx)(a,c({ref:t,className:Nt()(s?"".concat(l,"-").concat(s):l,r)},o))});SC.displayName="CardImg";const CC=SC,kC=["className","bsPrefix","as"],NC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,kC);return r=Ot(r,"card-img-overlay"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});NC.displayName="CardImgOverlay";const jC=NC,TC=["className","bsPrefix","as"],IC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="a"}=e,a=i(e,TC);return r=Ot(r,"card-link"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});IC.displayName="CardLink";const AC=IC,RC=["className","bsPrefix","as"],PC=xw("h6"),OC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=PC}=e,a=i(e,RC);return r=Ot(r,"card-subtitle"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});OC.displayName="CardSubtitle";const DC=OC,LC=["className","bsPrefix","as"],MC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="p"}=e,a=i(e,LC);return r=Ot(r,"card-text"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});MC.displayName="CardText";const UC=MC,FC=["className","bsPrefix","as"],BC=xw("h5"),VC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=BC}=e,a=i(e,FC);return r=Ot(r,"card-title"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});VC.displayName="CardTitle";const zC=VC,HC=["bsPrefix","className","bg","text","border","body","children","as"],WC=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,bg:s,text:a,border:o,body:l=!1,children:u,as:d="div"}=e,h=i(e,HC);const f=Ot(n,"card");return(0,jt.jsx)(d,c(c({ref:t},h),{},{className:Nt()(r,f,s&&"bg-".concat(s),a&&"text-".concat(a),o&&"border-".concat(o)),children:l?(0,jt.jsx)(gC,{children:u}):u}))});WC.displayName="Card";const KC=Object.assign(WC,{Img:CC,Title:zC,Subtitle:DC,Body:gC,Link:AC,Text:UC,Header:EC,Footer:bC,ImgOverlay:jC}),qC=["className","bsPrefix","as"],GC=xw("h4");GC.displayName="DivStyledAsH4";const YC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=GC}=e,a=i(e,qC);return r=Ot(r,"alert-heading"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});YC.displayName="AlertHeading";const QC=YC,XC=["className","bsPrefix","as"],JC=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=bE}=e,a=i(e,XC);return r=Ot(r,"alert-link"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});JC.displayName="AlertLink";const ZC=JC,$C=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],ek=e.forwardRef((e,t)=>{const n=ob(e,{show:"onClose"}),{bsPrefix:r,show:s=!0,closeLabel:a="Close alert",closeVariant:o,className:l,children:u,variant:d="primary",onClose:h,dismissible:f,transition:p=$x}=n,m=i(n,$C),g=Ot(r,"alert"),y=ux(e=>{h&&h(!1,e)}),v=!0===p?$x:p,b=(0,jt.jsxs)("div",c(c({role:"alert"},v?void 0:m),{},{ref:t,className:Nt()(l,g,d&&"".concat(g,"-").concat(d),f&&"".concat(g,"-dismissible")),children:[f&&(0,jt.jsx)(fw,{onClick:y,"aria-label":a,variant:o}),u]}));return v?(0,jt.jsx)(v,c(c({unmountOnExit:!0},m),{},{ref:void 0,in:s,children:b})):s?b:null});ek.displayName="Alert";const tk=Object.assign(ek,{Link:ZC,Heading:QC}),nk=["as","className","type","tooltip"],rk={type:cw().string,tooltip:cw().bool,as:cw().elementType},ik=e.forwardRef((e,t)=>{let{as:n="div",className:r,type:s="valid",tooltip:a=!1}=e,o=i(e,nk);return(0,jt.jsx)(n,c(c({},o),{},{ref:t,className:Nt()(r,"".concat(s,"-").concat(a?"tooltip":"feedback"))}))});ik.displayName="Feedback",ik.propTypes=rk;const sk=ik,ak=e.createContext({}),ok=["id","bsPrefix","className","type","isValid","isInvalid","as"],lk=e.forwardRef((t,n)=>{let{id:r,bsPrefix:s,className:a,type:o="checkbox",isValid:l=!1,isInvalid:u=!1,as:d="input"}=t,h=i(t,ok);const{controlId:f}=(0,e.useContext)(ak);return s=Ot(s,"form-check-input"),(0,jt.jsx)(d,c(c({},h),{},{ref:n,type:o,id:r||f,className:Nt()(a,s,l&&"is-valid",u&&"is-invalid")}))});lk.displayName="FormCheckInput";const ck=lk,uk=["bsPrefix","className","htmlFor"],dk=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,htmlFor:a}=t,o=i(t,uk);const{controlId:l}=(0,e.useContext)(ak);return r=Ot(r,"form-check-label"),(0,jt.jsx)("label",c(c({},o),{},{ref:n,htmlFor:a||l,className:Nt()(s,r)}))});dk.displayName="FormCheckLabel";const hk=dk;function fk(t,n){let r=0;return e.Children.map(t,t=>e.isValidElement(t)?n(t,r++):t)}const pk=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],mk=e.forwardRef((t,n)=>{let{id:r,bsPrefix:s,bsSwitchPrefix:a,inline:o=!1,reverse:l=!1,disabled:u=!1,isValid:d=!1,isInvalid:h=!1,feedbackTooltip:f=!1,feedback:p,feedbackType:m,className:g,style:y,title:v="",type:b="checkbox",label:x,children:w,as:E="input"}=t,_=i(t,pk);s=Ot(s,"form-check"),a=Ot(a,"form-switch");const{controlId:S}=(0,e.useContext)(ak),C=(0,e.useMemo)(()=>({controlId:r||S}),[S,r]),k=!w&&null!=x&&!1!==x||function(t,n){return e.Children.toArray(t).some(t=>e.isValidElement(t)&&t.type===n)}(w,hk),N=(0,jt.jsx)(ck,c(c({},_),{},{type:"switch"===b?"checkbox":b,ref:n,isValid:d,isInvalid:h,disabled:u,as:E}));return(0,jt.jsx)(ak.Provider,{value:C,children:(0,jt.jsx)("div",{style:y,className:Nt()(g,k&&s,o&&"".concat(s,"-inline"),l&&"".concat(s,"-reverse"),"switch"===b&&a),children:w||(0,jt.jsxs)(jt.Fragment,{children:[N,k&&(0,jt.jsx)(hk,{title:v,children:x}),p&&(0,jt.jsx)(sk,{type:m,tooltip:f,children:p})]})})})});mk.displayName="FormCheck";const gk=Object.assign(mk,{Input:ck,Label:hk}),yk=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],vk=e.forwardRef((t,n)=>{let{bsPrefix:r,type:s,size:a,htmlSize:o,id:l,className:u,isValid:d=!1,isInvalid:h=!1,plaintext:f,readOnly:p,as:m="input"}=t,g=i(t,yk);const{controlId:y}=(0,e.useContext)(ak);return r=Ot(r,"form-control"),(0,jt.jsx)(m,c(c({},g),{},{type:s,size:o,ref:n,readOnly:p,id:l||y,className:Nt()(u,f?"".concat(r,"-plaintext"):r,a&&"".concat(r,"-").concat(a),"color"===s&&"".concat(r,"-color"),d&&"is-valid",h&&"is-invalid")}))});vk.displayName="FormControl";const bk=Object.assign(vk,{Feedback:sk}),xk=["className","bsPrefix","as"],wk=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,xk);return r=Ot(r,"form-floating"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});wk.displayName="FormFloating";const Ek=wk,_k=["controlId","as"],Sk=e.forwardRef((t,n)=>{let{controlId:r,as:s="div"}=t,a=i(t,_k);const o=(0,e.useMemo)(()=>({controlId:r}),[r]);return(0,jt.jsx)(ak.Provider,{value:o,children:(0,jt.jsx)(s,c(c({},a),{},{ref:n}))})});Sk.displayName="FormGroup";const Ck=Sk,kk=["as","bsPrefix","className"],Nk=["className"];const jk=e.forwardRef((e,t)=>{const[n,{as:r="div",bsPrefix:s,spans:a}]=function(e){let{as:t,bsPrefix:n,className:r}=e,s=i(e,kk);n=Ot(n,"col");const a=Dt(),o=Lt(),l=[],u=[];return a.forEach(e=>{const t=s[e];let r,i,a;delete s[e],"object"===typeof t&&null!=t?({span:r,offset:i,order:a}=t):r=t;const c=e!==o?"-".concat(e):"";r&&l.push(!0===r?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(r)),null!=a&&u.push("order".concat(c,"-").concat(a)),null!=i&&u.push("offset".concat(c,"-").concat(i))}),[c(c({},s),{},{className:Nt()(r,...l,...u)}),{as:t,bsPrefix:n,spans:l}]}(e),{className:o}=n,l=i(n,Nk);return(0,jt.jsx)(r,c(c({},l),{},{ref:t,className:Nt()(o,!a.length&&s)}))});jk.displayName="Col";const Tk=jk,Ik=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Ak=e.forwardRef((t,n)=>{let{as:r="label",bsPrefix:s,column:a=!1,visuallyHidden:o=!1,className:l,htmlFor:u}=t,d=i(t,Ik);const{controlId:h}=(0,e.useContext)(ak);s=Ot(s,"form-label");let f="col-form-label";"string"===typeof a&&(f="".concat(f," ").concat(f,"-").concat(a));const p=Nt()(l,s,o&&"visually-hidden",a&&f);return u=u||h,a?(0,jt.jsx)(Tk,c({ref:n,as:"label",className:p,htmlFor:u},d)):(0,jt.jsx)(r,c({ref:n,className:p,htmlFor:u},d))});Ak.displayName="FormLabel";const Rk=Ak,Pk=["bsPrefix","className","id"],Ok=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,id:a}=t,o=i(t,Pk);const{controlId:l}=(0,e.useContext)(ak);return r=Ot(r,"form-range"),(0,jt.jsx)("input",c(c({},o),{},{type:"range",ref:n,className:Nt()(s,r),id:a||l}))});Ok.displayName="FormRange";const Dk=Ok,Lk=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],Mk=e.forwardRef((t,n)=>{let{bsPrefix:r,size:s,htmlSize:a,className:o,isValid:l=!1,isInvalid:u=!1,id:d}=t,h=i(t,Lk);const{controlId:f}=(0,e.useContext)(ak);return r=Ot(r,"form-select"),(0,jt.jsx)("select",c(c({},h),{},{size:a,ref:n,className:Nt()(o,r,s&&"".concat(r,"-").concat(s),l&&"is-valid",u&&"is-invalid"),id:d||f}))});Mk.displayName="FormSelect";const Uk=Mk,Fk=["bsPrefix","className","as","muted"],Bk=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s="small",muted:a}=e,o=i(e,Fk);return n=Ot(n,"form-text"),(0,jt.jsx)(s,c(c({},o),{},{ref:t,className:Nt()(r,n,a&&"text-muted")}))});Bk.displayName="FormText";const Vk=Bk,zk=e.forwardRef((e,t)=>(0,jt.jsx)(gk,c(c({},e),{},{ref:t,type:"switch"})));zk.displayName="Switch";const Hk=Object.assign(zk,{Input:gk.Input,Label:gk.Label}),Wk=["bsPrefix","className","children","controlId","label"],Kk=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,children:s,controlId:a,label:o}=e,l=i(e,Wk);return n=Ot(n,"form-floating"),(0,jt.jsxs)(Ck,c(c({ref:t,className:Nt()(r,n),controlId:a},l),{},{children:[s,(0,jt.jsx)("label",{htmlFor:a,children:o})]}))});Kk.displayName="FloatingLabel";const qk=Kk,Gk=["className","validated","as"],Yk={_ref:cw().any,validated:cw().bool,as:cw().elementType},Qk=e.forwardRef((e,t)=>{let{className:n,validated:r,as:s="form"}=e,a=i(e,Gk);return(0,jt.jsx)(s,c(c({},a),{},{ref:t,className:Nt()(n,r&&"was-validated")}))});Qk.displayName="Form",Qk.propTypes=Yk;const Xk=Object.assign(Qk,{Group:Ck,Control:bk,Floating:Ek,Check:gk,Switch:Hk,Label:Rk,Text:Vk,Range:Dk,Select:Uk,FloatingLabel:qk}),Jk=["bsPrefix","variant","animation","size","as","className"],Zk=e.forwardRef((e,t)=>{let{bsPrefix:n,variant:r,animation:s="border",size:a,as:o="div",className:l}=e,u=i(e,Jk);n=Ot(n,"spinner");const d="".concat(n,"-").concat(s);return(0,jt.jsx)(o,c(c({ref:t},u),{},{className:Nt()(l,d,a&&"".concat(d,"-").concat(a),r&&"text-".concat(r))}))});Zk.displayName="Spinner";const $k=Zk,eN=e=>{let{text:t="Loading..."}=e;return(0,jt.jsxs)("div",{className:"text-center my-4",children:[(0,jt.jsx)($k,{animation:"border",role:"status",children:(0,jt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,jt.jsx)("p",{className:"mt-2",children:t})]})},tN=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),{login:c}=eb(),u=pe();return o?(0,jt.jsx)(eN,{text:"Logging in..."}):(0,jt.jsx)(Bt,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"70vh"},children:(0,jt.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),s&&(0,jt.jsx)(tk,{variant:"danger",children:s}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{e.preventDefault();try{a(""),l(!0),await c(t,r),u("/")}catch(n){a("Failed to sign in: "+(n.message||"Please check your credentials and try again."))}finally{l(!1)}},children:[(0,jt.jsxs)(Xk.Group,{id:"email",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Email"}),(0,jt.jsx)(Xk.Control,{type:"email",value:t,onChange:e=>n(e.target.value),required:!0})]}),(0,jt.jsxs)(Xk.Group,{id:"password",className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Password"}),(0,jt.jsx)(Xk.Control,{type:"password",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,jt.jsx)(nC,{type:"submit",className:"w-100",disabled:o,children:"Log In"})]}),(0,jt.jsx)("div",{className:"w-100 text-center mt-3",children:(0,jt.jsx)(vt,{to:"/forgot-password",children:"Forgot Password?"})})]})}),(0,jt.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",(0,jt.jsx)(vt,{to:"/register",children:"Sign Up"})]})]})})},nN=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),{signup:f}=eb(),p=pe();return(0,jt.jsx)("div",{className:"d-flex justify-content-center",children:(0,jt.jsxs)(KC,{style:{width:"400px"},children:[(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h2",{className:"text-center mb-4",children:"Register"}),c&&(0,jt.jsx)(tk,{variant:"danger",children:c}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),s!==o)return u("Passwords do not match");if(!t.trim())return u("Display name is required");try{u(""),h(!0),await f(r,s,t),p("/")}catch(n){console.error("Registration error:",n),u("Failed to create an account: "+(n.message||"Unknown error"))}finally{h(!1)}},children:[(0,jt.jsxs)(Xk.Group,{id:"displayName",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Display Name"}),(0,jt.jsx)(Xk.Control,{type:"text",required:!0,value:t,onChange:e=>n(e.target.value),placeholder:"Enter your display name"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"This name will be visible to other users"})]}),(0,jt.jsxs)(Xk.Group,{id:"email",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Email"}),(0,jt.jsx)(Xk.Control,{type:"email",required:!0,value:r,onChange:e=>i(e.target.value),placeholder:"Enter your email"})]}),(0,jt.jsxs)(Xk.Group,{id:"password",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Password"}),(0,jt.jsx)(Xk.Control,{type:"password",required:!0,value:s,onChange:e=>a(e.target.value),placeholder:"Enter your password"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Password must be at least 6 characters"})]}),(0,jt.jsxs)(Xk.Group,{id:"password-confirm",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Password Confirmation"}),(0,jt.jsx)(Xk.Control,{type:"password",required:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Confirm your password"})]}),(0,jt.jsx)(nC,{disabled:d,className:"w-100",type:"submit",children:d?"Registering...":"Register"})]})]}),(0,jt.jsxs)(KC.Footer,{className:"text-center",children:["Already have an account? ",(0,jt.jsx)(vt,{to:"/login",children:"Log In"})]})]})})},rN=()=>{const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(""),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(!1),{resetPassword:c}=eb();return o?(0,jt.jsx)(eN,{text:"Sending password reset email..."}):(0,jt.jsx)(Bt,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"70vh"},children:(0,jt.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),r&&(0,jt.jsx)(tk,{variant:"danger",children:r}),s&&(0,jt.jsx)(tk,{variant:"success",children:s}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{e.preventDefault();try{a(""),i(""),l(!0),await c(t),a("Check your email for further instructions")}catch(n){i("Failed to reset password: "+(n.message||"Please check your email and try again."))}finally{l(!1)}},children:[(0,jt.jsxs)(Xk.Group,{id:"email",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Email"}),(0,jt.jsx)(Xk.Control,{type:"email",value:t,onChange:e=>n(e.target.value),required:!0})]}),(0,jt.jsx)(nC,{type:"submit",className:"w-100",disabled:o,children:"Reset Password"})]}),(0,jt.jsx)("div",{className:"w-100 text-center mt-3",children:(0,jt.jsx)(vt,{to:"/login",children:"Back to Login"})})]})}),(0,jt.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",(0,jt.jsx)(vt,{to:"/register",children:"Sign Up"})]})]})})},iN=()=>{const{currentUser:e,loading:t}=eb();return console.log("PrivateRoute rendering: currentUser =",!!e,"loading =",t),t?(0,jt.jsxs)("div",{className:"p-4 text-center",children:[(0,jt.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,jt.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,jt.jsx)("p",{className:"mt-2",children:"Authenticating user..."})]}):(console.log("PrivateRoute decision:",e?"Rendering outlet":"Redirecting to login"),e?(0,jt.jsx)(Oe,{}):(0,jt.jsx)(Pe,{to:"/login"}))},sN=n.p+"static/media/UnitsImage.d0c98f2a37b75c3d905c.png",aN=n.p+"static/media/ArmiesImage.dd2b8d285fb60960be76.png",oN=n.p+"static/media/BattleTrackerImage.5d183b18d84381bfcb42.png",lN=["bsPrefix","className","as"],cN=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,as:s="div"}=e,a=i(e,lN);const o=Ot(n,"row"),l=Dt(),u=Lt(),d="".concat(o,"-cols"),h=[];return l.forEach(e=>{const t=a[e];let n;delete a[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==u?"-".concat(e):"";null!=n&&h.push("".concat(d).concat(r,"-").concat(n))}),(0,jt.jsx)(s,c(c({ref:t},a),{},{className:Nt()(r,o,...h)}))});cN.displayName="Row";const uN=cN,dN=()=>{const{currentUser:e}=eb();return(0,jt.jsxs)(Bt,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsxs)("div",{className:"py-5 text-center",children:[(0,jt.jsx)("h1",{children:"Star Wars Legion Tracker"}),(0,jt.jsx)("p",{className:"lead",children:"Create, manage, and track your custom Star Wars Legion units, armies, and battles"}),!e&&(0,jt.jsxs)("div",{className:"d-flex justify-content-center gap-3 mt-4",children:[(0,jt.jsx)(nC,{as:vt,to:"/register",variant:"primary",size:"lg",children:"Sign Up"}),(0,jt.jsx)(nC,{as:vt,to:"/login",variant:"outline-primary",size:"lg",children:"Login"})]})]})})}),(0,jt.jsxs)(uN,{className:"mb-5",children:[(0,jt.jsx)(Tk,{md:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100",children:[(0,jt.jsx)(KC.Img,{variant:"top",src:sN}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(KC.Title,{children:"Custom Units"}),(0,jt.jsx)(KC.Text,{children:"Create and manage your custom units with detailed stat blocks, weapons, and keywords. Track proxy miniatures for each unit."}),e?(0,jt.jsx)(nC,{as:vt,to:"/units",variant:"primary",children:"View My Units"}):(0,jt.jsx)(nC,{as:vt,to:"/login",variant:"primary",children:"Login to Create Units"})]})]})}),(0,jt.jsx)(Tk,{md:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100",children:[(0,jt.jsx)(KC.Img,{variant:"top",src:aN}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(KC.Title,{children:"Army Builder"}),(0,jt.jsx)(KC.Text,{children:"Build custom armies using your units. Track points, balance, and army composition."}),e?(0,jt.jsx)(nC,{as:vt,to:"/armies",variant:"primary",children:"View My Armies"}):(0,jt.jsx)(nC,{as:vt,to:"/login",variant:"primary",children:"Login to Build Armies"})]})]})}),(0,jt.jsx)(Tk,{md:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100",children:[(0,jt.jsx)(KC.Img,{variant:"top",src:oN}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(KC.Title,{children:"Battle Tracker"}),(0,jt.jsx)(KC.Text,{children:"Track your Star Wars Legion battles in real-time. Manage unit activations, suppression, wounds, and more."}),e?(0,jt.jsx)(nC,{as:vt,to:"/battles",variant:"primary",children:"View My Battles"}):(0,jt.jsx)(nC,{as:vt,to:"/login",variant:"primary",children:"Login to Track Battles"})]})]})})]}),(0,jt.jsx)(uN,{className:"mb-5",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(KC,{className:"bg-light",children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h3",{children:"Features"}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)("ul",{children:[(0,jt.jsx)("li",{children:"Create custom units with detailed stat blocks"}),(0,jt.jsx)("li",{children:"Build balanced armies for your games"}),(0,jt.jsx)("li",{children:"Track miniature proxies for each unit"}),(0,jt.jsx)("li",{children:"Manage points costs and army composition"})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)("ul",{children:[(0,jt.jsx)("li",{children:"Real-time battle tracking"}),(0,jt.jsx)("li",{children:"Reference library for keywords and rules"}),(0,jt.jsx)("li",{children:"Battle statistics and history"}),(0,jt.jsx)("li",{children:"Mobile-friendly interface"})]})})]})]})})})})]})},hN=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],fN=["activeKey","getControlledId","getControllerId"],pN=["as"];function mN(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gN(t){let{active:n,eventKey:r,mountOnEnter:i,transition:s,unmountOnExit:a,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}=t,p=mN(t,hN);const m=(0,e.useContext)(Zw);if(!m)return[Object.assign({},p,{role:o}),{eventKey:r,isActive:n,mountOnEnter:i,transition:s,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}];const{activeKey:g,getControlledId:y,getControllerId:v}=m,b=mN(m,fN),x=nb(r);return[Object.assign({},p,{role:o,id:y(r),"aria-labelledby":v(r)}),{eventKey:r,isActive:null==n&&null!=x?nb(g)===x:n,transition:s||b.transition,mountOnEnter:null!=i?i:b.mountOnEnter,unmountOnExit:null!=a?a:b.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}]}const yN=e.forwardRef((e,t)=>{let{as:n="div"}=e,r=mN(e,pN);const[i,{isActive:s,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:u,onExited:d,mountOnEnter:h,unmountOnExit:f,transition:p=Ux}]=gN(r);return(0,jt.jsx)(Zw.Provider,{value:null,children:(0,jt.jsx)(rb.Provider,{value:null,children:(0,jt.jsx)(p,{in:s,onEnter:a,onEntering:o,onEntered:l,onExit:c,onExiting:u,onExited:d,mountOnEnter:h,unmountOnExit:f,children:(0,jt.jsx)(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})});yN.displayName="TabPanel";const vN=t=>{const{id:n,generateChildId:r,onSelect:i,activeKey:s,defaultActiveKey:a,transition:o,mountOnEnter:l,unmountOnExit:c,children:u}=t,[d,h]=kE(s,a,i),f=yS(n),p=(0,e.useMemo)(()=>r||((e,t)=>f?"".concat(f,"-").concat(t,"-").concat(e):null),[f,r]),m=(0,e.useMemo)(()=>({onSelect:h,activeKey:d,transition:o,mountOnEnter:l||!1,unmountOnExit:c||!1,getControlledId:e=>p(e,"tabpane"),getControllerId:e=>p(e,"tab")}),[h,d,o,l,c,p]);return(0,jt.jsx)(Zw.Provider,{value:m,children:(0,jt.jsx)(rb.Provider,{value:h||null,children:u})})};vN.Panel=yN;const bN=vN;function xN(e){return"boolean"===typeof e?e?$x:Ux:e}const wN=["transition"],EN=e=>{let{transition:t}=e,n=i(e,wN);return(0,jt.jsx)(bN,c(c({},n),{},{transition:xN(t)}))};EN.displayName="TabContainer";const _N=EN,SN=["className","bsPrefix","as"],CN=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,SN);return r=Ot(r,"tab-content"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});CN.displayName="TabContent";const kN=CN,NN=["bsPrefix","transition"],jN=["className","as"],TN=e.forwardRef((e,t)=>{let{bsPrefix:n,transition:r}=e,s=i(e,NN);const[a,{isActive:o,onEnter:l,onEntering:u,onEntered:d,onExit:h,onExiting:f,onExited:p,mountOnEnter:m,unmountOnExit:g,transition:y=$x}]=gN(c(c({},s),{},{transition:xN(r)})),{className:v,as:b="div"}=a,x=i(a,jN),w=Ot(n,"tab-pane");return(0,jt.jsx)(Zw.Provider,{value:null,children:(0,jt.jsx)(rb.Provider,{value:null,children:(0,jt.jsx)(y,{in:o,onEnter:l,onEntering:u,onEntered:d,onExit:h,onExiting:f,onExited:p,mountOnEnter:m,unmountOnExit:g,children:(0,jt.jsx)(b,c(c({},x),{},{ref:t,className:Nt()(v,w,o&&"active")}))})})})});TN.displayName="TabPane";const IN=TN,AN={eventKey:cw().oneOfType([cw().string,cw().number]),title:cw().node.isRequired,disabled:cw().bool,tabClassName:cw().string,tabAttrs:cw().object},RN=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};RN.propTypes=AN;const PN=Object.assign(RN,{Container:_N,Content:kN,Pane:IN}),ON=["className","bsPrefix","as"],DN=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="span"}=e,a=i(e,ON);return r=Ot(r,"input-group-text"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});DN.displayName="InputGroupText";const LN=DN,MN=["bsPrefix","size","hasValidation","className","as"],UN=e.forwardRef((t,n)=>{let{bsPrefix:r,size:s,hasValidation:a,className:o,as:l="div"}=t,u=i(t,MN);r=Ot(r,"input-group");const d=(0,e.useMemo)(()=>({}),[]);return(0,jt.jsx)(YS.Provider,{value:d,children:(0,jt.jsx)(l,c(c({ref:n},u),{},{className:Nt()(o,r,s&&"".concat(r,"-").concat(s),a&&"has-validation")}))})});UN.displayName="InputGroup";const FN=Object.assign(UN,{Text:LN,Radio:e=>(0,jt.jsx)(LN,{children:(0,jt.jsx)(ck,c({type:"radio"},e))}),Checkbox:e=>(0,jt.jsx)(LN,{children:(0,jt.jsx)(ck,c({type:"checkbox"},e))})}),BN=["bsPrefix","bg","pill","text","className","as"],VN=e.forwardRef((e,t)=>{let{bsPrefix:n,bg:r="primary",pill:s=!1,text:a,className:o,as:l="span"}=e,u=i(e,BN);const d=Ot(n,"badge");return(0,jt.jsx)(l,c(c({ref:t},u),{},{className:Nt()(o,d,s&&"rounded-pill",a&&"text-".concat(a),r&&"bg-".concat(r))}))});VN.displayName="Badge";const zN=VN,HN=Object.freeze({COMMAND:"command",CORPS:"corps",SPECIAL_FORCES:"special_forces",SUPPORT:"support",HEAVY:"heavy",OPERATIVE:"operative",AUXILIARY:"auxiliary",getDisplayName:function(e){switch(e){case this.COMMAND:return"Command";case this.CORPS:return"Corps";case this.SPECIAL_FORCES:return"Special Forces";case this.SUPPORT:return"Support";case this.HEAVY:return"Heavy";case this.OPERATIVE:return"Operative";case this.AUXILIARY:return"Auxiliary";default:return"Unknown"}}}),WN=Object.freeze({REPUBLIC:"republic",SEPARATIST:"separatist",REBEL:"rebel",EMPIRE:"empire",getDisplayName:function(e){switch(e){case this.REPUBLIC:return"Galactic Republic";case this.SEPARATIST:return"Separatist Alliance";case this.REBEL:return"Rebel Alliance";case this.EMPIRE:return"Galactic Empire";default:return"Unknown Faction"}},getColor:function(e){switch(e){case this.REPUBLIC:return"#a30000";case this.SEPARATIST:return"#0057b7";case this.REBEL:return"#ff4500";case this.EMPIRE:return"#2e2e2e";default:return"#6c757d"}}}),KN=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)("all"),[u,d]=(0,e.useState)("all"),[h,f]=(0,e.useState)(""),{currentUser:p}=eb();(0,e.useEffect)(()=>{p&&(async()=>{try{i(!0);const e=oy(xg(Xv,"users",p.uid,"units")),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));n(t),a("")}catch(e){console.error("Error fetching units:",e),a("Failed to fetch units. Please try again later.")}finally{i(!1)}})()},[p]);const m=t.filter(e=>("all"===o||e.faction===o)&&(("all"===u||e.type===u)&&!(h&&!e.name.toLowerCase().includes(h.toLowerCase()))));return r?(0,jt.jsx)(eN,{text:"Loading units..."}):(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(KC,{className:"mb-4",children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h5",{children:"Filter Units"}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:4,className:"mb-3",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Faction"}),(0,jt.jsxs)(Xk.Select,{value:o,onChange:e=>l(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Factions"}),(0,jt.jsx)("option",{value:WN.REPUBLIC,children:WN.getDisplayName(WN.REPUBLIC)}),(0,jt.jsx)("option",{value:WN.SEPARATIST,children:WN.getDisplayName(WN.SEPARATIST)}),(0,jt.jsx)("option",{value:WN.REBEL,children:WN.getDisplayName(WN.REBEL)}),(0,jt.jsx)("option",{value:WN.EMPIRE,children:WN.getDisplayName(WN.EMPIRE)})]})]})}),(0,jt.jsx)(Tk,{md:4,className:"mb-3",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Unit Type"}),(0,jt.jsxs)(Xk.Select,{value:u,onChange:e=>d(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Types"}),(0,jt.jsx)("option",{value:HN.COMMAND,children:HN.getDisplayName(HN.COMMAND)}),(0,jt.jsx)("option",{value:HN.CORPS,children:HN.getDisplayName(HN.CORPS)}),(0,jt.jsx)("option",{value:HN.SPECIAL_FORCES,children:HN.getDisplayName(HN.SPECIAL_FORCES)}),(0,jt.jsx)("option",{value:HN.SUPPORT,children:HN.getDisplayName(HN.SUPPORT)}),(0,jt.jsx)("option",{value:HN.HEAVY,children:HN.getDisplayName(HN.HEAVY)}),(0,jt.jsx)("option",{value:HN.OPERATIVE,children:HN.getDisplayName(HN.OPERATIVE)}),(0,jt.jsx)("option",{value:HN.AUXILIARY,children:HN.getDisplayName(HN.AUXILIARY)})]})]})}),(0,jt.jsx)(Tk,{md:4,className:"mb-3",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search unit name",value:h,onChange:e=>f(e.target.value)}),h&&(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>f(""),children:"Clear"})]})]})})]})]})})})}),s&&(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)("div",{className:"alert alert-danger",children:s})})}),0===t.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No units found"}),(0,jt.jsx)("p",{children:"You haven't created any units yet. Get started by creating your first unit!"}),(0,jt.jsx)(nC,{as:vt,to:"/units/create",variant:"primary",children:"Create Unit"})]})}):0===m.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No matching units"}),(0,jt.jsx)("p",{children:"No units match your current filters. Try adjusting your filters."}),(0,jt.jsx)(nC,{onClick:()=>{l("all"),d("all"),f("")},variant:"outline-primary",children:"Clear Filters"})]})}):(0,jt.jsx)(uN,{children:m.map(e=>(0,jt.jsx)(Tk,{md:6,lg:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"unit-card unit-type-".concat(e.type),children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center faction-".concat(e.faction),children:[(0,jt.jsx)("span",{children:e.name}),(0,jt.jsx)(zN,{bg:"secondary",children:HN.getDisplayName(e.type)})]}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Faction:"})," ",WN.getDisplayName(e.faction)]}),(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Points:"})," ",e.points||0]}),(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Keywords:"}),(0,jt.jsx)("br",{}),e.keywords&&e.keywords.length>0?e.keywords.map((e,t)=>(0,jt.jsx)(zN,{bg:"secondary",className:"keyword-badge",children:e},t)):(0,jt.jsx)("span",{className:"text-muted",children:"None"})]}),(0,jt.jsx)(vt,{to:"/units/".concat(e.id),className:"btn btn-primary btn-sm mt-2",children:"View Details"})]})]})},e.id))})]})},qN=["id","onSelect","transition","mountOnEnter","unmountOnExit","variant","children","activeKey"];function GN(t){let n;return function(t,n){let r=0;e.Children.forEach(t,t=>{e.isValidElement(t)&&n(t,r++)})}(t,e=>{null==n&&(n=e.props.eventKey)}),n}function YN(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:a}=e.props;return null==t?null:(0,jt.jsx)(gE,{as:"li",role:"presentation",children:(0,jt.jsx)(EE,c(c({as:"button",type:"button",eventKey:n,disabled:r,id:a,className:i},s),{},{children:t}))})}const QN=e=>{const t=ob(e,{activeKey:"onSelect"}),{id:n,onSelect:r,transition:s,mountOnEnter:a=!1,unmountOnExit:o=!1,variant:l="tabs",children:u,activeKey:d=GN(u)}=t,h=i(t,qN);return(0,jt.jsxs)(bN,{id:n,activeKey:d,onSelect:r,transition:xN(s),mountOnEnter:a,unmountOnExit:o,children:[(0,jt.jsx)(CE,c(c({id:n},h),{},{role:"tablist",as:"ul",variant:l,children:fk(u,YN)})),(0,jt.jsx)(kN,{children:fk(u,e=>{const t=c({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,jt.jsx)(IN,c({},t))})})]})};QN.displayName="Tabs";const XN=QN,JN=["bsPrefix","active","disabled","eventKey","className","variant","action","as"],ZN=e.forwardRef((e,t)=>{let{bsPrefix:n,active:r,disabled:s,eventKey:a,className:o,variant:l,action:u,as:d}=e,h=i(e,JN);n=Ot(n,"list-group-item");const[f,p]=iE(c({key:nb(a,h.href),active:r},h)),m=ux(e=>{if(s)return e.preventDefault(),void e.stopPropagation();f.onClick(e)});s&&void 0===h.tabIndex&&(h.tabIndex=-1,h["aria-disabled"]=!0);const g=d||(u?h.href?"a":"button":"div");return(0,jt.jsx)(g,c(c(c({ref:t},h),f),{},{onClick:m,className:Nt()(o,n,p.isActive&&"active",s&&"disabled",l&&"".concat(n,"-").concat(l),u&&"".concat(n,"-action"))}))});ZN.displayName="ListGroupItem";const $N=ZN,ej=["className","bsPrefix","variant","horizontal","numbered","as"],tj=e.forwardRef((e,t)=>{const n=ob(e,{activeKey:"onSelect"}),{className:r,bsPrefix:s,variant:a,horizontal:o,numbered:l,as:u="div"}=n,d=i(n,ej),h=Ot(s,"list-group");let f;return o&&(f=!0===o?"horizontal":"horizontal-".concat(o)),(0,jt.jsx)(dE,c(c({ref:t},d),{},{as:u,className:Nt()(r,h,a&&"".concat(h,"-").concat(a),f&&"".concat(h,"-").concat(f),l&&"".concat(h,"-numbered"))}))});tj.displayName="ListGroup";const nj=Object.assign(tj,{Item:$N}),rj=Object.freeze({WHITE:"white",RED:"red",getDisplayName:function(e){switch(e){case this.WHITE:return"White Defense Dice";case this.RED:return"Red Defense Dice";default:return"Unknown Dice"}},getColorClass:function(e){switch(e){case this.WHITE:return"defense-white";case this.RED:return"defense-red";default:return""}}}),ij={HEAVY_WEAPON:"heavy_weapon",PERSONNEL:"personnel",FORCE:"force",COMMAND:"command",HARDPOINT:"hardpoint",GEAR:"gear",GRENADES:"grenades",COMMS:"comms",PILOT:"pilot",TRAINING:"training",GENERATOR:"generator",ARMAMENT:"armament",SPECIALIST:"specialist",getDisplayName:e=>({heavy_weapon:"Heavy Weapon",personnel:"Personnel",force:"Force",command:"Command",hardpoint:"Hardpoint",gear:"Gear",grenades:"Grenades",comms:"Comms",pilot:"Pilot",training:"Training",generator:"Generator",armament:"Armament",specialist:"Specialist"}[e]||e),getDescription:e=>({heavy_weapon:"Add a heavy weapon to the unit",personnel:"Add additional personnel to the unit",force:"Force-sensitive upgrades and abilities",command:"Leadership and command abilities",hardpoint:"Vehicle or emplacement weapon systems",gear:"Equipment and tactical gear",grenades:"Explosive ordnance",comms:"Communication equipment",pilot:"Vehicle crew and pilot upgrades",training:"Special training and tactics",generator:"Shield generators and power systems",armament:"Additional armaments and weapons",specialist:"Specialized unit members with unique skills"}[e]||""),getBadgeColor:e=>({heavy_weapon:"danger",personnel:"primary",force:"info",command:"warning",hardpoint:"dark",gear:"secondary",grenades:"danger",comms:"info",pilot:"primary",training:"success",generator:"info",armament:"danger",specialist:"purple"}[e]||"secondary"),getIconClass:e=>({heavy_weapon:"bi-crosshair",personnel:"bi-people-fill",force:"bi-stars",command:"bi-flag-fill",hardpoint:"bi-bullseye",gear:"bi-tools",grenades:"bi-circle-fill",comms:"bi-broadcast",pilot:"bi-person-badge",training:"bi-book",generator:"bi-shield-fill-check",armament:"bi-hammer",specialist:"bi-award-fill"}[e]||"bi-box"),getAllTypes:()=>[ij.HEAVY_WEAPON,ij.PERSONNEL,ij.FORCE,ij.COMMAND,ij.HARDPOINT,ij.GEAR,ij.GRENADES,ij.COMMS,ij.PILOT,ij.TRAINING,ij.GENERATOR,ij.ARMAMENT,ij.SPECIALIST],shouldAddWeapons:e=>[ij.HEAVY_WEAPON,ij.HARDPOINT,ij.GRENADES,ij.ARMAMENT,ij.SPECIALIST].includes(e)},sj=ij;function aj(e,t){return Array.isArray(e)?e.includes(t):e===t}const oj=e.createContext({});oj.displayName="AccordionContext";const lj=oj,cj=["as","bsPrefix","className","children","eventKey"],uj=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:a,children:o,eventKey:l}=t,u=i(t,cj);const{activeEventKey:d}=(0,e.useContext)(lj);return s=Ot(s,"accordion-collapse"),(0,jt.jsx)(rx,c(c({ref:n,in:aj(d,l)},u),{},{className:Nt()(a,s),children:(0,jt.jsx)(r,{children:e.Children.only(o)})}))});uj.displayName="AccordionCollapse";const dj=uj,hj=e.createContext({eventKey:""});hj.displayName="AccordionItemContext";const fj=hj,pj=["as","bsPrefix","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],mj=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:a,onEnter:o,onEntering:l,onEntered:u,onExit:d,onExiting:h,onExited:f}=t,p=i(t,pj);s=Ot(s,"accordion-body");const{eventKey:m}=(0,e.useContext)(fj);return(0,jt.jsx)(dj,{eventKey:m,onEnter:o,onEntering:l,onEntered:u,onExit:d,onExiting:h,onExited:f,children:(0,jt.jsx)(r,c(c({ref:n},p),{},{className:Nt()(a,s)}))})});mj.displayName="AccordionBody";const gj=mj,yj=["as","bsPrefix","className","onClick"];const vj=e.forwardRef((t,n)=>{let{as:r="button",bsPrefix:s,className:a,onClick:o}=t,l=i(t,yj);s=Ot(s,"accordion-button");const{eventKey:u}=(0,e.useContext)(fj),d=function(t,n){const{activeEventKey:r,onSelect:i,alwaysOpen:s}=(0,e.useContext)(lj);return e=>{let a=t===r?null:t;s&&(a=Array.isArray(r)?r.includes(t)?r.filter(e=>e!==t):[...r,t]:[t]),null==i||i(a,e),null==n||n(e)}}(u,o),{activeEventKey:h}=(0,e.useContext)(lj);return"button"===r&&(l.type="button"),(0,jt.jsx)(r,c(c({ref:n,onClick:d},l),{},{"aria-expanded":Array.isArray(h)?h.includes(u):u===h,className:Nt()(a,s,!aj(h,u)&&"collapsed")}))});vj.displayName="AccordionButton";const bj=vj,xj=["as","aria-controls","bsPrefix","className","children","onClick"],wj=e.forwardRef((e,t)=>{let{as:n="h2","aria-controls":r,bsPrefix:s,className:a,children:o,onClick:l}=e,u=i(e,xj);return s=Ot(s,"accordion-header"),(0,jt.jsx)(n,c(c({ref:t},u),{},{className:Nt()(a,s),children:(0,jt.jsx)(bj,{onClick:l,"aria-controls":r,children:o})}))});wj.displayName="AccordionHeader";const Ej=wj,_j=["as","bsPrefix","className","eventKey"],Sj=e.forwardRef((t,n)=>{let{as:r="div",bsPrefix:s,className:a,eventKey:o}=t,l=i(t,_j);s=Ot(s,"accordion-item");const u=(0,e.useMemo)(()=>({eventKey:o}),[o]);return(0,jt.jsx)(fj.Provider,{value:u,children:(0,jt.jsx)(r,c(c({ref:n},l),{},{className:Nt()(a,s)}))})});Sj.displayName="AccordionItem";const Cj=Sj,kj=["as","activeKey","bsPrefix","className","onSelect","flush","alwaysOpen"],Nj=e.forwardRef((t,n)=>{const r=ob(t,{activeKey:"onSelect"}),{as:s="div",activeKey:a,bsPrefix:o,className:l,onSelect:u,flush:d,alwaysOpen:h}=r,f=i(r,kj),p=Ot(o,"accordion"),m=(0,e.useMemo)(()=>({activeEventKey:a,onSelect:u,alwaysOpen:h}),[a,u,h]);return(0,jt.jsx)(lj.Provider,{value:m,children:(0,jt.jsx)(s,c(c({ref:n},f),{},{className:Nt()(l,p,d&&"".concat(p,"-flush"))}))})});Nj.displayName="Accordion";const jj=Object.assign(Nj,{Button:bj,Collapse:dj,Item:Cj,Header:Ej,Body:gj}),Tj=Object.freeze({JUMP_1:"jump_1",JUMP_2:"jump_2",SCALE:"scale",SPEEDER_1:"speeder_1",SPEEDER_2:"speeder_2",RELENTLESS:"relentless",SCOUT_1:"scout_1",SCOUT_2:"scout_2",ARSENAL_2:"arsenal_2",SHARPSHOOTER_1:"sharpshooter_1",SHARPSHOOTER_2:"sharpshooter_2",PRECISE_1:"precise_1",PRECISE_2:"precise_2",LETHAL_1:"lethal_1",LETHAL_2:"lethal_2",ARMOR_1:"armor_1",ARMOR_2:"armor_2",ARMOR_3:"armor_3",IMPERVIOUS:"impervious",IMMUNE_PIERCE:"immune_pierce",DEFLECT:"deflect",BLOCK:"block",COVER_1:"cover_1",COVER_2:"cover_2",SHIELDED_1:"shielded_1",SHIELDED_2:"shielded_2",INSPIRE_1:"inspire_1",INSPIRE_2:"inspire_2",TACTICAL_1:"tactical_1",TACTICAL_2:"tactical_2",TARGET_1:"target_1",TARGET_2:"target_2",COORDINATE:"coordinate",AI_ATTACK:"ai_attack",AI_MOVE:"ai_move",SWARM_INSTINCT_ATTACK:"swarm_instinct_attack",SWARM_INSTINCT_MOVE:"swarm_instinct_move",CHARGE:"charge",GUARDIAN_1:"guardian_1",GUARDIAN_2:"guardian_2",GUARDIAN_3:"guardian_3",JEDI_HUNTER:"jedi_hunter",MASTER_OF_THE_FORCE_1:"master_of_the_force_1",GENERATOR_1:"generator_1",RELIABLE_1:"reliable_1",SENTINEL:"sentinel",UNSTOPPABLE:"unstoppable",FIRE_SUPPORT:"fire_support",MERCENARY_MOTIVATION:"mercenary_motivation",NEURAL_OVERRIDE:"neural_override",HIVE_MIND:"hive_mind",EXHAUST_SPOTTER_1:"exhaust_spotter_1",EXHAUST_TAKE_COVER_1:"exhaust_take_cover_1",getDisplayName:function(e){if(!e)return"";switch(e){case this.JUMP_1:return"Jump 1";case this.JUMP_2:return"Jump 2";case this.SPEEDER_1:return"Speeder 1";case this.SPEEDER_2:return"Speeder 2";case this.ARSENAL_2:return"Arsenal 2";case this.SHARPSHOOTER_1:return"Sharpshooter 1";case this.SHARPSHOOTER_2:return"Sharpshooter 2";case this.PRECISE_1:return"Precise 1";case this.PRECISE_2:return"Precise 2";case this.LETHAL_1:return"Lethal 1";case this.LETHAL_2:return"Lethal 2";case this.ARMOR_1:return"Armor 1";case this.ARMOR_2:return"Armor 2";case this.ARMOR_3:return"Armor 3";case this.IMMUNE_PIERCE:return"Immune: Pierce";case this.COVER_1:return"Cover 1";case this.COVER_2:return"Cover 2";case this.SHIELDED_1:return"Shielded 1";case this.SHIELDED_2:return"Shielded 2";case this.INSPIRE_1:return"Inspire 1";case this.INSPIRE_2:return"Inspire 2";case this.TACTICAL_1:return"Tactical 1";case this.TACTICAL_2:return"Tactical 2";case this.TARGET_1:return"Target 1";case this.TARGET_2:return"Target 2";case this.AI_ATTACK:return"AI: Attack";case this.AI_MOVE:return"AI: Move";case this.SWARM_INSTINCT_ATTACK:return"Swarm Instinct: Attack";case this.SWARM_INSTINCT_MOVE:return"Swarm Instinct: Move";case this.GUARDIAN_1:return"Guardian 1";case this.GUARDIAN_2:return"Guardian 2";case this.GUARDIAN_3:return"Guardian 3";case this.MASTER_OF_THE_FORCE_1:return"Master of the Force 1";case this.GENERATOR_1:return"Generator 1";case this.RELIABLE_1:return"Reliable 1";case this.EXHAUST_SPOTTER_1:return"Exhaust: Spotter 1";case this.EXHAUST_TAKE_COVER_1:return"Exhaust: Take Cover 1";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},getDescription:function(e){switch(e){case this.JUMP_1:case this.JUMP_2:return"This unit can pass over or end its movement on terrain that is height ".concat(e.split("_")[1]," or lower, measured from the unit's starting position.");case this.SCALE:return"This unit ignores difficult terrain, and when it performs a climb it may move a vertical distance up to Height 2.";case this.SPEEDER_1:case this.SPEEDER_2:return"This unit must make a compulsory free move action at the start of its activation. This move ignores terrain ".concat(e.split("_")[1]," or lower, and does not reduce the number of actions available to the unit.");case this.RELENTLESS:return"After this unit performs a move action, it may perform a free attack action. If it does, it may not take another attack action during its Activation, but can take other actions.";case this.SCOUT_1:case this.SCOUT_2:return"After setup, this unit can perform a speed-".concat(e.split("_")[1]," move.");case this.ARSENAL_2:return"This unit can add 2 of its weapons to the attack pool when taking an attack action.";case this.SHARPSHOOTER_1:case this.SHARPSHOOTER_2:return"During the \"Apply Dodge and Cover\" step of this unit's attack, reduce the defender's cover by ".concat(e.split("_")[1],".");case this.PRECISE_1:case this.PRECISE_2:return"This unit can reroll ".concat(e.split("_")[1]," additional dice when it spends an aim token.");case this.LETHAL_1:case this.LETHAL_2:return"While performing an attack, this unit can spend an aim token to reroll up to ".concat(e.split("_")[1]," additional attack dice.");case this.ARMOR_1:case this.ARMOR_2:case this.ARMOR_3:return'During the "Modify Attack Dice" step of an attack, this unit can cancel up to '.concat(e.split("_")[1]," hit result(s) produced by the attack roll.");case this.IMPERVIOUS:return"While this unit is defending, it rolls a number of additional defence dice equal to the Pierce x value of the attack pool.";case this.IMMUNE_PIERCE:return"This cannot be affected by the Pierce keyword from attacks targeting it.";case this.DEFLECT:return'While this unit is defending, if it spends a dodge token, it gains Surge To Deflect. Additionally, if the attack is ranged, the attacker suffers one wound for each surge result rolled by this unit during the "Roll Defense Dice" step.';case this.BLOCK:return"If this unit blocks and it spends a dodge token, its Surge Chart gains Surge to Defence.";case this.COVER_1:case this.COVER_2:return'During the "Apply Dodge and Cover" step of a ranged attack, this unit improves its cover by '.concat(e.split("_")[1],".");case this.SHIELDED_1:case this.SHIELDED_2:return"This unit has ".concat(e.split("_")[1]," shield token(s).");case this.INSPIRE_1:case this.INSPIRE_2:return'After this unit performs its "Rally" step, remove a total of up to '.concat(e.split("_")[1]," suppression token(s) from other friendly units at range 1\u20132.");case this.TACTICAL_1:case this.TACTICAL_2:return"This unit gains ".concat(e.split("_")[1]," aim token(s) each time it performs a standard move.");case this.TARGET_1:case this.TARGET_2:return"After this unit is issued an order, it gains ".concat(e.split("_")[1]," aim token(s).");case this.COORDINATE:return"After this unit is issued an order, it may issue an order to a friendly Unit at range 1.";case this.AI_ATTACK:return"During the Perform Actions step of this unit's activation, it must perform an attack action if it does not have a faceup order token.";case this.AI_MOVE:return"During the Perform Actions step of this unit's activation, it must perform a move action if it does not have a faceup order token.";case this.SWARM_INSTINCT_ATTACK:return"During the Perform Actions step of this unit's activation, it must perform an attack action if it does not have a faceup order token.";case this.SWARM_INSTINCT_MOVE:return"During the Perform Actions step of this unit's activation, it must perform a move action if it does not have a faceup order token.";case this.CHARGE:return"After this unit performs a move action to start a melee with an enemy unit, it may perform a free melee attack action against that unit. If it does, it may not take another attack action during its Activation, but can take other actions.";case this.GUARDIAN_1:case this.GUARDIAN_2:case this.GUARDIAN_3:return"This unit can protect a friendly trooper within range 1 and line of sight during a ranged attack targeting that trooper by cancelling up to ".concat(e.split("_")[1]," hit result(s). For each hit cancelled, this unit rolls its defence dice and suffers 1 wound for each blank result.");case this.JEDI_HUNTER:return"While this unit is attacking a unit with a Force Upgrade Slot, its Surge Chart gains Surge to Crit.";case this.MASTER_OF_THE_FORCE_1:return"At the end of this unit's activation, it may ready up to 1 exhausted Force upgrade cards.";case this.GENERATOR_1:return"During the End Phase, flip 1 inactive shield token.";case this.RELIABLE_1:return"This unit gains 1 surge token at the start of every round.";case this.SENTINEL:return"This unit can spend a standby token after an enemy unit attacks, moves, or performs an action and is at range 1\u20133, rather than at range 1\u20132.";case this.UNSTOPPABLE:return"This unit ignores suppression and can move through difficult terrain without penalty.";case this.FIRE_SUPPORT:return"When another friendly unit performs a ranged attack, if you have a faceup order token, each mini in your unit may add an eligible weapon to the attack pool. If you do, flip your order token facedown. Limit 1 Fire Support per attack pool.";case this.MERCENARY_MOTIVATION:return"At the start of the Command Phase, you may choose to pay this unit by spending 1 aim or dodge token from your commander. If paid, this unit gains Independent Orders and Ruthless 1 until the end of the round. If unpaid, this unit gains Insubordinate until the end of the round.";case this.NEURAL_OVERRIDE:return"At the start of this unit's activation, you may have the Cyborg Overseer suffer 1 wound to ignore this unit's AI keyword until the end of the activation.";case this.HIVE_MIND:return"At the start of the Command Phase, you may choose one Unit with the Swarm Instincts keyword. This unit can issue an order to the chosen unit regardless of range.";case this.EXHAUST_SPOTTER_1:return"As a card action, this unit can choose up to 1 friendly units at range 1. Each chosen unit gains one aim token.";case this.EXHAUST_TAKE_COVER_1:return"As a card action, this unit can choose up to 1 friendly units at range 1. Each chosen unit gains one dodge token.";default:return"No description available."}},getAllKeywords:function(){return{movement:[this.JUMP_1,this.JUMP_2,this.SCALE,this.SPEEDER_1,this.SPEEDER_2,this.RELENTLESS,this.SCOUT_1,this.SCOUT_2],attack:[this.ARSENAL_2,this.SHARPSHOOTER_1,this.SHARPSHOOTER_2,this.PRECISE_1,this.PRECISE_2,this.LETHAL_1,this.LETHAL_2],defense:[this.ARMOR_1,this.ARMOR_2,this.ARMOR_3,this.IMPERVIOUS,this.IMMUNE_PIERCE,this.DEFLECT,this.BLOCK,this.COVER_1,this.COVER_2,this.SHIELDED_1,this.SHIELDED_2],command:[this.INSPIRE_1,this.INSPIRE_2,this.TACTICAL_1,this.TACTICAL_2,this.TARGET_1,this.TARGET_2,this.COORDINATE],ai:[this.AI_ATTACK,this.AI_MOVE,this.SWARM_INSTINCT_ATTACK,this.SWARM_INSTINCT_MOVE],force:[this.CHARGE,this.GUARDIAN_1,this.GUARDIAN_2,this.GUARDIAN_3,this.JEDI_HUNTER,this.MASTER_OF_THE_FORCE_1],special:[this.GENERATOR_1,this.RELIABLE_1,this.SENTINEL,this.UNSTOPPABLE,this.FIRE_SUPPORT],custom:[this.MERCENARY_MOTIVATION,this.NEURAL_OVERRIDE,this.HIVE_MIND,this.EXHAUST_SPOTTER_1,this.EXHAUST_TAKE_COVER_1]}},getAllKeywordsFlat:function(){return[...this.getAllKeywords().movement,...this.getAllKeywords().attack,...this.getAllKeywords().defense,...this.getAllKeywords().command,...this.getAllKeywords().ai,...this.getAllKeywords().force,...this.getAllKeywords().special,...this.getAllKeywords().custom]}}),Ij=t=>{let{selectedKeywords:n=[],onChange:r}=t;const[i,s]=(0,e.useState)(""),[a,o]=(0,e.useState)([]),[l,u]=(0,e.useState)(!0),{currentUser:d}=eb(),h=Tj.getAllKeywords();(0,e.useEffect)(()=>{f()},[d]);const f=async()=>{if(d)try{const e=xg(Xv,"users",d.uid,"customKeywords"),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));o(t)}catch(e){console.error("Error fetching custom keywords:",e)}finally{u(!1)}else u(!1)},p=e=>{n.includes(e)?r(n.filter(t=>t!==e)):r([...n,e])},m=e=>{const t="custom:".concat(e);n.includes(t)?r(n.filter(e=>e!==t)):r([...n,t])},g=""===i.trim()?h:Object.keys(h).reduce((e,t)=>{const n=h[t].filter(e=>Tj.getDisplayName(e).toLowerCase().includes(i.toLowerCase()));return n.length>0&&(e[t]=n),e},{}),y=""===i.trim()?a:a.filter(e=>{var t;return e.name.toLowerCase().includes(i.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))}),v=e=>{if(e.startsWith("custom:")){const t=e.replace("custom:",""),n=a.find(e=>e.id===t);return n?n.name:e}return Tj.getDisplayName(e)};return(0,jt.jsxs)("div",{children:[(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("h5",{children:"Selected Keywords"}),(0,jt.jsx)("div",{children:0===n.length?(0,jt.jsx)("p",{className:"text-muted",children:"No keywords selected"}):n.map(e=>(0,jt.jsxs)(zN,{bg:e.startsWith("custom:")?"info":"primary",className:"me-2 mb-2 p-2",style:{cursor:"pointer"},onClick:()=>{e.startsWith("custom:")?m(e.replace("custom:","")):p(e)},children:[v(e),e.startsWith("custom:")&&(0,jt.jsx)("span",{className:"ms-1",title:"Custom Keyword",children:"\u2605"})," ","\xd7"]},e))})]}),(0,jt.jsx)(Xk.Group,{className:"mb-3",children:(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search keywords...",value:i,onChange:e=>s(e.target.value)})}),(0,jt.jsxs)(jj,{className:"mb-3",children:[Object.entries(g).map(e=>{let[t,r]=e;return(0,jt.jsxs)(jj.Item,{eventKey:t,children:[(0,jt.jsxs)(jj.Header,{children:[t.charAt(0).toUpperCase()+t.slice(1)," Keywords",(0,jt.jsx)(zN,{bg:"secondary",className:"ms-2",children:"System"})]}),(0,jt.jsx)(jj.Body,{className:"p-0",children:(0,jt.jsx)(nj,{variant:"flush",children:r.map(e=>(0,jt.jsxs)(nj.Item,{action:!0,active:n.includes(e),onClick:()=>p(e),children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("strong",{children:Tj.getDisplayName(e)}),(0,jt.jsx)(nC,{variant:n.includes(e)?"danger":"primary",size:"sm",children:n.includes(e)?"Remove":"Add"})]}),(0,jt.jsx)("small",{className:"text-muted d-block mt-1",children:Tj.getDescription(e)})]},e))})})]},t)}),y.length>0&&(0,jt.jsxs)(jj.Item,{eventKey:"custom",children:[(0,jt.jsxs)(jj.Header,{children:["Custom Keywords",(0,jt.jsx)(zN,{bg:"info",className:"ms-2",children:y.length})]}),(0,jt.jsx)(jj.Body,{className:"p-0",children:l?(0,jt.jsx)("div",{className:"p-3 text-center",children:(0,jt.jsx)("span",{children:"Loading custom keywords..."})}):(0,jt.jsx)(nj,{variant:"flush",children:y.map(e=>{const t="custom:".concat(e.id);return(0,jt.jsxs)(nj.Item,{action:!0,active:n.includes(t),onClick:()=>m(e.id),children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsxs)("strong",{children:[e.name,(0,jt.jsx)("span",{className:"ms-2",title:"Custom Keyword",children:"\u2605"})]}),e.category&&(0,jt.jsx)(zN,{bg:"secondary",className:"ms-2",children:e.category})]}),(0,jt.jsx)(nC,{variant:n.includes(t)?"danger":"primary",size:"sm",children:n.includes(t)?"Remove":"Add"})]}),(0,jt.jsx)("small",{className:"text-muted d-block mt-1",children:e.description}),e.timing&&(0,jt.jsxs)("small",{className:"text-info d-block mt-1",children:["Timing: ",e.timing]})]},e.id)})})})]})]}),!l&&0===a.length&&(0,jt.jsxs)(tk,{variant:"info",children:[(0,jt.jsx)("p",{className:"mb-2",children:"You haven't created any custom keywords yet."}),(0,jt.jsx)(nC,{variant:"outline-primary",size:"sm",onClick:()=>window.open("/units/keywords/create","_blank"),children:"Create Custom Keyword"})]})]})};var Aj;function Rj(e){if((!Aj&&0!==Aj||e)&&Ob){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Aj=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Aj}function Pj(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)(()=>()=>n.current(),[])}const Oj=["className","bsPrefix","as"],Dj=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,Oj);return r=Ot(r,"modal-body"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});Dj.displayName="ModalBody";const Lj=Dj,Mj=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],Uj=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,contentClassName:s,centered:a,size:o,fullscreen:l,children:u,scrollable:d}=e,h=i(e,Mj);n=Ot(n,"modal");const f="".concat(n,"-dialog"),p="string"===typeof l?"".concat(n,"-fullscreen-").concat(l):"".concat(n,"-fullscreen");return(0,jt.jsx)("div",c(c({},h),{},{ref:t,className:Nt()(f,r,o&&"".concat(n,"-").concat(o),a&&"".concat(f,"-centered"),d&&"".concat(f,"-scrollable"),l&&p),children:(0,jt.jsx)("div",{className:Nt()("".concat(n,"-content"),s),children:u})}))});Uj.displayName="ModalDialog";const Fj=Uj,Bj=["className","bsPrefix","as"],Vj=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s="div"}=e,a=i(e,Bj);return r=Ot(r,"modal-footer"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});Vj.displayName="ModalFooter";const zj=Vj,Hj=["bsPrefix","className","closeLabel","closeButton"],Wj=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,closeLabel:s="Close",closeButton:a=!1}=e,o=i(e,Hj);return n=Ot(n,"modal-header"),(0,jt.jsx)(gw,c(c({ref:t},o),{},{className:Nt()(r,n),closeLabel:s,closeButton:a}))});Wj.displayName="ModalHeader";const Kj=Wj,qj=["className","bsPrefix","as"],Gj=xw("h4"),Yj=e.forwardRef((e,t)=>{let{className:n,bsPrefix:r,as:s=Gj}=e,a=i(e,qj);return r=Ot(r,"modal-title"),(0,jt.jsx)(s,c({ref:t,className:Nt()(n,r)},a))});Yj.displayName="ModalTitle";const Qj=Yj,Xj=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Jj(e){return(0,jt.jsx)($x,c(c({},e),{},{timeout:null}))}function Zj(e){return(0,jt.jsx)($x,c(c({},e),{},{timeout:null}))}const $j=e.forwardRef((t,n)=>{let{bsPrefix:r,className:s,style:a,dialogClassName:o,contentClassName:l,children:u,dialogAs:d=Fj,"data-bs-theme":h,"aria-labelledby":f,"aria-describedby":p,"aria-label":m,show:g=!1,animation:y=!0,backdrop:v=!0,keyboard:b=!0,onEscapeKeyDown:x,onShow:w,onHide:E,container:_,autoFocus:S=!0,enforceFocus:C=!0,restoreFocus:k=!0,restoreFocusOptions:N,onEntered:j,onExit:T,onExiting:I,onEnter:A,onEntering:R,onExited:P,backdropClassName:O,manager:D}=t,L=i(t,Xj);const[M,U]=(0,e.useState)({}),[F,B]=(0,e.useState)(!1),V=(0,e.useRef)(!1),z=(0,e.useRef)(!1),H=(0,e.useRef)(null),[W,K]=(0,e.useState)(null),q=Yb(n,K),G=ux(E),Y=Mt();r=Ot(r,"modal");const Q=(0,e.useMemo)(()=>({onHide:G}),[G]);function X(){return D||Pw({isRTL:Y})}function J(e){if(!Ob)return;const t=X().getScrollbarWidth()>0,n=e.scrollHeight>pb(e).documentElement.clientHeight;U({paddingRight:t&&!n?Rj():void 0,paddingLeft:!t&&n?Rj():void 0})}const Z=ux(()=>{W&&J(W.dialog)});Pj(()=>{Fb(window,"resize",Z),null==H.current||H.current()});const $=()=>{V.current=!0},ee=e=>{V.current&&W&&e.target===W.dialog&&(z.current=!0),V.current=!1},te=()=>{B(!0),H.current=zb(W.dialog,()=>{B(!1)})},ne=e=>{"static"!==v?z.current||e.target!==e.currentTarget?z.current=!1:null==E||E():(e=>{e.target===e.currentTarget&&te()})(e)},re=(0,e.useCallback)(e=>(0,jt.jsx)("div",c(c({},e),{},{className:Nt()("".concat(r,"-backdrop"),O,!y&&"show")})),[y,O,r]),ie=c(c({},a),M);ie.display="block";return(0,jt.jsx)(ow.Provider,{value:Q,children:(0,jt.jsx)(Qx,{show:g,ref:q,backdrop:v,container:_,keyboard:!0,autoFocus:S,enforceFocus:C,restoreFocus:k,restoreFocusOptions:N,onEscapeKeyDown:e=>{b?null==x||x(e):(e.preventDefault(),"static"===v&&te())},onShow:w,onHide:E,onEnter:(e,t)=>{e&&J(e),null==A||A(e,t)},onEntering:(e,t)=>{null==R||R(e,t),Ub(window,"resize",Z)},onEntered:j,onExit:e=>{null==H.current||H.current(),null==T||T(e)},onExiting:I,onExited:e=>{e&&(e.style.display=""),null==P||P(e),Fb(window,"resize",Z)},manager:X(),transition:y?Jj:void 0,backdropTransition:y?Zj:void 0,renderBackdrop:re,renderDialog:e=>(0,jt.jsx)("div",c(c({role:"dialog"},e),{},{style:ie,className:Nt()(s,r,F&&"".concat(r,"-static"),!y&&"show"),onClick:v?ne:void 0,onMouseUp:ee,"data-bs-theme":h,"aria-label":m,"aria-labelledby":f,"aria-describedby":p,children:(0,jt.jsx)(d,c(c({},L),{},{onMouseDown:$,className:o,contentClassName:l,children:u}))}))})})});$j.displayName="Modal";const eT=Object.assign($j,{Body:Lj,Header:Kj,Title:Qj,Footer:zj,Dialog:Fj,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),tT=Object.freeze({MELEE:"melee",RANGE_1:"range_1",RANGE_1_2:"range_1_2",RANGE_1_3:"range_1_3",RANGE_2_3:"range_2_3",RANGE_2_4:"range_2_4",RANGE_3_5:"range_3_5",RANGE_1_4:"range_1_4",RANGE_1_5:"range_1_5",RANGE_3_4:"range_3_4",RANGE_4_5:"range_4_5",getDisplayName:function(e){switch(e){case this.MELEE:return"Melee";case this.RANGE_1:return"Range 1";case this.RANGE_1_2:return"Range 1-2";case this.RANGE_1_3:return"Range 1-3";case this.RANGE_2_3:return"Range 2-3";case this.RANGE_2_4:return"Range 2-4";case this.RANGE_3_5:return"Range 3-5";case this.RANGE_1_4:return"Range 1-4";case this.RANGE_1_5:return"Range 1-5";case this.RANGE_3_4:return"Range 3-4";case this.RANGE_4_5:return"Range 4-5";default:return"Unknown Range"}}}),nT=Object.freeze({RED:"red",BLACK:"black",WHITE:"white",getDisplayName:function(e){switch(e){case this.RED:return"Red Attack Dice";case this.BLACK:return"Black Attack Dice";case this.WHITE:return"White Attack Dice";default:return"Unknown Dice"}},getColorClass:function(e){switch(e){case this.RED:return"attack-red";case this.BLACK:return"attack-black";case this.WHITE:return"attack-white";default:return""}}}),rT=Object.freeze({IMPACT_1:"impact_1",IMPACT_2:"impact_2",IMPACT_3:"impact_3",PIERCE_1:"pierce_1",PIERCE_2:"pierce_2",PIERCE_3:"pierce_3",CRITICAL_1:"critical_1",CRITICAL_2:"critical_2",ION_1:"ion_1",ION_2:"ion_2",BLAST:"blast",SUPPRESSIVE:"suppressive",FIXED_FRONT:"fixed_front",FIXED_SIDES:"fixed_sides",FIXED_REAR:"fixed_rear",SPRAY:"spray",HIGH_VELOCITY:"high_velocity",EXHAUST:"exhaust",CYCLE:"cycle",LIMITED:"limited",VERSATILE:"versatile",getDisplayName:function(e){switch(e){case this.IMPACT_1:return"Impact 1";case this.IMPACT_2:return"Impact 2";case this.IMPACT_3:return"Impact 3";case this.PIERCE_1:return"Pierce 1";case this.PIERCE_2:return"Pierce 2";case this.PIERCE_3:return"Pierce 3";case this.CRITICAL_1:return"Critical 1";case this.CRITICAL_2:return"Critical 2";case this.ION_1:return"Ion 1";case this.ION_2:return"Ion 2";case this.BLAST:return"Blast";case this.SUPPRESSIVE:return"Suppressive";case this.FIXED_FRONT:return"Fixed: Front";case this.FIXED_SIDES:return"Fixed: Sides";case this.FIXED_REAR:return"Fixed: Rear";case this.SPRAY:return"Spray";case this.HIGH_VELOCITY:return"High Velocity";case this.EXHAUST:return"Exhaust";case this.CYCLE:return"Cycle";case this.LIMITED:return"Limited";case this.VERSATILE:return"Versatile";default:return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}},getDescription:function(e){switch(e){case this.IMPACT_1:case this.IMPACT_2:case this.IMPACT_3:return"While attacking a unit that has Armor, change up to ".concat(e.split("_")[1]," Hit results to Critical Hit results.");case this.PIERCE_1:case this.PIERCE_2:case this.PIERCE_3:return"When attacking, ignore up to ".concat(e.split("_")[1]," Block results.");case this.CRITICAL_1:case this.CRITICAL_2:return"When attacking, convert up to ".concat(e.split("_")[1]," Hit results to Critical Hit results.");case this.ION_1:case this.ION_2:return"When attacking a vehicle or droid trooper, add ".concat(e.split("_")[1]," Suppression token(s) to the target.");case this.BLAST:return"Ignore cover when attacking.";case this.SUPPRESSIVE:return"Add 1 suppression token to the target unit.";case this.FIXED_FRONT:return"The weapon can only be used in the front firing arc.";case this.FIXED_SIDES:return"The weapon can only be used in the side firing arcs.";case this.FIXED_REAR:return"The weapon can only be used in the rear firing arc.";case this.SPRAY:return"Add 1 hit per mini in the defender that does not have a wound.";case this.HIGH_VELOCITY:return"When attacking, the defender cannot spend dodge tokens.";case this.EXHAUST:return"After using this weapon, flip this card. It cannot be used again until flipped back.";case this.CYCLE:return"After using this weapon, place a cycle token on it. It cannot be used again until the token is removed.";case this.LIMITED:return"This weapon can only be used once per game.";case this.VERSATILE:return"This weapon can be used for both melee and ranged attacks.";default:return"No description available."}},getAllKeywords:function(){return{impact:[this.IMPACT_1,this.IMPACT_2,this.IMPACT_3],pierce:[this.PIERCE_1,this.PIERCE_2,this.PIERCE_3],critical:[this.CRITICAL_1,this.CRITICAL_2],ion:[this.ION_1,this.ION_2],fixed:[this.FIXED_FRONT,this.FIXED_SIDES,this.FIXED_REAR],special:[this.BLAST,this.SUPPRESSIVE,this.SPRAY,this.HIGH_VELOCITY],usage:[this.EXHAUST,this.CYCLE,this.LIMITED,this.VERSATILE]}},getAllKeywordsFlat:function(){return[this.IMPACT_1,this.IMPACT_2,this.IMPACT_3,this.PIERCE_1,this.PIERCE_2,this.PIERCE_3,this.CRITICAL_1,this.CRITICAL_2,this.ION_1,this.ION_2,this.BLAST,this.SUPPRESSIVE,this.FIXED_FRONT,this.FIXED_SIDES,this.FIXED_REAR,this.SPRAY,this.HIGH_VELOCITY,this.EXHAUST,this.CYCLE,this.LIMITED,this.VERSATILE]}});var iT,sT=new Uint8Array(16);function aT(){if(!iT&&!(iT="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return iT(sT)}const oT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const lT=function(e){return"string"===typeof e&&oT.test(e)};for(var cT=[],uT=0;uT<256;++uT)cT.push((uT+256).toString(16).substr(1));const dT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(cT[e[t+0]]+cT[e[t+1]]+cT[e[t+2]]+cT[e[t+3]]+"-"+cT[e[t+4]]+cT[e[t+5]]+"-"+cT[e[t+6]]+cT[e[t+7]]+"-"+cT[e[t+8]]+cT[e[t+9]]+"-"+cT[e[t+10]]+cT[e[t+11]]+cT[e[t+12]]+cT[e[t+13]]+cT[e[t+14]]+cT[e[t+15]]).toLowerCase();if(!lT(n))throw TypeError("Stringified UUID is invalid");return n};const hT=function(e,t,n){var r=(e=e||{}).random||(e.rng||aT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return dT(r)},fT=t=>{let{weapons:n=[],onChange:r}=t;const[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(null),[l,u]=(0,e.useState)({id:"",name:"",range:tT.MELEE,dice:{[nT.RED]:0,[nT.BLACK]:0,[nT.WHITE]:0},keywords:[]}),d=e=>{const{name:t,value:n}=e.target;u(e=>c(c({},e),{},{[t]:n}))},h=(e,t)=>{const n=parseInt(t,10)||0;u(t=>c(c({},t),{},{dice:c(c({},t.dice),{},{[e]:n})}))},f=e=>{u(t=>{const n=t.keywords.includes(e)?t.keywords.filter(t=>t!==e):[...t.keywords,e];return c(c({},t),{},{keywords:n})})};return(0,jt.jsxs)("div",{className:"weapon-selector",children:[(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,jt.jsx)("h5",{children:"Weapons"}),(0,jt.jsx)(nC,{variant:"primary",onClick:()=>{o(null),u({id:hT(),name:"",range:tT.MELEE,dice:{[nT.RED]:0,[nT.BLACK]:0,[nT.WHITE]:0},keywords:[]}),s(!0)},children:"Add Weapon"})]}),0===n.length?(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{className:"text-center",children:(0,jt.jsx)("p",{className:"text-muted mb-0",children:"No weapons added yet"})})}):(0,jt.jsx)(nj,{children:n.map((e,t)=>(0,jt.jsxs)(nj.Item,{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{className:"ms-2 me-auto",children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsx)("div",{children:(0,jt.jsxs)("small",{className:"text-muted",children:[tT.getDisplayName(e.range)," |",e.dice[nT.RED]>0&&(0,jt.jsxs)("span",{className:"attack-red mx-1",children:[e.dice[nT.RED],"R"]}),e.dice[nT.BLACK]>0&&(0,jt.jsxs)("span",{className:"attack-black mx-1",children:[e.dice[nT.BLACK],"B"]}),e.dice[nT.WHITE]>0&&(0,jt.jsxs)("span",{className:"attack-white mx-1",children:[e.dice[nT.WHITE],"W"]})]})}),(0,jt.jsx)("div",{className:"mt-1",children:e.keywords.map((e,t)=>(0,jt.jsx)(zN,{bg:"info",className:"me-1 mb-1",children:rT.getDisplayName(e)},t))})]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{variant:"outline-secondary",size:"sm",className:"me-2",onClick:()=>(e=>{o(e),u(c({},n[e])),s(!0)})(t),children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(e=>{const t=[...n];t.splice(e,1),r(t)})(t),children:"Delete"})]})]},e.id||t))})]}),(0,jt.jsxs)(eT,{show:i,onHide:()=>s(!1),size:"lg",children:[(0,jt.jsx)(eT.Header,{closeButton:!0,children:(0,jt.jsx)(eT.Title,{children:null!==a?"Edit Weapon":"Add Weapon"})}),(0,jt.jsx)(eT.Body,{children:(0,jt.jsxs)(Xk,{children:[(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Weapon Name"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"name",value:l.name,onChange:d,placeholder:"Enter weapon name",required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Range"}),(0,jt.jsx)(Xk.Select,{name:"range",value:l.range,onChange:d,children:Object.keys(tT).filter(e=>"string"===typeof tT[e]).map(e=>(0,jt.jsx)("option",{value:tT[e],children:tT.getDisplayName(tT[e])},e))})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Attack Dice"}),(0,jt.jsxs)(uN,{children:[(0,jt.jsxs)(Tk,{md:4,children:[(0,jt.jsx)(Xk.Label,{className:"text-danger",children:"Red Dice"}),(0,jt.jsx)(Xk.Control,{type:"number",min:"0",max:"5",value:l.dice[nT.RED],onChange:e=>h(nT.RED,e.target.value)})]}),(0,jt.jsxs)(Tk,{md:4,children:[(0,jt.jsx)(Xk.Label,{className:"text-dark",children:"Black Dice"}),(0,jt.jsx)(Xk.Control,{type:"number",min:"0",max:"5",value:l.dice[nT.BLACK],onChange:e=>h(nT.BLACK,e.target.value)})]}),(0,jt.jsxs)(Tk,{md:4,children:[(0,jt.jsx)(Xk.Label,{className:"text-secondary",children:"White Dice"}),(0,jt.jsx)(Xk.Control,{type:"number",min:"0",max:"5",value:l.dice[nT.WHITE],onChange:e=>h(nT.WHITE,e.target.value)})]})]})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Keywords"}),(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"p-2",children:[(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Selected Keywords:"}),0===l.keywords.length?(0,jt.jsx)("span",{className:"text-muted ms-2",children:"None"}):(0,jt.jsx)("div",{className:"mt-1",children:l.keywords.map((e,t)=>(0,jt.jsxs)(zN,{bg:"info",className:"me-1 mb-1 p-2",style:{cursor:"pointer"},onClick:()=>f(e),children:[rT.getDisplayName(e)," \xd7"]},t))})]}),(0,jt.jsx)(jj,{children:Object.entries(rT.getAllKeywords()).map(e=>{let[t,n]=e;return(0,jt.jsxs)(jj.Item,{eventKey:t,children:[(0,jt.jsxs)(jj.Header,{children:[t.charAt(0).toUpperCase()+t.slice(1)," Keywords"]}),(0,jt.jsx)(jj.Body,{className:"p-0",children:(0,jt.jsx)(nj,{variant:"flush",children:n.map(e=>(0,jt.jsx)(nj.Item,{action:!0,active:l.keywords.includes(e),onClick:()=>f(e),className:"py-2",children:rT.getDisplayName(e)},e))})})]},t)})})]})})]})]})}),(0,jt.jsxs)(eT.Footer,{children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>s(!1),children:"Cancel"}),(0,jt.jsx)(nC,{variant:"primary",onClick:()=>{if(!l.name.trim())return void alert("Weapon name is required");if(l.dice[nT.RED]+l.dice[nT.BLACK]+l.dice[nT.WHITE]<=0)return void alert("Weapon must have at least one attack die");const e=[...n];null!==a?e[a]=l:e.push(l),r(e),s(!1)},children:"Save Weapon"})]})]})]})},pT=()=>{var t,n,r;const{unitId:i}=ge(),s=pe(),{currentUser:a}=eb(),[o,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)(!!i),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[g,y]=(0,e.useState)("basic"),[v,b]=(0,e.useState)([]),[x,w]=(0,e.useState)([]),[E,_]=(0,e.useState)({name:"",faction:WN.REPUBLIC,type:HN.CORPS,points:0,wounds:1,courage:1,speed:2,defense:rj.WHITE,minModelCount:1,currentModelCount:1,maxModelCount:10,keywords:[],weapons:[],abilities:[],upgradeSlots:[],miniatures:"",notes:""}),[S,C]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{try{if(i&&a){d(!0);const e=wg(Xv,"users",a.uid,"units",i),t=await _y(e);if(t.exists()){const e=t.data();_(c(c({},e),{},{keywords:e.keywords||[],weapons:e.weapons||[],abilities:e.abilities||[],upgradeSlots:e.upgradeSlots||[],minModelCount:e.minModelCount||1,currentModelCount:e.currentModelCount||e.minModelCount||1,maxModelCount:e.maxModelCount||10}))}else f("Unit not found")}}catch(e){console.error("Error fetching unit:",e),f("Failed to fetch unit details. Please try again later.")}finally{d(!1)}})()},[a,i]),(0,e.useEffect)(()=>{(async()=>{if(a)try{const e=xg(Xv,"users",a.uid,"abilities"),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));b(t);const n=xg(Xv,"users",a.uid,"upgradeCards"),r=(await Cy(n)).docs.map(e=>c({id:e.id},e.data()));w(r)}catch(e){console.error("Error fetching options:",e)}})()},[a]);const k=e=>{const{name:t,value:n}=e.target;if(["points","wounds","courage","speed","minModelCount","currentModelCount","maxModelCount"].includes(t)){const e=parseInt(n,10);_(n=>c(c({},n),{},{[t]:isNaN(e)?0:e}))}else _(e=>c(c({},e),{},{[t]:n}))},N=(e,t,n)=>{_(r=>{const i=[...r.upgradeSlots];return i[e]=c(c({},i[e]),{},{[t]:"maxCount"===t?parseInt(n)||1:n}),c(c({},r),{},{upgradeSlots:i})})},j=()=>{var e;let t=E.points||0;return null===(e=E.upgradeSlots)||void 0===e||e.forEach(e=>{var n;null===(n=e.equippedUpgrades)||void 0===n||n.forEach(e=>{const n=x.find(t=>t.id===e);n&&(t+=n.pointsCost||0)})}),t};return u?(0,jt.jsx)(eN,{text:"Loading unit data..."}):o?(0,jt.jsx)(eN,{text:i?"Updating unit...":"Creating unit..."}):(0,jt.jsxs)(Xk,{noValidate:!0,validated:S,onSubmit:async e=>{e.preventDefault();if(!1===e.currentTarget.checkValidity())return e.stopPropagation(),void C(!0);if(E.minModelCount<1)f("Minimum model count must be at least 1");else if(E.currentModelCount<E.minModelCount)f("Current model count cannot be less than minimum model count");else if(E.maxModelCount<E.minModelCount)f("Maximum model count cannot be less than minimum model count");else try{if(l(!0),f(""),!a)throw new Error("You must be logged in to create a unit");const e=c(c({},E),{},{userId:a.uid,updatedAt:Ry(),totalPoints:j()});if(i){const t=wg(Xv,"users",a.uid,"units",i);await Ny(t,e),m("Unit updated successfully!"),setTimeout(()=>{s("/units/".concat(i))},1500)}else{e.createdAt=Ry();const t=await Ty(xg(Xv,"users",a.uid,"units"),e);m("Unit created successfully!"),_({name:"",faction:WN.REPUBLIC,type:HN.CORPS,points:0,wounds:1,courage:1,speed:2,defense:rj.WHITE,minModelCount:1,currentModelCount:1,maxModelCount:10,keywords:[],weapons:[],abilities:[],upgradeSlots:[],miniatures:"",notes:""}),setTimeout(()=>{s("/units/".concat(t.id))},1500)}}catch(t){console.error("Error saving unit:",t),f("Failed to save unit: ".concat(t.message))}finally{l(!1)}},children:[h&&(0,jt.jsx)(tk,{variant:"danger",children:h}),p&&(0,jt.jsx)(tk,{variant:"success",children:p}),(0,jt.jsxs)(XN,{activeKey:g,onSelect:e=>y(e),className:"mb-4",fill:!0,children:[(0,jt.jsx)(PN,{eventKey:"basic",title:"Basic Info",children:(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Unit Name"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"text",name:"name",value:E.name,onChange:k,placeholder:"Enter unit name"}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please enter a unit name."})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Faction"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"faction",value:E.faction,onChange:k,children:[(0,jt.jsx)("option",{value:WN.REPUBLIC,children:WN.getDisplayName(WN.REPUBLIC)}),(0,jt.jsx)("option",{value:WN.SEPARATIST,children:WN.getDisplayName(WN.SEPARATIST)}),(0,jt.jsx)("option",{value:WN.REBEL,children:WN.getDisplayName(WN.REBEL)}),(0,jt.jsx)("option",{value:WN.EMPIRE,children:WN.getDisplayName(WN.EMPIRE)})]})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Unit Type"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"type",value:E.type,onChange:k,children:[(0,jt.jsx)("option",{value:HN.COMMAND,children:HN.getDisplayName(HN.COMMAND)}),(0,jt.jsx)("option",{value:HN.CORPS,children:HN.getDisplayName(HN.CORPS)}),(0,jt.jsx)("option",{value:HN.SPECIAL_FORCES,children:HN.getDisplayName(HN.SPECIAL_FORCES)}),(0,jt.jsx)("option",{value:HN.SUPPORT,children:HN.getDisplayName(HN.SUPPORT)}),(0,jt.jsx)("option",{value:HN.HEAVY,children:HN.getDisplayName(HN.HEAVY)}),(0,jt.jsx)("option",{value:HN.OPERATIVE,children:HN.getDisplayName(HN.OPERATIVE)}),(0,jt.jsx)("option",{value:HN.AUXILIARY,children:HN.getDisplayName(HN.AUXILIARY)})]})]})})]}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Base Points Cost"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"number",name:"points",value:E.points,onChange:k,min:"0",max:"500"}),(0,jt.jsxs)(Xk.Text,{className:"text-muted",children:["Total: ",j()," pts"]})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Wounds"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"number",name:"wounds",value:E.wounds,onChange:k,min:"1",max:"20"})]})}),(0,jt.jsx)(Tk,{md:2,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Courage"}),(0,jt.jsx)(Xk.Control,{type:"number",name:"courage",value:E.courage,onChange:k,min:"0",max:"5"})]})}),(0,jt.jsx)(Tk,{md:2,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Speed"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"number",name:"speed",value:E.speed,onChange:k,min:"0",max:"3"})]})}),(0,jt.jsx)(Tk,{md:2,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Defense"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"defense",value:E.defense,onChange:k,children:[(0,jt.jsx)("option",{value:rj.WHITE,children:"White"}),(0,jt.jsx)("option",{value:rj.RED,children:"Red"})]})]})})]}),(0,jt.jsxs)(KC,{className:"mt-3",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Model Count"})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Minimum Models*"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"number",name:"minModelCount",value:E.minModelCount,onChange:k,min:"1",max:"20"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Unit must have at least this many models"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Current Models*"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"number",name:"currentModelCount",value:E.currentModelCount,onChange:k,min:E.minModelCount,max:E.maxModelCount}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Default number of models"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Maximum Models"}),(0,jt.jsx)(Xk.Control,{type:"number",name:"maxModelCount",value:E.maxModelCount,onChange:k,min:E.minModelCount,max:"20"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Unit cannot exceed this many models"})]})})]})})]})]})})}),(0,jt.jsx)(PN,{eventKey:"keywords",title:"Keywords",children:(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(Ij,{selectedKeywords:E.keywords,onChange:e=>{_(t=>c(c({},t),{},{keywords:e}))}})})})}),(0,jt.jsx)(PN,{eventKey:"weapons",title:"Weapons",children:(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(fT,{weapons:E.weapons,onChange:e=>{_(t=>c(c({},t),{},{weapons:e}))}})})})}),(0,jt.jsx)(PN,{eventKey:"abilities",title:"Abilities (".concat((null===(t=E.abilities)||void 0===t?void 0:t.length)||0,")"),children:(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("h5",{className:"mb-3",children:"Unit Abilities"}),0===v.length?(0,jt.jsx)(tk,{variant:"info",children:"No abilities available. Create abilities first in the Abilities section."}):(0,jt.jsx)(nj,{children:v.map(e=>{var t,n,r;return(0,jt.jsx)(nj.Item,{action:!0,active:null===(t=E.abilities)||void 0===t?void 0:t.includes(e.id),onClick:()=>{return t=e.id,void _(e=>{const n=e.abilities||[];return n.includes(t)?c(c({},e),{},{abilities:n.filter(e=>e!==t)}):c(c({},e),{},{abilities:[...n,t]})});var t},children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsx)("div",{className:"small text-muted",children:e.description}),e.rulesText&&(0,jt.jsx)("div",{className:"small mt-1",children:e.rulesText})]}),(0,jt.jsx)(zN,{bg:null!==(n=E.abilities)&&void 0!==n&&n.includes(e.id)?"success":"secondary",children:null!==(r=E.abilities)&&void 0!==r&&r.includes(e.id)?"Selected":"Select"})]})},e.id)})})]})})}),(0,jt.jsx)(PN,{eventKey:"upgrades",title:"Upgrade Slots (".concat((null===(n=E.upgradeSlots)||void 0===n?void 0:n.length)||0,")"),children:(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,jt.jsx)("h5",{className:"mb-0",children:"Upgrade Slots"}),(0,jt.jsx)(nC,{variant:"primary",onClick:()=>{_(e=>c(c({},e),{},{upgradeSlots:[...e.upgradeSlots,{type:sj.GEAR,maxCount:1,equippedUpgrades:[]}]}))},children:"Add Upgrade Slot"})]}),0===(null===(r=E.upgradeSlots)||void 0===r?void 0:r.length)?(0,jt.jsx)(tk,{variant:"info",children:"No upgrade slots configured. Add upgrade slots to allow this unit to equip upgrades."}):(0,jt.jsx)(nj,{children:E.upgradeSlots.map((e,t)=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-2",children:[(0,jt.jsx)(Xk.Label,{children:"Upgrade Type"}),(0,jt.jsx)(Xk.Select,{value:e.type,onChange:e=>N(t,"type",e.target.value),children:sj.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:sj.getDisplayName(e)},e))})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{className:"mb-2",children:[(0,jt.jsx)(Xk.Label,{children:"Max Count"}),(0,jt.jsx)(Xk.Control,{type:"number",value:e.maxCount,onChange:e=>N(t,"maxCount",e.target.value),min:"1",max:"5"})]})}),(0,jt.jsx)(Tk,{md:3,className:"d-flex align-items-end",children:(0,jt.jsx)(nC,{variant:"outline-danger",onClick:()=>(e=>{_(t=>c(c({},t),{},{upgradeSlots:t.upgradeSlots.filter((t,n)=>n!==e)}))})(t),className:"w-100 mb-2",children:"Remove Slot"})})]})},t))})]})})}),(0,jt.jsx)(PN,{eventKey:"miniatures",title:"Miniatures",children:(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Miniature Proxy Information"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"miniatures",value:E.miniatures,onChange:k,placeholder:"Enter the miniature(s) used for this unit...",rows:5}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Describe what miniatures are used to represent this unit on the battlefield."})]})})})}),(0,jt.jsx)(PN,{eventKey:"notes",title:"Notes",children:(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Additional Notes"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"notes",value:E.notes,onChange:k,placeholder:"Enter any additional notes about this unit...",rows:5})]})})})})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>s("/units"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",children:i?"Update Unit":"Create Unit"})]})]})},mT=t=>{let{unitId:n}=t;const[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)(!0),[p,m]=(0,e.useState)(""),[g,y]=(0,e.useState)(!1),{currentUser:v}=eb(),b=pe();(0,e.useEffect)(()=>{v&&n&&(async()=>{try{f(!0);const r=wg(Xv,"users",v.uid,"units",n),s=await _y(r);if(s.exists()){var e,t;const n=c({id:s.id},s.data());if(i(n),(null===(e=n.abilities)||void 0===e?void 0:e.length)>0){const e=xg(Xv,"users",v.uid,"abilities"),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data())).filter(e=>n.abilities.includes(e.id));a(t)}const r=[];if(null===(t=n.upgradeSlots)||void 0===t||t.forEach(e=>{e.equippedUpgrades&&r.push(...e.equippedUpgrades)}),r.length>0){const e=xg(Xv,"users",v.uid,"upgradeCards"),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data())).filter(e=>r.includes(e.id));l(t)}const o=xg(Xv,"users",v.uid,"customKeywords"),u=(await Cy(o)).docs.map(e=>c({id:e.id},e.data()));d(u)}else m("Unit not found")}catch(r){console.error("Error fetching unit:",r),m("Failed to fetch unit details. Please try again later.")}finally{f(!1)}})()},[v,n]);const x=async()=>{if(g)try{f(!0),await jy(wg(Xv,"users",v.uid,"units",n)),b("/units")}catch(e){console.error("Error deleting unit:",e),m("Failed to delete unit. Please try again later."),f(!1)}else y(!0)},w=e=>{if(e.startsWith("custom:")){const t=e.replace("custom:",""),n=u.find(e=>e.id===t);return n?(0,jt.jsxs)(jt.Fragment,{children:[n.name,(0,jt.jsx)("span",{className:"ms-1",title:"Custom Keyword",children:"\u2605"})]}):e}return Tj.getDisplayName(e)};if(h)return(0,jt.jsx)(eN,{text:"Loading unit details..."});if(p)return(0,jt.jsxs)(tk,{variant:"danger",children:[p,(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>b("/units"),children:"Back to Units"})})]});if(!r)return(0,jt.jsxs)(tk,{variant:"warning",children:["Unit not found.",(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>b("/units"),children:"Back to Units"})})]});const E=(()=>{var e;if(!r)return null;let t={wounds:r.wounds||1,courage:r.courage||1,speed:r.speed||2,modelCount:r.currentModelCount||1,totalPoints:r.points||0};return null===(e=r.upgradeSlots)||void 0===e||e.forEach(e=>{var n;null===(n=e.equippedUpgrades)||void 0===n||n.forEach(e=>{const n=o.find(t=>t.id===e);var r,i;n&&(t.totalPoints+=n.pointsCost||0,null!==(r=n.effects)&&void 0!==r&&r.statModifiers&&(t.wounds+=n.effects.statModifiers.wounds||0,t.courage+=n.effects.statModifiers.courage||0,t.speed+=n.effects.statModifiers.speed||0),t.modelCount+=(null===(i=n.effects)||void 0===i?void 0:i.modelCountChange)||0)})}),t})(),_=(()=>{var e;if(!r)return[];const t=r.weapons||[],n=[];return null===(e=r.upgradeSlots)||void 0===e||e.forEach(e=>{var t;null===(t=e.equippedUpgrades)||void 0===t||t.forEach(e=>{var t,r;const i=o.find(t=>t.id===e);(null===i||void 0===i||null===(t=i.effects)||void 0===t||null===(r=t.addWeapons)||void 0===r?void 0:r.length)>0&&i.effects.addWeapons.forEach(e=>{n.push(c(c({},e),{},{source:i.name}))})})}),[...t.map(e=>c(c({},e),{},{source:"Base Unit"})),...n]})();return(0,jt.jsxs)(jt.Fragment,{children:[g&&(0,jt.jsxs)(tk,{variant:"danger",children:[(0,jt.jsx)(tk.Heading,{children:"Confirm Delete"}),(0,jt.jsx)("p",{children:"Are you sure you want to delete this unit? This action cannot be undone."}),(0,jt.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>y(!1),className:"me-2",children:"Cancel"}),(0,jt.jsx)(nC,{variant:"danger",onClick:x,children:"Delete Unit"})]})]}),(0,jt.jsx)(uN,{children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,jt.jsx)("h2",{children:r.name}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{variant:"outline-primary",onClick:()=>b("/units/edit/".concat(n)),className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",onClick:x,children:g?"Confirm Delete":"Delete"})]})]}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{className:"faction-".concat(r.faction),children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h5",{className:"mb-0",children:"Unit Information"}),(0,jt.jsx)(zN,{bg:"secondary",children:HN.getDisplayName(r.type)})]})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Faction:"})," ",WN.getDisplayName(r.faction)]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Points:"})," ",r.points||0,E.totalPoints!==r.points&&(0,jt.jsxs)("span",{className:"text-primary",children:[" \u2192 ",E.totalPoints]})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Stats:"})," ",E.wounds!==r.wounds&&(0,jt.jsx)("span",{className:"text-primary",children:E.wounds}),E.wounds===r.wounds&&(r.wounds||1),"W /"," ",r.courage?(0,jt.jsxs)(jt.Fragment,{children:[E.courage!==r.courage&&(0,jt.jsx)("span",{className:"text-primary",children:E.courage}),E.courage===r.courage&&r.courage,"C /"," "]}):" - /"," ",E.speed!==r.speed&&(0,jt.jsx)("span",{className:"text-primary",children:E.speed}),E.speed===r.speed&&(r.speed||2),"S /"," ",(0,jt.jsx)("span",{className:rj.getColorClass(r.defense),children:"white"===r.defense?"W":"R"})," ","Defense"]})})]}),(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{md:12,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Model Count:"})," Min: ",r.minModelCount||1," | Current:"," ",r.currentModelCount||1,E.modelCount!==r.currentModelCount&&(0,jt.jsxs)("span",{className:"text-primary",children:[" \u2192 ",E.modelCount]})," ","| Max: ",r.maxModelCount||10]})})})]})]}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Keywords"})}),(0,jt.jsx)(KC.Body,{children:r.keywords&&r.keywords.length>0?(0,jt.jsx)("div",{children:r.keywords.map((e,t)=>(0,jt.jsx)(zN,{bg:e.startsWith("custom:")?"info":"secondary",className:"me-2 mb-2 p-2",children:w(e)},t))}):(0,jt.jsx)("p",{className:"text-muted",children:"No keywords assigned to this unit."})})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Weapons"})}),(0,jt.jsx)(KC.Body,{children:_.length>0?(0,jt.jsx)(nj,{variant:"flush",children:_.map((e,t)=>{var n,r,i,s;return(0,jt.jsxs)(nj.Item,{children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h6",{className:"mb-0",children:e.name}),(0,jt.jsx)(zN,{bg:"Base Unit"===e.source?"secondary":"info",children:e.source})]}),(0,jt.jsxs)("div",{className:"small text-muted",children:[(0,jt.jsx)("strong",{children:"Range:"})," ",tT.getDisplayName?tT.getDisplayName(e.range):e.range]}),(0,jt.jsxs)("div",{className:"small",children:[(0,jt.jsx)("strong",{children:"Dice:"}),(null===(n=e.dice)||void 0===n?void 0:n[nT.RED])>0&&(0,jt.jsxs)("span",{className:"text-danger",children:[" ",e.dice[nT.RED],"R"]}),(null===(r=e.dice)||void 0===r?void 0:r[nT.BLACK])>0&&(0,jt.jsxs)("span",{children:[" ",e.dice[nT.BLACK],"B"]}),(null===(i=e.dice)||void 0===i?void 0:i[nT.WHITE])>0&&(0,jt.jsxs)("span",{className:"text-muted",children:[" ",e.dice[nT.WHITE],"W"]})]}),(null===(s=e.keywords)||void 0===s?void 0:s.length)>0&&(0,jt.jsxs)("div",{className:"small",children:[(0,jt.jsx)("strong",{children:"Keywords:"})," ",e.keywords.map(e=>rT.getDisplayName?rT.getDisplayName(e):e).join(", ")]})]},t)})}):(0,jt.jsx)("p",{className:"text-muted",children:"No weapons assigned to this unit."})})]})})]}),s.length>0&&(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Abilities"})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(jj,{children:s.map((e,t)=>{var n;return(0,jt.jsxs)(jj.Item,{eventKey:t.toString(),children:[(0,jt.jsx)(jj.Header,{children:(0,jt.jsx)("strong",{children:e.name})}),(0,jt.jsxs)(jj.Body,{children:[(0,jt.jsx)("p",{className:"mb-2 text-muted",children:e.description}),(0,jt.jsx)("div",{className:"mb-2",children:e.rulesText}),(null===(n=e.reminders)||void 0===n?void 0:n.length)>0&&(0,jt.jsxs)("div",{className:"mt-3",children:[(0,jt.jsx)("strong",{className:"small",children:"Reminders:"}),(0,jt.jsx)("div",{className:"mt-1",children:e.reminders.map((e,t)=>(0,jt.jsxs)("div",{className:"small text-muted mb-1",children:["\u2022 ",e.text,e.condition&&(0,jt.jsxs)("span",{className:"fst-italic",children:[" (",e.condition,")"]})]},t))})]})]})]},e.id)})})})]}),r.upgradeSlots&&r.upgradeSlots.length>0&&(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Upgrade Slots"})}),(0,jt.jsx)(KC.Body,{children:r.upgradeSlots.map((e,t)=>{var n;const r=o.filter(t=>{var n;return null===(n=e.equippedUpgrades)||void 0===n?void 0:n.includes(t.id)});return(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,jt.jsxs)(zN,{bg:sj.getBadgeColor(e.type),children:[(0,jt.jsx)("i",{className:sj.getIconClass(e.type)+" me-1"}),sj.getDisplayName(e.type)]}),(0,jt.jsxs)("span",{className:"small text-muted",children:[(null===(n=e.equippedUpgrades)||void 0===n?void 0:n.length)||0," / ",e.maxCount," equipped"]})]}),r.length>0?(0,jt.jsx)(nj,{variant:"flush",children:r.map(e=>(0,jt.jsxs)(nj.Item,{className:"py-2",children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)("strong",{children:e.name}),(0,jt.jsxs)(zN,{bg:"warning",text:"dark",children:[e.pointsCost," pts"]})]}),(0,jt.jsx)("div",{className:"small text-muted",children:e.description})]},e.id))}):(0,jt.jsx)("p",{className:"small text-muted mb-0",children:"No upgrades equipped"})]},t)})})]}),r.miniatures&&(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Miniature Information"})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)("p",{style:{whiteSpace:"pre-line"},children:r.miniatures})})]}),r.notes&&(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Notes"})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)("p",{style:{whiteSpace:"pre-line"},children:r.notes})})]}),(0,jt.jsx)("div",{className:"d-flex justify-content-start mt-4",children:(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>b("/units"),children:"Back to Units"})})]})})]})},gT=()=>{const{unitId:t}=ge(),n=de(),r=pe(),[i,s]=(0,e.useState)("list");(0,e.useEffect)(()=>{n.pathname.includes("/units/create")?s("create"):n.pathname.includes("/units/edit/")?s("edit"):s(t?"detail":"list")},[t,n.pathname]);return(0,jt.jsxs)(Bt,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsx)("h1",{children:"Units"}),(0,jt.jsx)("p",{children:"Create and manage your Star Wars Legion units."})]})}),(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(PN.Container,{activeKey:i,onSelect:e=>{s(e),"list"===e?r("/units"):"create"===e&&r("/units/create")},children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)(CE,{variant:"tabs",children:[(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"list",children:"My Units"})}),(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"create",children:"Create Unit"})}),t&&(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"detail",children:"Unit Details"})}),n.pathname.includes("/units/edit/")&&(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"edit",children:"Edit Unit"})})]})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(PN.Content,{children:[(0,jt.jsx)(PN.Pane,{eventKey:"list",children:(0,jt.jsx)(KN,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"create",children:(0,jt.jsx)(pT,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"detail",children:t&&(0,jt.jsx)(mT,{unitId:t})}),(0,jt.jsx)(PN.Pane,{eventKey:"edit",children:t&&(0,jt.jsx)(pT,{})})]})})]})})})})]})},yT=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)("all"),[u,d]=(0,e.useState)(""),{currentUser:h}=eb();(0,e.useEffect)(()=>{h&&(async()=>{try{i(!0);const e=oy(xg(Xv,"users",h.uid,"armies")),t=(await Cy(e)).docs.map(e=>c(c({id:e.id},e.data()),{},{unitCount:e.data().units?e.data().units.length:0,totalPoints:e.data().totalPoints||0}));n(t),a("")}catch(e){console.error("Error fetching armies:",e),a("Failed to fetch armies. Please try again later.")}finally{i(!1)}})()},[h]);const f=t.filter(e=>("all"===o||e.faction===o)&&!(u&&!e.name.toLowerCase().includes(u.toLowerCase())));return r?(0,jt.jsx)(eN,{text:"Loading armies..."}):(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(KC,{className:"mb-4",children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{className:"align-items-center",children:[(0,jt.jsx)(Tk,{md:5,className:"mb-3 mb-md-0",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Faction"}),(0,jt.jsxs)(Xk.Select,{value:o,onChange:e=>l(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Factions"}),(0,jt.jsx)("option",{value:WN.REPUBLIC,children:WN.getDisplayName(WN.REPUBLIC)}),(0,jt.jsx)("option",{value:WN.SEPARATIST,children:WN.getDisplayName(WN.SEPARATIST)}),(0,jt.jsx)("option",{value:WN.REBEL,children:WN.getDisplayName(WN.REBEL)}),(0,jt.jsx)("option",{value:WN.EMPIRE,children:WN.getDisplayName(WN.EMPIRE)})]})]})}),(0,jt.jsx)(Tk,{md:5,className:"mb-3 mb-md-0",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search army name",value:u,onChange:e=>d(e.target.value)}),u&&(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>d(""),children:"Clear"})]})]})}),(0,jt.jsx)(Tk,{md:2,className:"text-end",children:(0,jt.jsx)(nC,{as:vt,to:"/armies/create",variant:"primary",className:"mt-3 mt-md-0",children:"Create Army"})})]})})})})}),s&&(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)("div",{className:"alert alert-danger",children:s})})}),0===t.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No armies found"}),(0,jt.jsx)("p",{children:"You haven't created any armies yet. Get started by creating your first army!"}),(0,jt.jsx)(nC,{as:vt,to:"/armies/create",variant:"primary",children:"Create Army"})]})}):0===f.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No matching armies"}),(0,jt.jsx)("p",{children:"No armies match your current filters. Try adjusting your filters."}),(0,jt.jsx)(nC,{onClick:()=>{l("all"),d("")},variant:"outline-primary",children:"Clear Filters"})]})}):(0,jt.jsx)(uN,{children:f.map(e=>(0,jt.jsx)(Tk,{md:6,lg:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"army-card faction-".concat(e.faction),children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("span",{children:e.name}),(0,jt.jsx)(zN,{bg:"secondary",style:{backgroundColor:WN.getColor(e.faction),color:(["republic","rebel"].includes(e.faction),"white")},children:WN.getDisplayName(e.faction)})]}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Points:"})," ",e.totalPoints||0]}),(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Units:"})," ",e.unitCount||0]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Last Updated:"})," ",e.updatedAt?new Date(e.updatedAt.toDate()).toLocaleDateString():"Never"]}),(0,jt.jsxs)("div",{className:"d-flex",children:[(0,jt.jsx)(vt,{to:"/armies/".concat(e.id),className:"btn btn-primary btn-sm me-2",children:"View Details"}),(0,jt.jsx)(vt,{to:"/armies/edit/".concat(e.id),className:"btn btn-outline-secondary btn-sm",children:"Edit"})]})]})]})},e.id))})]})},vT=()=>{const{armyId:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!!t),[l,u]=(0,e.useState)(!0),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)({name:"",faction:WN.REPUBLIC,description:"",units:[],totalPoints:0}),[y,v]=(0,e.useState)([]),[b,x]=(0,e.useState)([]),[w,E]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{try{if(t&&r){o(!0);const e=wg(Xv,"users",r.uid,"armies",t),n=await _y(e);if(n.exists()){const e=n.data();g(c(c({},e),{},{units:e.units||[]}));const t=e.units||[],i=[];for(const n of t){const e=wg(Xv,"users",r.uid,"units",n),t=await _y(e);t.exists()&&i.push(c({id:t.id},t.data()))}x(i)}else h("Army not found")}}catch(e){console.error("Error fetching army:",e),h("Failed to fetch army details. Please try again later.")}finally{o(!1)}})()},[r,t]),(0,e.useEffect)(()=>{(async()=>{try{if(u(!0),!r)return;const e=oy(xg(Xv,"users",r.uid,"units"),cy("faction","==",m.faction)),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));t.sort((e,t)=>{const n={[HN.COMMAND]:1,[HN.CORPS]:2,[HN.SPECIAL_FORCES]:3,[HN.SUPPORT]:4,[HN.HEAVY]:5,[HN.OPERATIVE]:6,[HN.AUXILIARY]:7};return n[e.type]-n[t.type]||e.name.localeCompare(t.name)}),v(t)}catch(e){console.error("Error fetching units:",e),h("Failed to fetch available units. Please try again later.")}finally{u(!1)}})()},[r,m.faction]);const _=e=>{const{name:t,value:n}=e.target;"faction"===t?(g(e=>c(c({},e),{},{[t]:n,units:[],totalPoints:0})),x([])):g(e=>c(c({},e),{},{[t]:n}))},S=b.reduce((e,t)=>{const n=t.type;return e[n]=(e[n]||0)+1,e},{});return a?(0,jt.jsx)(eN,{text:"Loading army data..."}):i?(0,jt.jsx)(eN,{text:t?"Updating army...":"Creating army..."}):(0,jt.jsxs)(Xk,{noValidate:!0,validated:w,onSubmit:async e=>{e.preventDefault();if(!1===e.currentTarget.checkValidity())return e.stopPropagation(),void E(!0);try{if(s(!0),h(""),!r)throw new Error("You must be logged in to create an army");const e=c(c({},m),{},{userId:r.uid,updatedAt:Ry()});if(t){const i=wg(Xv,"users",r.uid,"armies",t);await Ny(i,e),p("Army updated successfully!"),setTimeout(()=>{n("/armies/".concat(t))},1500)}else{e.createdAt=Ry();const t=await Ty(xg(Xv,"users",r.uid,"armies"),e);p("Army created successfully!"),g({name:"",faction:WN.REPUBLIC,description:"",units:[],totalPoints:0}),x([]),setTimeout(()=>{n("/armies/".concat(t.id))},1500)}}catch(i){console.error("Error saving army:",i),h("Failed to save army: ".concat(i.message))}finally{s(!1)}},children:[d&&(0,jt.jsx)(tk,{variant:"danger",children:d}),f&&(0,jt.jsx)(tk,{variant:"success",children:f}),(0,jt.jsxs)(uN,{children:[(0,jt.jsxs)(Tk,{md:7,children:[(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Army Details"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:8,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Army Name"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"text",name:"name",value:m.name,onChange:_,placeholder:"Enter army name"}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please enter an army name."})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Faction"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"faction",value:m.faction,onChange:_,disabled:b.length>0,children:[(0,jt.jsx)("option",{value:WN.REPUBLIC,children:WN.getDisplayName(WN.REPUBLIC)}),(0,jt.jsx)("option",{value:WN.SEPARATIST,children:WN.getDisplayName(WN.SEPARATIST)}),(0,jt.jsx)("option",{value:WN.REBEL,children:WN.getDisplayName(WN.REBEL)}),(0,jt.jsx)("option",{value:WN.EMPIRE,children:WN.getDisplayName(WN.EMPIRE)})]}),b.length>0&&(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Cannot change faction while units are selected."})]})})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Description"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"description",value:m.description,onChange:_,placeholder:"Enter a description for your army...",rows:3})]}),(0,jt.jsx)(uN,{children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,jt.jsxs)("h5",{children:["Selected Units (",b.length,")"]}),(0,jt.jsxs)("span",{className:"fw-bold",children:["Total Points: ",m.totalPoints]})]}),(0,jt.jsx)("div",{className:"mb-3",children:Object.entries(S).map(e=>{let[t,n]=e;return(0,jt.jsxs)(zN,{bg:"secondary",className:"me-2 unit-type-".concat(t),style:{fontSize:"0.85rem",padding:"0.25rem 0.5rem"},children:[HN.getDisplayName(t),": ",n]},t)})}),0===b.length?(0,jt.jsx)(tk,{variant:"info",children:"No units selected. Add units from the list on the right."}):(0,jt.jsx)(nj,{variant:"flush",className:"border rounded",children:b.map(e=>(0,jt.jsxs)(nj.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsxs)("div",{className:"small text-muted",children:[HN.getDisplayName(e.type)," \u2022 ",e.points||0," points"]})]}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(e=>{const t=b.find(t=>t.id===e);t&&(g(n=>c(c({},n),{},{units:n.units.filter(t=>t!==e),totalPoints:n.totalPoints-(t.points||0)})),x(t=>t.filter(t=>t.id!==e)))})(e.id),children:"Remove"})]},e.id))})]})})]})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/armies"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",children:t?"Update Army":"Create Army"})]})]}),(0,jt.jsx)(Tk,{md:5,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Available Units"})}),(0,jt.jsx)(KC.Body,{className:"p-0",children:l?(0,jt.jsx)("div",{className:"text-center py-4",children:(0,jt.jsx)(eN,{text:"Loading units..."})}):0===y.length?(0,jt.jsxs)("div",{className:"text-center py-4",children:[(0,jt.jsx)("p",{className:"mb-0",children:"No units available for the selected faction."}),(0,jt.jsx)(nC,{as:"a",href:"/units/create",variant:"link",children:"Create a new unit"})]}):(0,jt.jsx)(jt.Fragment,{children:Object.values(HN).filter(e=>"string"===typeof e&&"getDisplayName"!==e).map(e=>{const t=y.filter(t=>t.type===e);return 0===t.length?null:(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"bg-light p-2 fw-bold",children:HN.getDisplayName(e)}),(0,jt.jsx)(nj,{variant:"flush",children:t.map(e=>(0,jt.jsxs)(nj.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsxs)("div",{className:"small text-muted",children:[e.points||0," points"]})]}),(0,jt.jsx)(nC,{variant:m.units.includes(e.id)?"outline-success":"outline-primary",size:"sm",onClick:()=>(e=>{m.units.includes(e.id)||(g(t=>c(c({},t),{},{units:[...t.units,e.id],totalPoints:t.totalPoints+(e.points||0)})),x(t=>[...t,e]))})(e),disabled:m.units.includes(e.id),children:m.units.includes(e.id)?"Added":"Add"})]},e.id))})]},e)})})})]})})]})]})},bT=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],xT=e.forwardRef((e,t)=>{let{bsPrefix:n,className:r,striped:s,bordered:a,borderless:o,hover:l,size:u,variant:d,responsive:h}=e,f=i(e,bT);const p=Ot(n,"table"),m=Nt()(r,p,d&&"".concat(p,"-").concat(d),u&&"".concat(p,"-").concat(u),s&&"".concat(p,"-").concat("string"===typeof s?"striped-".concat(s):"striped"),a&&"".concat(p,"-bordered"),o&&"".concat(p,"-borderless"),l&&"".concat(p,"-hover")),g=(0,jt.jsx)("table",c(c({},f),{},{className:m,ref:t}));if(h){let e="".concat(p,"-responsive");return"string"===typeof h&&(e="".concat(e,"-").concat(h)),(0,jt.jsx)("div",{className:e,children:g})}return g});xT.displayName="Table";const wT=xT,ET=t=>{let{armyId:n}=t;const[r,i]=(0,e.useState)(null),[s,a]=(0,e.useState)([]),[o,l]=(0,e.useState)(!0),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(!1),{currentUser:p}=eb(),m=pe();(0,e.useEffect)(()=>{p&&n&&(async()=>{try{l(!0);const e=wg(Xv,"users",p.uid,"armies",n),t=await _y(e);if(t.exists()){const e=c({id:t.id},t.data());i(e);const n=e.units||[],r=[];for(const t of n){const e=wg(Xv,"users",p.uid,"units",t),n=await _y(e);n.exists()&&r.push(c({id:n.id},n.data()))}r.sort((e,t)=>{const n={[HN.COMMAND]:1,[HN.CORPS]:2,[HN.SPECIAL_FORCES]:3,[HN.SUPPORT]:4,[HN.HEAVY]:5,[HN.OPERATIVE]:6,[HN.AUXILIARY]:7};return n[e.type]-n[t.type]||e.name.localeCompare(t.name)}),a(r)}else d("Army not found")}catch(e){console.error("Error fetching army:",e),d("Failed to fetch army details. Please try again later.")}finally{l(!1)}})()},[p,n]);const g=async()=>{if(h)try{l(!0),await jy(wg(Xv,"users",p.uid,"armies",n)),m("/armies")}catch(e){console.error("Error deleting army:",e),d("Failed to delete army. Please try again later."),l(!1)}else f(!0)};if(o)return(0,jt.jsx)(eN,{text:"Loading army details..."});if(u)return(0,jt.jsxs)(tk,{variant:"danger",children:[u,(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>m("/armies"),children:"Back to Armies"})})]});if(!r)return(0,jt.jsxs)(tk,{variant:"warning",children:["Army not found.",(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>m("/armies"),children:"Back to Armies"})})]});const y=s.reduce((e,t)=>{const n=t.type;return e[n]=(e[n]||0)+1,e},{});return(0,jt.jsxs)(jt.Fragment,{children:[h&&(0,jt.jsxs)(tk,{variant:"danger",children:[(0,jt.jsx)(tk.Heading,{children:"Confirm Delete"}),(0,jt.jsx)("p",{children:"Are you sure you want to delete this army? This action cannot be undone."}),(0,jt.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>{f(!1)},className:"me-2",children:"Cancel"}),(0,jt.jsx)(nC,{variant:"danger",onClick:g,children:"Delete Army"})]})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,jt.jsx)("h2",{children:r.name}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{variant:"outline-primary",onClick:()=>{window.print()},className:"me-2",children:"Print"}),(0,jt.jsx)(nC,{variant:"outline-success",onClick:()=>{m("/battles/create?armyId=".concat(n))},className:"me-2",children:"Start Battle"}),(0,jt.jsx)(nC,{variant:"outline-primary",onClick:()=>{m("/armies/edit/".concat(n))},className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",onClick:g,children:h?"Confirm Delete":"Delete"})]})]}),(0,jt.jsxs)(uN,{className:"mb-4",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{className:"faction-".concat(r.faction),children:(0,jt.jsx)("h5",{className:"mb-0",children:"Army Information"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Faction:"}),(0,jt.jsx)("br",{}),WN.getDisplayName(r.faction)]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Total Points:"}),(0,jt.jsx)("br",{}),r.totalPoints||0]})})]}),r.description&&(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{children:(0,jt.jsxs)("p",{children:[(0,jt.jsx)("strong",{children:"Description:"}),(0,jt.jsx)("br",{}),r.description]})})}),(0,jt.jsx)(uN,{children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsx)("strong",{children:"Unit Composition:"}),(0,jt.jsx)("br",{}),(0,jt.jsx)("div",{className:"mb-2",children:Object.entries(y).map(e=>{let[t,n]=e;return(0,jt.jsxs)(zN,{bg:"secondary",className:"me-2 unit-type-".concat(t),style:{fontSize:"0.85rem",padding:"0.25rem 0.5rem"},children:[HN.getDisplayName(t),": ",n]},t)})})]})})]})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Unit Summary"})}),(0,jt.jsx)(KC.Body,{className:"p-0",children:(0,jt.jsxs)(wT,{responsive:!0,className:"mb-0",children:[(0,jt.jsx)("thead",{children:(0,jt.jsxs)("tr",{children:[(0,jt.jsx)("th",{children:"Unit"}),(0,jt.jsx)("th",{children:"Type"}),(0,jt.jsx)("th",{children:"Points"}),(0,jt.jsx)("th",{children:"Wounds"}),(0,jt.jsx)("th",{})]})}),(0,jt.jsx)("tbody",{children:s.map(e=>(0,jt.jsxs)("tr",{children:[(0,jt.jsx)("td",{children:e.name}),(0,jt.jsx)("td",{children:HN.getDisplayName(e.type)}),(0,jt.jsx)("td",{children:e.points||0}),(0,jt.jsx)("td",{children:e.wounds||1}),(0,jt.jsx)("td",{children:(0,jt.jsx)(nC,{as:vt,to:"/units/".concat(e.id),variant:"link",size:"sm",className:"p-0 text-decoration-none",children:"View"})})]},e.id))})]})})]})})]}),(0,jt.jsx)("h3",{children:"Unit Details"}),Object.values(HN).filter(e=>"string"===typeof e&&"getDisplayName"!==e).map(e=>{const t=s.filter(t=>t.type===e);return 0===t.length?null:(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{className:"unit-type-".concat(e),children:(0,jt.jsx)("h5",{className:"mb-0",children:HN.getDisplayName(e)})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(uN,{children:t.map(e=>(0,jt.jsx)(Tk,{md:6,lg:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("span",{className:"fw-bold",children:e.name}),(0,jt.jsxs)("span",{children:[e.points||0," pts"]})]})}),(0,jt.jsxs)(KC.Body,{className:"p-3",children:[(0,jt.jsxs)("div",{className:"small mb-2",children:[(0,jt.jsx)("strong",{children:"Stats:"})," ",e.wounds||1,"W /",e.courage?" ".concat(e.courage,"C /"):" - /",e.speed||2,"S /",(0,jt.jsx)("span",{className:rj.getColorClass(e.defense),children:e.defense===rj.WHITE?"W":"R"})," Defense"]}),e.keywords&&e.keywords.length>0&&(0,jt.jsxs)("div",{className:"small mb-2",children:[(0,jt.jsx)("strong",{children:"Keywords:"}),(0,jt.jsx)("br",{}),(0,jt.jsx)("div",{className:"mt-1",children:e.keywords.map((e,t)=>(0,jt.jsx)(zN,{bg:"secondary",className:"me-1 mb-1",children:e},t))})]}),e.weapons&&e.weapons.length>0&&(0,jt.jsxs)("div",{className:"small",children:[(0,jt.jsx)("strong",{children:"Weapons:"}),(0,jt.jsx)(nj,{variant:"flush",className:"mt-1",children:e.weapons.map((e,t)=>(0,jt.jsxs)(nj.Item,{className:"p-2",children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsx)("div",{children:e.range}),e.keywords&&e.keywords.length>0&&(0,jt.jsx)("div",{children:e.keywords.join(", ")})]},t))})]})]}),(0,jt.jsx)(KC.Footer,{className:"p-2",children:(0,jt.jsx)(vt,{to:"/units/".concat(e.id),className:"btn btn-sm btn-outline-primary w-100",children:"View Details"})})]})},e.id))})})]},e)}),(0,jt.jsx)("div",{className:"d-flex justify-content-start mt-4",children:(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>m("/armies"),children:"Back to Armies"})})]})},_T=()=>{const{armyId:t}=ge(),n=pe(),[r,i]=(0,e.useState)("list");e.useEffect(()=>{window.location.pathname.includes("/armies/create")?i("create"):window.location.pathname.includes("/armies/edit/")?i("edit"):i(t?"detail":"list")},[t]);return(0,jt.jsxs)(Bt,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsx)("h1",{children:"Armies"}),(0,jt.jsx)("p",{children:"Create and manage your Star Wars Legion armies."})]})}),(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(PN.Container,{activeKey:r,onSelect:e=>{i(e),"list"===e?n("/armies"):"create"===e&&n("/armies/create")},children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)(CE,{variant:"tabs",children:[(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"list",children:"My Armies"})}),(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"create",children:"Create Army"})}),t&&(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"detail",children:"Army Details"})}),window.location.pathname.includes("/armies/edit/")&&(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"edit",children:"Edit Army"})})]})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(PN.Content,{children:[(0,jt.jsx)(PN.Pane,{eventKey:"list",children:(0,jt.jsx)(yT,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"create",children:(0,jt.jsx)(vT,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"detail",children:t&&(0,jt.jsx)(ET,{armyId:t})}),(0,jt.jsx)(PN.Pane,{eventKey:"edit",children:t&&(0,jt.jsx)(vT,{})})]})})]})})})})]})},ST=Object.freeze({COMMAND:"command",ACTIVATION:"activation",END:"end",getDisplayName:function(e){switch(e){case this.COMMAND:return"Command Phase";case this.ACTIVATION:return"Activation Phase";case this.END:return"End Phase";default:return"Unknown Phase"}},getDescription:function(e){switch(e){case this.COMMAND:return"Players select command cards and issue orders to units on the battlefield.";case this.ACTIVATION:return"Players take turns activating units to perform actions.";case this.END:return"Players refresh tokens, remove unspent tokens, and update the battlefield.";default:return"Unknown phase description."}},getNextPhase:function(e){switch(e){case this.COMMAND:return this.ACTIVATION;case this.ACTIVATION:return this.END;case this.END:default:return this.COMMAND}}}),CT=Object.freeze({BLUE:"blue",RED:"red",getDisplayName:function(e){switch(e){case this.BLUE:return"Blue Player";case this.RED:return"Red Player";default:return"Unknown Player"}},getColorClass:function(e){switch(e){case this.BLUE:return"player-blue";case this.RED:return"player-red";default:return""}},getColor:function(e){switch(e){case this.BLUE:return"#007bff";case this.RED:return"#dc3545";default:return"#6c757d"}},getOpposite:function(e){return e===this.BLUE?this.RED:this.BLUE}}),kT=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)("all"),[u,d]=(0,e.useState)(""),{currentUser:h}=eb();(0,e.useEffect)(()=>{h&&(async()=>{try{i(!0);const e=oy(xg(Xv,"users",h.uid,"battles"),hy("createdAt","desc")),t=(await Cy(e)).docs.map(e=>{var t,n;return c(c({id:e.id},e.data()),{},{createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date,lastUpdated:(null===(n=e.data().lastUpdated)||void 0===n?void 0:n.toDate())||new Date})});n(t),a("")}catch(e){console.error("Error fetching battles:",e),a("Failed to fetch battles. Please try again later.")}finally{i(!1)}})()},[h]);const f=e=>!e.isComplete&&!e.winner,p=t.filter(e=>{if("active"===o&&!f(e))return!1;if("completed"===o&&f(e))return!1;if(u){var t,n,r,i,s;const a=u.toLowerCase(),o=null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(a),l=null===(n=e.bluePlayer)||void 0===n?void 0:n.toLowerCase().includes(a),c=null===(r=e.redPlayer)||void 0===r?void 0:r.toLowerCase().includes(a),d=null===(i=e.blueArmy)||void 0===i?void 0:i.toLowerCase().includes(a),h=null===(s=e.redArmy)||void 0===s?void 0:s.toLowerCase().includes(a);if(!o&&!l&&!c&&!d&&!h)return!1}return!0}),m=e=>e?e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Unknown";return r?(0,jt.jsx)(eN,{text:"Loading battles..."}):(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(KC,{className:"mb-4",children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{className:"align-items-center",children:[(0,jt.jsx)(Tk,{md:4,className:"mb-3 mb-md-0",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Status"}),(0,jt.jsxs)(Xk.Select,{value:o,onChange:e=>l(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Battles"}),(0,jt.jsx)("option",{value:"active",children:"Active Battles"}),(0,jt.jsx)("option",{value:"completed",children:"Completed Battles"})]})]})}),(0,jt.jsx)(Tk,{md:5,className:"mb-3 mb-md-0",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search battle name or players",value:u,onChange:e=>d(e.target.value)}),u&&(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>d(""),children:"Clear"})]})]})}),(0,jt.jsx)(Tk,{md:3,className:"text-end",children:(0,jt.jsx)(nC,{as:vt,to:"/battles/create",variant:"primary",className:"mt-3 mt-md-0",children:"New Battle"})})]})})})})}),s&&(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)("div",{className:"alert alert-danger",children:s})})}),0===t.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No battles found"}),(0,jt.jsx)("p",{children:"You haven't created any battles yet. Start your first battle to track your games!"}),(0,jt.jsx)(nC,{as:vt,to:"/battles/create",variant:"primary",children:"Start New Battle"})]})}):0===p.length?(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No matching battles"}),(0,jt.jsx)("p",{children:"No battles match your current filters. Try adjusting your search criteria."}),(0,jt.jsx)(nC,{onClick:()=>{l("all"),d("")},variant:"outline-primary",children:"Clear Filters"})]})}):(0,jt.jsx)(uN,{children:p.map(e=>(0,jt.jsx)(Tk,{md:6,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100",children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("span",{children:e.name||"Untitled Battle"}),(0,jt.jsx)(zN,{bg:f(e)?"success":"secondary",children:f(e)?"Active":"Completed"})]}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{xs:6,children:(0,jt.jsxs)("div",{className:"p-2",style:{background:CT.getColor(CT.BLUE)+"20",borderRadius:"5px"},children:[(0,jt.jsx)("div",{className:"fw-bold text-primary",children:e.bluePlayer||"Blue Player"}),(0,jt.jsx)("div",{className:"small",children:e.blueArmy||"Unknown Army"}),e.winner===CT.BLUE&&(0,jt.jsx)(zN,{bg:"primary",className:"mt-1",children:"Winner"})]})}),(0,jt.jsx)(Tk,{xs:6,children:(0,jt.jsxs)("div",{className:"p-2",style:{background:CT.getColor(CT.RED)+"20",borderRadius:"5px"},children:[(0,jt.jsx)("div",{className:"fw-bold text-danger",children:e.redPlayer||"Red Player"}),(0,jt.jsx)("div",{className:"small",children:e.redArmy||"Unknown Army"}),e.winner===CT.RED&&(0,jt.jsx)(zN,{bg:"danger",className:"mt-1",children:"Winner"})]})})]}),f(e)&&(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Current Status:"}),(0,jt.jsx)("br",{}),"Round ",e.currentRound||1,", ",ST.getDisplayName(e.currentPhase||ST.COMMAND),(0,jt.jsxs)("div",{className:"mt-2",children:[(0,jt.jsx)("strong",{children:"Active Player:"})," ",(0,jt.jsx)("span",{className:e.activePlayer===CT.BLUE?"text-primary":"text-danger",children:e.activePlayer===CT.BLUE?e.bluePlayer:e.redPlayer})]})]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Created:"})," ",m(e.createdAt),(0,jt.jsx)("br",{}),(0,jt.jsx)("strong",{children:"Last Updated:"})," ",m(e.lastUpdated)]}),(0,jt.jsxs)("div",{className:"d-flex",children:[(0,jt.jsx)(vt,{to:"/battles/".concat(e.id),className:"btn btn-primary btn-sm me-2",children:f(e)?"Continue Battle":"View Details"}),f(e)&&(0,jt.jsx)(vt,{to:"/battles/".concat(e.id,"/edit"),className:"btn btn-outline-secondary btn-sm",children:"Edit Details"})]})]})]})},e.id))})]})},NT=()=>{const t=pe(),n=de(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(!0),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(""),f=new URLSearchParams(n.search).get("armyId"),[p,m]=(0,e.useState)({name:"",bluePlayer:"",redPlayer:"",blueArmyId:f||"",redArmyId:"",blueArmy:"",redArmy:"",currentRound:1,currentPhase:ST.COMMAND,activePlayer:CT.BLUE,blueUnits:[],redUnits:[],objectives:{primary:"",secondary:"",deployment:""}}),[g,y]=(0,e.useState)([]),[v,b]=(0,e.useState)(!1);(0,e.useEffect)(()=>{r&&(async()=>{try{o(!0);const e=xg(Xv,"users",r.uid,"armies"),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));if(y(t),f){const e=t.find(e=>e.id===f);e&&(m(t=>c(c({},t),{},{blueArmy:e.name})),await x(f,"blue"))}}catch(e){console.error("Error fetching armies:",e),u("Failed to fetch armies. Please try again later.")}finally{o(!1)}})()},[r,f]);const x=async(e,t)=>{if(e)try{const s=wg(Xv,"users",r.uid,"armies",e),a=await _y(s);if(!a.exists())throw new Error("Army not found");const o=a.data(),l=o.units||[],u=[];for(const e of l){const t=wg(Xv,"users",r.uid,"units",e),s=await _y(t);if(s.exists()){var n,i;const e=s.data();u.push({id:s.id,name:e.name,type:e.type,hasOrder:!1,hasActivated:!1,wounds:e.wounds||1,currentWounds:e.wounds||1,suppression:0,tokens:{aim:0,dodge:0,surge:0,shield:null!==(n=e.keywords)&&void 0!==n&&n.includes("shielded_1")?1:null!==(i=e.keywords)&&void 0!==i&&i.includes("shielded_2")?2:0,ion:0,smoke:0,standby:0}})}}m(e=>c(c({},e),{},"blue"===t?{blueUnits:u,blueArmy:o.name}:{redUnits:u,redArmy:o.name}))}catch(s){console.error("Error loading ".concat(t," army units:"),s),u("Failed to load ".concat(t," army units. Please try again."))}},w=e=>{const{name:t,value:n}=e.target;"blueArmyId"===t?(m(e=>c(c({},e),{},{[t]:n})),x(n,"blue")):"redArmyId"===t?(m(e=>c(c({},e),{},{[t]:n})),x(n,"red")):m(e=>c(c({},e),{},{[t]:n}))},E=e=>{const{name:t,value:n}=e.target;m(e=>c(c({},e),{},{objectives:c(c({},e.objectives),{},{[t]:n})}))};return i?(0,jt.jsx)(eN,{text:"Creating battle..."}):(0,jt.jsxs)(Xk,{noValidate:!0,validated:v,onSubmit:async e=>{e.preventDefault();if(!1===e.currentTarget.checkValidity())return e.stopPropagation(),void b(!0);try{if(s(!0),u(""),!r)throw new Error("You must be logged in to create a battle");if(0===p.blueUnits.length)throw new Error("Blue army must have units");if(0===p.redUnits.length)throw new Error("Red army must have units");const e=c(c({},p),{},{userId:r.uid,createdAt:Ry(),lastUpdated:Ry(),isComplete:!1,winner:null}),n=await Ty(xg(Xv,"users",r.uid,"battles"),e);h("Battle created successfully!"),setTimeout(()=>{t("/battles/".concat(n.id))},1500)}catch(n){console.error("Error creating battle:",n),u("Failed to create battle: ".concat(n.message))}finally{s(!1)}},children:[l&&(0,jt.jsx)(tk,{variant:"danger",children:l}),d&&(0,jt.jsx)(tk,{variant:"success",children:d}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Battle Information"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{md:12,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Battle Name"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"text",name:"name",value:p.name,onChange:w,placeholder:"Enter a name for this battle"}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please enter a battle name."})]})})}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{className:"mb-3",border:"primary",children:[(0,jt.jsx)(KC.Header,{className:"bg-primary text-white",children:(0,jt.jsx)("h5",{className:"mb-0",children:"Blue Player"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Player Name"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"text",name:"bluePlayer",value:p.bluePlayer,onChange:w,placeholder:"Enter blue player's name"}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please enter the blue player's name."})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Select Army"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"blueArmyId",value:p.blueArmyId,onChange:w,children:[(0,jt.jsx)("option",{value:"",children:"Select an Army"}),g.map(e=>(0,jt.jsxs)("option",{value:e.id,children:[e.name," (",e.totalPoints||0," pts)"]},e.id))]}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please select an army for the blue player."})]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Units:"})," ",p.blueUnits.length]})]})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{className:"mb-3",border:"danger",children:[(0,jt.jsx)(KC.Header,{className:"bg-danger text-white",children:(0,jt.jsx)("h5",{className:"mb-0",children:"Red Player"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Player Name"}),(0,jt.jsx)(Xk.Control,{required:!0,type:"text",name:"redPlayer",value:p.redPlayer,onChange:w,placeholder:"Enter red player's name"}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please enter the red player's name."})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Select Army"}),(0,jt.jsxs)(Xk.Select,{required:!0,name:"redArmyId",value:p.redArmyId,onChange:w,children:[(0,jt.jsx)("option",{value:"",children:"Select an Army"}),g.filter(e=>e.id!==p.blueArmyId).map(e=>(0,jt.jsxs)("option",{value:e.id,children:[e.name," (",e.totalPoints||0," pts)"]},e.id))]}),(0,jt.jsx)(Xk.Control.Feedback,{type:"invalid",children:"Please select an army for the red player."})]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Units:"})," ",p.redUnits.length]})]})]})})]})]})]}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Battle Objectives"})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Primary Objective"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"primary",value:p.objectives.primary,onChange:E,placeholder:"E.g., Key Positions"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Secondary Objective"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"secondary",value:p.objectives.secondary,onChange:E,placeholder:"E.g., Breakthrough"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Deployment"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"deployment",value:p.objectives.deployment,onChange:E,placeholder:"E.g., Major Offensive"})]})})]})})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>t("/battles"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",children:"Start Battle"})]})]})},jT=t=>{let{battle:n,onUnitUpdate:r}=t;const[i,s]=(0,e.useState)({blue:"",red:""}),a=e=>{const t=e===CT.BLUE?n.blueUnits:n.redUnits,a=e===CT.BLUE?n.bluePlayer:n.redPlayer,o=e===CT.BLUE?"primary":"danger",l=t.reduce((e,t)=>{const n=t.type;return e[n]||(e[n]=[]),e[n].push(t),e},{}),u=Object.keys(l).sort((e,t)=>{const n={[HN.COMMAND]:1,[HN.CORPS]:2,[HN.SPECIAL_FORCES]:3,[HN.SUPPORT]:4,[HN.HEAVY]:5,[HN.OPERATIVE]:6,[HN.AUXILIARY]:7};return n[e]-n[t]});return(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)(KC,{className:"mb-3",children:[(0,jt.jsx)(KC.Header,{className:"bg-".concat(o," text-white d-flex justify-content-between align-items-center"),children:(0,jt.jsxs)("h5",{className:"mb-0",children:[a,"'s Command Card"]})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(Xk.Group,{children:(0,jt.jsxs)(Xk.Control,{as:"select",value:i[e.toLowerCase()],onChange:t=>((e,t)=>{s(n=>c(c({},n),{},{[e.toLowerCase()]:t}))})(e,t.target.value),children:[(0,jt.jsx)("option",{value:"",children:"Select Command Card"}),(0,jt.jsx)("option",{value:"Ambush",children:"Ambush (0 Pips)"}),(0,jt.jsx)("option",{value:"Push",children:"Push (1 Pip)"}),(0,jt.jsx)("option",{value:"Assault",children:"Assault (2 Pips)"}),(0,jt.jsx)("option",{value:"Standing Orders",children:"Standing Orders (4 Pips)"}),(0,jt.jsx)("option",{value:"Custom",children:"Custom Command Card"})]})})})]}),u.map(t=>(0,jt.jsxs)(KC,{className:"mb-3",children:[(0,jt.jsxs)(KC.Header,{className:"bg-".concat(o," text-white d-flex justify-content-between align-items-center"),children:[(0,jt.jsx)("span",{children:HN.getDisplayName(t)}),(0,jt.jsxs)("span",{children:[l[t].filter(e=>e.hasOrder).length,"/",l[t].length," Orders"]})]}),(0,jt.jsx)(nj,{variant:"flush",children:l[t].map(t=>(0,jt.jsxs)(nj.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[t.name,t.hasOrder&&(0,jt.jsx)(zN,{bg:"success",className:"ms-2",children:"Order"})]}),(0,jt.jsx)(nC,{variant:t.hasOrder?"outline-success":"outline-secondary",size:"sm",onClick:()=>((e,t)=>{const i=(e===CT.BLUE?n.blueUnits:n.redUnits).find(e=>e.id===t);i&&r(e,t,{hasOrder:!i.hasOrder})})(e,t.id),children:t.hasOrder?"Remove Order":"Issue Order"})]},t.id))})]},t))]})};return(0,jt.jsxs)("div",{className:"command-phase mt-4",children:[(0,jt.jsx)("h4",{className:"mb-3",children:"Command Phase"}),(0,jt.jsx)("p",{className:"mb-4",children:"Select command cards and issue orders to units on the battlefield."}),(0,jt.jsxs)(uN,{children:[(0,jt.jsxs)(Tk,{md:6,children:[(0,jt.jsxs)("h5",{className:"text-primary mb-3",children:["Blue Side: ",n.bluePlayer]}),a(CT.BLUE)]}),(0,jt.jsxs)(Tk,{md:6,children:[(0,jt.jsxs)("h5",{className:"text-danger mb-3",children:["Red Side: ",n.redPlayer]}),a(CT.RED)]})]})]})},TT=t=>{var n,r,i,s,a,o,l;let{unit:u,onUpdate:d}=t;const[h,f]=(0,e.useState)(u.currentWounds||u.wounds),[p,m]=(0,e.useState)(u.suppression||0),[g,y]=(0,e.useState)({aim:(null===(n=u.tokens)||void 0===n?void 0:n.aim)||0,dodge:(null===(r=u.tokens)||void 0===r?void 0:r.dodge)||0,surge:(null===(i=u.tokens)||void 0===i?void 0:i.surge)||0,shield:(null===(s=u.tokens)||void 0===s?void 0:s.shield)||0,ion:(null===(a=u.tokens)||void 0===a?void 0:a.ion)||0,smoke:(null===(o=u.tokens)||void 0===o?void 0:o.smoke)||0,standby:(null===(l=u.tokens)||void 0===l?void 0:l.standby)||0}),v=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;const s=parseInt(e.target.value,10),a=isNaN(s)?r:Math.max(r,Math.min(i,s));if(t(a),n&&n.startsWith("token_")){const e=n.replace("token_",""),t=c(c({},g),{},{[e]:a});y(t),d({currentWounds:h,suppression:p,tokens:t})}else d({currentWounds:"wounds"===n?a:h,suppression:"suppression"===n?a:p,tokens:g})},b=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;e(e=>{const s=Math.max(r,Math.min(i,e+n));if(t&&t.startsWith("token_")){const e=t.replace("token_",""),n=c(c({},g),{},{[e]:s});y(n),d({currentWounds:h,suppression:p,tokens:n})}else d({currentWounds:"wounds"===t?s:h,suppression:"suppression"===t?s:p,tokens:g});return s})},x=e=>{let{name:t,value:n,icon:r,color:i="primary"}=e;return(0,jt.jsx)(KC,{className:"mb-2",children:(0,jt.jsx)(KC.Body,{className:"p-2",children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)(zN,{bg:i,className:"me-2",children:r}),t]}),(0,jt.jsxs)(FN,{size:"sm",className:"w-50",children:[(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>b(()=>{},"token_".concat(t.toLowerCase()),-1,0),disabled:g[t.toLowerCase()]<=0,children:"-"}),(0,jt.jsx)(Xk.Control,{type:"number",value:g[t.toLowerCase()],onChange:e=>v(e,()=>{},"token_".concat(t.toLowerCase()),0),min:"0",style:{textAlign:"center"}}),(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>b(()=>{},"token_".concat(t.toLowerCase()),1,0),children:"+"})]})]})})})};return(0,jt.jsxs)("div",{children:[(0,jt.jsxs)(uN,{className:"mb-4",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Unit Status"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsxs)(Xk.Label,{children:["Wounds (",h,"/",u.wounds,")"]}),(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(nC,{variant:"outline-danger",onClick:()=>b(f,"wounds",-1,0,u.wounds),disabled:h<=0,children:"Take Wound"}),(0,jt.jsx)(Xk.Control,{type:"number",value:h,onChange:e=>v(e,f,"wounds",0,u.wounds),min:"0",max:u.wounds}),(0,jt.jsx)(nC,{variant:"outline-success",onClick:()=>b(f,"wounds",1,0,u.wounds),disabled:h>=u.wounds,children:"Heal Wound"})]})]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsxs)(Xk.Label,{children:["Suppression",p>=3&&(0,jt.jsx)(zN,{bg:"warning",className:"ms-2",children:"Suppressed"}),p>=6&&(0,jt.jsx)(zN,{bg:"danger",className:"ms-2",children:"Panicked"})]}),(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>b(m,"suppression",-1,0),disabled:p<=0,children:"Remove"}),(0,jt.jsx)(Xk.Control,{type:"number",value:p,onChange:e=>v(e,m,"suppression",0),min:"0"}),(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>b(m,"suppression",1,0),children:"Add"})]})]}),(0,jt.jsx)("div",{className:"mb-3",children:(0,jt.jsx)(Xk.Check,{type:"checkbox",label:"Unit has activated",checked:u.hasActivated,onChange:e=>d({hasActivated:e.target.checked})})}),(0,jt.jsx)("div",{className:"mb-3",children:(0,jt.jsx)(Xk.Check,{type:"checkbox",label:"Unit has order",checked:u.hasOrder,onChange:e=>d({hasOrder:e.target.checked})})})]})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Tokens"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(x,{name:"Aim",value:g.aim,icon:"\ud83c\udfaf",color:"primary"}),(0,jt.jsx)(x,{name:"Dodge",value:g.dodge,icon:"\ud83d\udee1\ufe0f",color:"success"}),(0,jt.jsx)(x,{name:"Surge",value:g.surge,icon:"\u26a1",color:"warning"}),(0,jt.jsx)(x,{name:"Shield",value:g.shield,icon:"\ud83d\udd04",color:"info"}),(0,jt.jsx)(x,{name:"Ion",value:g.ion,icon:"\u26a1",color:"danger"}),(0,jt.jsx)(x,{name:"Smoke",value:g.smoke,icon:"\ud83d\udca8",color:"secondary"}),(0,jt.jsx)(x,{name:"Standby",value:g.standby,icon:"\u23f2\ufe0f",color:"dark"})]})]})})]}),(0,jt.jsx)("div",{className:"d-flex justify-content-end",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>{d({currentWounds:h,suppression:p,tokens:g})},children:"Apply All Changes"})})]})},IT=t=>{let{battle:n,onUnitUpdate:r,onSetSelectedUnit:i}=t;const[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(null),u=e=>{const t=e===CT.BLUE?n.blueUnits:n.redUnits,s=e===CT.BLUE?n.bluePlayer:n.redPlayer,o=e===CT.BLUE?"primary":"danger",c=n.activePlayer===e;return(0,jt.jsxs)(KC,{className:"mb-4 ".concat(c?"border-".concat(o):""),children:[(0,jt.jsxs)(KC.Header,{className:"".concat(c?"bg-".concat(o," text-white"):""," d-flex justify-content-between align-items-center"),children:[(0,jt.jsxs)("h5",{className:"mb-0",children:[s,"'s Units"]}),(0,jt.jsx)("div",{children:c&&(0,jt.jsx)(zN,{bg:"success",children:"Active Player"})})]}),(0,jt.jsxs)(KC.Body,{className:c?"":"opacity-75",children:[(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("strong",{children:"Activated:"})," ",t.filter(e=>e.hasActivated).length,"/",t.length," Units"]}),(0,jt.jsx)(nj,{children:t.map(t=>{const s=t.hasOrder,o=t.hasActivated;return(0,jt.jsxs)(nj.Item,{className:"d-flex justify-content-between align-items-center",variant:o?"light":s?"info":"white",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"fw-bold",children:t.name}),(0,jt.jsxs)("div",{className:"small",children:["Wounds: ",t.currentWounds,"/",t.wounds," | Suppression: ",t.suppression||0]}),o&&(0,jt.jsx)(zN,{bg:"secondary",className:"me-1",children:"Activated"}),s&&(0,jt.jsx)(zN,{bg:"info",className:"me-1",children:"Order"}),t.suppression>=3&&(0,jt.jsx)(zN,{bg:"warning",children:"Suppressed"}),t.suppression>=6&&(0,jt.jsx)(zN,{bg:"danger",children:"Panicked"})]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{variant:"outline-primary",size:"sm",onClick:()=>((e,t)=>{a(e),l(t),i&&i(e)})(t,e),className:"me-2",disabled:!c,children:"View"}),(0,jt.jsx)(nC,{variant:o?"secondary":"success",size:"sm",onClick:()=>((e,t)=>{const i=(e===CT.BLUE?n.blueUnits:n.redUnits).find(e=>e.id===t);i&&(r(e,t,{hasActivated:!0}),a(i),l(e))})(e,t.id),disabled:o||!c,children:o?"Activated":"Activate"})]})]},t.id)})})]})]})};return(0,jt.jsxs)("div",{className:"activation-phase mt-4",children:[(0,jt.jsx)("h4",{className:"mb-3",children:"Activation Phase"}),(0,jt.jsx)("p",{className:"mb-4",children:"Activate units to perform actions. Each unit can be activated once per round."}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:u(CT.BLUE)}),(0,jt.jsx)(Tk,{md:6,children:u(CT.RED)})]}),s&&(0,jt.jsxs)(KC,{className:"mt-4",children:[(0,jt.jsxs)(KC.Header,{className:"bg-".concat(o===CT.BLUE?"primary":"danger"," text-white d-flex justify-content-between align-items-center"),children:[(0,jt.jsxs)("h5",{className:"mb-0",children:["Unit Tracker: ",s.name]}),(0,jt.jsx)(nC,{variant:"outline-light",size:"sm",onClick:()=>{a(null),l(null)},children:"Close Tracker"})]}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)(TT,{unit:s,onUpdate:e=>{s&&o&&(r(o,s.id,e),a(t=>t?c(c({},t),e):null))}})})]})]})},AT=e=>{let{battle:t,onUnitUpdate:n}=e;const r=e=>{const r=e===CT.BLUE?t.blueUnits:t.redUnits,i=e===CT.BLUE?t.bluePlayer:t.redPlayer,s=e===CT.BLUE?"primary":"danger";return(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{className:"bg-".concat(s," text-white"),children:(0,jt.jsxs)("h5",{className:"mb-0",children:[i,"'s Units"]})}),(0,jt.jsx)(KC.Body,{children:r.map(r=>{var i,s,a,o,l,c,u;return(0,jt.jsxs)(KC,{className:"mb-3",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h6",{className:"mb-0",children:r.name})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("div",{className:"fw-bold",children:"Unit Status:"}),(0,jt.jsxs)("div",{children:["Wounds: ",r.currentWounds,"/",r.wounds]}),(0,jt.jsxs)("div",{children:["Suppression: ",r.suppression||0,r.suppression>=3&&(0,jt.jsx)(zN,{bg:"warning",className:"ms-2",children:"Suppressed"}),r.suppression>=6&&(0,jt.jsx)(zN,{bg:"danger",className:"ms-2",children:"Panicked"})]})]}),(0,jt.jsxs)("div",{className:"mb-3",children:[(0,jt.jsx)("div",{className:"fw-bold",children:"Tokens:"}),(0,jt.jsxs)("div",{className:"d-flex flex-wrap",children:[(null===(i=r.tokens)||void 0===i?void 0:i.aim)>0&&(0,jt.jsxs)(zN,{bg:"primary",className:"me-2 mb-1",children:["Aim: ",r.tokens.aim]}),(null===(s=r.tokens)||void 0===s?void 0:s.dodge)>0&&(0,jt.jsxs)(zN,{bg:"success",className:"me-2 mb-1",children:["Dodge: ",r.tokens.dodge]}),(null===(a=r.tokens)||void 0===a?void 0:a.surge)>0&&(0,jt.jsxs)(zN,{bg:"warning",className:"me-2 mb-1",children:["Surge: ",r.tokens.surge]}),(null===(o=r.tokens)||void 0===o?void 0:o.shield)>0&&(0,jt.jsxs)(zN,{bg:"info",className:"me-2 mb-1",children:["Shield: ",r.tokens.shield]}),(null===(l=r.tokens)||void 0===l?void 0:l.ion)>0&&(0,jt.jsxs)(zN,{bg:"danger",className:"me-2 mb-1",children:["Ion: ",r.tokens.ion]}),(null===(c=r.tokens)||void 0===c?void 0:c.smoke)>0&&(0,jt.jsxs)(zN,{bg:"secondary",className:"me-2 mb-1",children:["Smoke: ",r.tokens.smoke]}),(null===(u=r.tokens)||void 0===u?void 0:u.standby)>0&&(0,jt.jsxs)(zN,{bg:"dark",className:"me-2 mb-1",children:["Standby: ",r.tokens.standby]})]})]}),(0,jt.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,jt.jsx)(nC,{variant:"outline-secondary",size:"sm",className:"me-2 mb-2",onClick:()=>((e,r)=>{const i=(e===CT.BLUE?t.blueUnits:t.redUnits).find(e=>e.id===r);if(i){const t=Math.max(0,(i.suppression||0)-1);n(e,r,{suppression:t})}})(e,r.id),disabled:0===(r.suppression||0),children:"Rally Step (-1 Suppression)"}),(0,jt.jsx)(nC,{variant:"outline-secondary",size:"sm",className:"me-2 mb-2",onClick:()=>((e,r)=>{(e===CT.BLUE?t.blueUnits:t.redUnits).find(e=>e.id===r)&&n(e,r,{suppression:0})})(e,r.id),disabled:0===(r.suppression||0),children:"Recover (Clear Suppression)"}),(0,jt.jsx)(nC,{variant:"outline-secondary",size:"sm",className:"mb-2",onClick:()=>((e,r)=>{var i,s,a,o;n(e,r,{tokens:{aim:0,dodge:0,surge:0,shield:e===CT.BLUE?(null===(i=t.blueUnits.find(e=>e.id===r))||void 0===i||null===(s=i.tokens)||void 0===s?void 0:s.shield)||0:(null===(a=t.redUnits.find(e=>e.id===r))||void 0===a||null===(o=a.tokens)||void 0===o?void 0:o.shield)||0,ion:0,smoke:0,standby:0}})})(e,r.id),children:"Remove Unspent Tokens"})]})]})]},r.id)})})]})};return(0,jt.jsxs)("div",{className:"end-phase mt-4",children:[(0,jt.jsx)("h4",{className:"mb-3",children:"End Phase"}),(0,jt.jsx)("p",{className:"mb-4",children:"Remove unspent tokens, perform the Rally step for suppressed units, and prepare for the next round."}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:r(CT.BLUE)}),(0,jt.jsx)(Tk,{md:6,children:r(CT.RED)})]})]})},RT=e=>{let{battle:t,onAdvancePhase:n,onChangeActivePlayer:r,onEndBattle:i}=e;const s=t.activePlayer===CT.BLUE?{name:t.bluePlayer,army:t.blueArmy,units:t.blueUnits,color:"primary",bgColor:"#f0f8ff"}:{name:t.redPlayer,army:t.redArmy,units:t.redUnits,color:"danger",bgColor:"#fff0f0"};const a=t.blueUnits.filter(e=>e.hasActivated).length,o=t.redUnits.filter(e=>e.hasActivated).length,l=t.blueUnits.filter(e=>e.hasOrder).length,c=t.redUnits.filter(e=>e.hasOrder).length,u=t.blueUnits.length,d=t.redUnits.length,h=t.activePlayer===CT.BLUE?a===u:o===d;return(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)(uN,{className:"mb-4",children:[(0,jt.jsx)(Tk,{md:8,children:(0,jt.jsx)(KC,{children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{sm:6,children:(0,jt.jsxs)("div",{className:"p-3",style:{background:"#f0f8ff",borderRadius:"5px"},children:[(0,jt.jsxs)("h5",{className:"text-primary",children:[t.bluePlayer,t.activePlayer===CT.BLUE&&(0,jt.jsx)(zN,{bg:"primary",className:"ms-2",children:"Active"})]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Army:"})," ",t.blueArmy]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Units:"})," ",t.blueUnits.length]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Activated:"})," ",a,"/",u]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Orders:"})," ",l,"/",u]})]})}),(0,jt.jsx)(Tk,{sm:6,children:(0,jt.jsxs)("div",{className:"p-3",style:{background:"#fff0f0",borderRadius:"5px"},children:[(0,jt.jsxs)("h5",{className:"text-danger",children:[t.redPlayer,t.activePlayer===CT.RED&&(0,jt.jsx)(zN,{bg:"danger",className:"ms-2",children:"Active"})]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Army:"})," ",t.redArmy]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Units:"})," ",t.redUnits.length]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Activated:"})," ",o,"/",d]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)("strong",{children:"Orders:"})," ",c,"/",d]})]})})]})})})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(KC,{className:"border-".concat(s.color),children:[(0,jt.jsx)(KC.Header,{className:"bg-".concat(s.color," text-white"),children:(0,jt.jsx)("h5",{className:"mb-0",children:"Active Player"})}),(0,jt.jsxs)(KC.Body,{className:"text-center",style:{background:s.bgColor},children:[(0,jt.jsx)("h4",{className:"text-".concat(s.color," mb-3"),children:s.name}),(0,jt.jsx)("div",{className:"mb-3",children:s.army}),(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:r,size:"sm",children:"Switch Active Player"})]})]})})]}),(0,jt.jsx)(uN,{className:"mb-3",children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsxs)("div",{className:"battle-phase-description p-3 mb-3",style:{background:"#f8f9fa",borderRadius:"5px"},children:[(0,jt.jsx)("h5",{children:ST.getDisplayName(t.currentPhase)}),(0,jt.jsx)("p",{className:"mb-0",children:ST.getDescription(t.currentPhase)})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{variant:"primary",onClick:n,disabled:t.currentPhase===ST.ACTIVATION&&!h,children:(()=>{const e=ST.getNextPhase(t.currentPhase);return t.currentPhase===ST.END&&e===ST.COMMAND?"Start Round ".concat(t.currentRound+1):"Advance to ".concat(ST.getDisplayName(e))})()}),t.currentPhase===ST.ACTIVATION&&!h&&(0,jt.jsxs)("small",{className:"d-block text-muted mt-1",children:["All ",t.activePlayer===CT.BLUE?"Blue":"Red"," units must be activated before advancing to the next phase."]})]}),(0,jt.jsx)(nC,{variant:"danger",onClick:i,children:"End Battle"})]})]})})]})},PT=Object.freeze({COMMAND_PHASE:"command_phase",ACTIVATION_START:"activation_start",ACTIVATION_END:"activation_end",ATTACK_DECLARE:"attack_declare",ATTACK_DICE:"attack_dice",DEFENSE_DICE:"defense_dice",END_PHASE:"end_phase",RALLY:"rally",GENERAL:"general",UNIT_SELECTION:"unit_selection",ARMY_BUILDING:"army_building",getDisplayName:function(e){return{[this.COMMAND_PHASE]:"Command Phase",[this.ACTIVATION_START]:"Activation Start",[this.ACTIVATION_END]:"Activation End",[this.ATTACK_DECLARE]:"Attack Declaration",[this.ATTACK_DICE]:"Attack Dice",[this.DEFENSE_DICE]:"Defense Dice",[this.END_PHASE]:"End Phase",[this.RALLY]:"Rally Step",[this.GENERAL]:"General",[this.UNIT_SELECTION]:"Unit Selection",[this.ARMY_BUILDING]:"Army Building"}[e]||"Unknown"},getDescription:function(e){return{[this.COMMAND_PHASE]:"Reminders shown during the Command Phase",[this.ACTIVATION_START]:"Reminders shown when a unit begins activation",[this.ACTIVATION_END]:"Reminders shown when a unit finishes activation",[this.ATTACK_DECLARE]:"Reminders shown when declaring an attack",[this.ATTACK_DICE]:"Reminders shown when rolling attack dice",[this.DEFENSE_DICE]:"Reminders shown when rolling defense dice",[this.END_PHASE]:"Reminders shown during the End Phase",[this.RALLY]:"Reminders shown during the Rally step",[this.GENERAL]:"General reminders always visible",[this.UNIT_SELECTION]:"Reminders shown when selecting units",[this.ARMY_BUILDING]:"Reminders shown during army construction"}[e]||"No description available"},getPhaseTypes:function(){return[this.COMMAND_PHASE,this.ACTIVATION_START,this.ACTIVATION_END,this.END_PHASE,this.RALLY]},getCombatTypes:function(){return[this.ATTACK_DECLARE,this.ATTACK_DICE,this.DEFENSE_DICE]},getArmyBuildingTypes:function(){return[this.UNIT_SELECTION,this.ARMY_BUILDING]},getAllTypes:function(){return[this.COMMAND_PHASE,this.ACTIVATION_START,this.ACTIVATION_END,this.ATTACK_DECLARE,this.ATTACK_DICE,this.DEFENSE_DICE,this.END_PHASE,this.RALLY,this.GENERAL,this.UNIT_SELECTION,this.ARMY_BUILDING]},getBadgeColor:function(e){return{[this.COMMAND_PHASE]:"primary",[this.ACTIVATION_START]:"success",[this.ACTIVATION_END]:"info",[this.ATTACK_DECLARE]:"danger",[this.ATTACK_DICE]:"danger",[this.DEFENSE_DICE]:"warning",[this.END_PHASE]:"secondary",[this.RALLY]:"success",[this.GENERAL]:"dark",[this.UNIT_SELECTION]:"info",[this.ARMY_BUILDING]:"primary"}[e]||"secondary"}}),OT=t=>{let{reminders:n=[],currentPhase:r=null,activeUnit:i=null,position:s="sidebar"}=t;const[a,o]=(0,e.useState)(!0),[l,c]=(0,e.useState)([]);(0,e.useEffect)(()=>{u()},[n,r,i]);const u=()=>{let e=[...n];r&&(e=e.filter(e=>e.reminderType===r||e.reminderType===PT.GENERAL)),i&&(e=e.filter(e=>!e.unitId||e.unitId===i.id)),e.sort((e,t)=>e.reminderType===r&&t.reminderType!==r?-1:e.reminderType!==r&&t.reminderType===r?1:0),c(e)};if(0===l.length)return null;const d=(()=>{const e={};return l.forEach(t=>{const n=t.reminderType;e[n]||(e[n]=[]),e[n].push(t)}),e})();return"sidebar"===s?(0,jt.jsxs)(KC,{className:"reminder-panel sidebar-reminder",style:{position:"sticky",top:"20px",maxHeight:"calc(100vh - 40px)",overflowY:"auto"},children:[(0,jt.jsxs)(KC.Header,{onClick:()=>o(!a),style:{cursor:"pointer"},className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("h5",{className:"mb-0",children:[(0,jt.jsx)("i",{className:"bi bi-bell-fill me-2"}),"Reminders"]}),(0,jt.jsx)(zN,{bg:"primary",children:l.length})]}),(0,jt.jsx)(rx,{in:a,children:(0,jt.jsx)(KC.Body,{className:"p-0",children:Object.entries(d).map(e=>{let[t,n]=e;return(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"p-2 bg-light border-bottom",children:(0,jt.jsx)(zN,{bg:PT.getBadgeColor(t),children:PT.getDisplayName(t)})}),(0,jt.jsx)(nj,{variant:"flush",children:n.map((e,t)=>(0,jt.jsx)(nj.Item,{className:"py-2",children:(0,jt.jsxs)("div",{className:"small",children:[e.source&&(0,jt.jsx)("div",{className:"fw-bold text-muted mb-1",children:e.source}),(0,jt.jsx)("div",{children:e.text}),e.condition&&(0,jt.jsx)("div",{className:"text-muted fst-italic mt-1",children:e.condition})]})},t))})]},t)})})})]}):(0,jt.jsxs)(tk,{variant:"info",dismissible:!1,className:"reminder-panel banner-reminder mb-3",children:[(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,jt.jsxs)("div",{className:"d-flex align-items-center",children:[(0,jt.jsx)("i",{className:"bi bi-bell-fill me-2"}),(0,jt.jsxs)("strong",{children:["Reminders (",l.length,")"]})]}),(0,jt.jsx)(nC,{variant:"link",size:"sm",onClick:()=>o(!a),className:"p-0 text-decoration-none",children:a?"Hide":"Show"})]}),(0,jt.jsx)(rx,{in:a,children:(0,jt.jsx)("div",{children:Object.entries(d).map(e=>{let[t,n]=e;return(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)(zN,{bg:PT.getBadgeColor(t),className:"mb-2",children:PT.getDisplayName(t)}),n.map((e,t)=>(0,jt.jsxs)("div",{className:"mb-2 ps-3",children:[e.source&&(0,jt.jsx)("div",{className:"fw-bold small",children:e.source}),(0,jt.jsx)("div",{className:"small",children:e.text}),e.condition&&(0,jt.jsx)("div",{className:"text-muted fst-italic small",children:e.condition})]},t))]},t)})})})]})},DT=t=>{let{battleId:n}=t;const r=pe(),{currentUser:i}=eb(),[s,a]=(0,e.useState)(null),[o,l]=(0,e.useState)(!0),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(null),[v,b]=(0,e.useState)([]),[x,w]=(0,e.useState)([]);(0,e.useEffect)(()=>{i&&n&&(async()=>{try{l(!0);const r=wg(Xv,"users",i.uid,"battles",n),s=await _y(r);if(s.exists()){var e,t;const n=c(c({id:s.id},s.data()),{},{createdAt:(null===(e=s.data().createdAt)||void 0===e?void 0:e.toDate())||new Date,lastUpdated:(null===(t=s.data().lastUpdated)||void 0===t?void 0:t.toDate())||new Date});a(n)}else d("Battle not found")}catch(r){console.error("Error fetching battle:",r),d("Failed to fetch battle details. Please try again later.")}finally{l(!1)}})()},[i,n]),(0,e.useEffect)(()=>{(async()=>{if(i)try{const e=xg(Xv,"users",i.uid,"abilities"),t=await Cy(e);b(t.docs.map(e=>c({id:e.id},e.data())));const n=xg(Xv,"users",i.uid,"upgradeCards"),r=await Cy(n);w(r.docs.map(e=>c({id:e.id},e.data())))}catch(e){console.error("Error fetching abilities/upgrades:",e)}})()},[i]);const E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;try{f(!0);const t=wg(Xv,"users",i.uid,"battles",n);await Ny(t,c(c({},e),{},{lastUpdated:Ry()}))}catch(t){console.error("Error saving battle:",t),d("Failed to save battle state. Please try again.")}finally{f(!1)}},_=()=>{var e,t;if(!s)return[];const n=[],r=e=>{var t,r;null===(t=e.abilities)||void 0===t||t.forEach(t=>{var r;const i=v.find(e=>e.id===t);null===i||void 0===i||null===(r=i.reminders)||void 0===r||r.forEach(t=>{n.push(c(c({},t),{},{source:"".concat(e.name," - ").concat(i.name),unitId:e.id}))})}),null===(r=e.upgradeSlots)||void 0===r||r.forEach(t=>{var r;null===(r=t.equippedUpgrades)||void 0===r||r.forEach(t=>{var r;const i=x.find(e=>e.id===t);null===i||void 0===i||null===(r=i.reminders)||void 0===r||r.forEach(t=>{n.push(c(c({},t),{},{source:"".concat(e.name," - ").concat(i.name),unitId:e.id}))})})})};return null===(e=s.blueUnits)||void 0===e||e.forEach(r),null===(t=s.redUnits)||void 0===t||t.forEach(r),n},S=(e,t,n)=>{const r=c({},s);e===CT.BLUE?r.blueUnits=s.blueUnits.map(e=>e.id===t?c(c({},e),n):e):r.redUnits=s.redUnits.map(e=>e.id===t?c(c({},e),n):e),a(r),E(r)},C=async e=>{if(!p)return void m(!0);const t=c(c({},s),{},{isComplete:!0,winner:e});a(t),await E(t),r("/battles")};return o?(0,jt.jsx)(eN,{text:"Loading battle..."}):u?(0,jt.jsxs)(tk,{variant:"danger",children:[u,(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>r("/battles"),children:"Back to Battles"})})]}):s?s.isComplete?(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("h4",{children:[s.name," - Battle Complete"]})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("div",{className:"text-center mb-4",children:[(0,jt.jsxs)("h5",{children:["Winner: ",s.winner===CT.BLUE?s.bluePlayer:s.redPlayer]}),(0,jt.jsx)(zN,{bg:s.winner===CT.BLUE?"primary":"danger",className:"p-2 fs-6",children:s.winner===CT.BLUE?s.blueArmy:s.redArmy})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between mb-4",children:[(0,jt.jsxs)("div",{className:"text-center p-3",style:{background:"#f0f8ff",borderRadius:"5px",flex:"1",marginRight:"10px"},children:[(0,jt.jsx)("h5",{className:"text-primary",children:s.bluePlayer}),(0,jt.jsx)("div",{children:s.blueArmy}),(0,jt.jsxs)("div",{children:["Units: ",s.blueUnits.length]}),s.winner===CT.BLUE&&(0,jt.jsx)(zN,{bg:"success",className:"mt-2",children:"Winner"})]}),(0,jt.jsxs)("div",{className:"text-center p-3",style:{background:"#fff0f0",borderRadius:"5px",flex:"1",marginLeft:"10px"},children:[(0,jt.jsx)("h5",{className:"text-danger",children:s.redPlayer}),(0,jt.jsx)("div",{children:s.redArmy}),(0,jt.jsxs)("div",{children:["Units: ",s.redUnits.length]}),s.winner===CT.RED&&(0,jt.jsx)(zN,{bg:"success",className:"mt-2",children:"Winner"})]})]}),(0,jt.jsx)("div",{className:"d-flex justify-content-between",children:(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>r("/battles"),children:"Back to Battles"})})]})]}):(0,jt.jsxs)(jt.Fragment,{children:[h&&(0,jt.jsx)(tk,{variant:"info",children:"Saving battle state..."}),p&&(0,jt.jsxs)(tk,{variant:"warning",children:[(0,jt.jsx)(tk.Heading,{children:"Confirm End Battle"}),(0,jt.jsx)("p",{children:"Are you sure you want to end this battle? This action will mark the battle as complete."}),(0,jt.jsx)("p",{children:"Select the winner:"}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsxs)(nC,{variant:"primary",onClick:()=>C(CT.BLUE),className:"me-2",children:[s.bluePlayer," (",s.blueArmy,")"]}),(0,jt.jsxs)(nC,{variant:"danger",onClick:()=>C(CT.RED),className:"me-2",children:[s.redPlayer," (",s.redArmy,")"]}),(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"})]})]}),(0,jt.jsxs)("div",{className:"d-flex",children:[(0,jt.jsx)("div",{className:"battle-content flex-grow-1",children:(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h4",{children:s.name}),(0,jt.jsxs)(zN,{bg:"primary",className:"p-2",children:["Round ",s.currentRound," - ",ST.getDisplayName(s.currentPhase)]})]})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(RT,{battle:s,onAdvancePhase:async()=>{const e=ST.getNextPhase(s.currentPhase);let t=s.currentRound;s.currentPhase===ST.END&&e===ST.COMMAND&&(t+=1);const n=c(c({},s),{},{currentPhase:e,currentRound:t});s.currentPhase===ST.END&&e===ST.COMMAND&&(n.blueUnits=s.blueUnits.map(e=>c(c({},e),{},{hasOrder:!1,hasActivated:!1})),n.redUnits=s.redUnits.map(e=>c(c({},e),{},{hasOrder:!1,hasActivated:!1})),n.activePlayer=s.activePlayer===CT.BLUE?CT.RED:CT.BLUE),a(n),await E(n)},onChangeActivePlayer:()=>{const e=c(c({},s),{},{activePlayer:s.activePlayer===CT.BLUE?CT.RED:CT.BLUE});a(e),E(e)},onEndBattle:()=>m(!0)}),s.currentPhase===ST.COMMAND&&(0,jt.jsx)(jT,{battle:s,onUnitUpdate:S,onSave:E}),s.currentPhase===ST.ACTIVATION&&(0,jt.jsx)(IT,{battle:s,onUnitUpdate:S,onSetSelectedUnit:y,onSave:E}),s.currentPhase===ST.END&&(0,jt.jsx)(AT,{battle:s,onUnitUpdate:S,onSave:E})]})]})}),(0,jt.jsx)("div",{className:"d-none d-lg-block ms-3",style:{width:"300px"},children:(0,jt.jsx)(OT,{reminders:_(),currentPhase:s.currentPhase,activeUnit:g,position:"sidebar"})})]}),(0,jt.jsx)("div",{className:"d-block d-lg-none mb-4",children:(0,jt.jsx)(OT,{reminders:_(),currentPhase:s.currentPhase,activeUnit:g,position:"banner"})})]}):(0,jt.jsxs)(tk,{variant:"warning",children:["Battle not found.",(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{variant:"primary",onClick:()=>r("/battles"),children:"Back to Battles"})})]})},LT=()=>{const{battleId:t}=ge(),n=de(),r=pe(),[i,s]=(0,e.useState)("list");(0,e.useEffect)(()=>{window.location.pathname.includes("/battles/create")?s("create"):s(t?"detail":"list")},[t,n.pathname]);return(0,jt.jsxs)(Bt,{children:[(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsxs)(Tk,{children:[(0,jt.jsx)("h1",{children:"Battles"}),(0,jt.jsx)("p",{children:"Track and manage your Star Wars Legion battles."})]})}),(0,jt.jsx)(uN,{children:(0,jt.jsx)(Tk,{children:(0,jt.jsx)(PN.Container,{activeKey:i,onSelect:e=>{s(e),"list"===e?r("/battles"):"create"===e&&r("/battles/create")},children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)(CE,{variant:"tabs",children:[(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"list",children:"My Battles"})}),(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"create",children:"New Battle"})}),t&&(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{eventKey:"detail",children:"Battle Tracker"})})]})}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(PN.Content,{children:[(0,jt.jsx)(PN.Pane,{eventKey:"list",children:(0,jt.jsx)(kT,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"create",children:(0,jt.jsx)(NT,{})}),(0,jt.jsx)(PN.Pane,{eventKey:"detail",children:t&&(0,jt.jsx)(DT,{battleId:t})})]})})]})})})})]})},MT=Object.freeze({KEYWORD:"keyword",WEAPON_KEYWORD:"weapon_keyword",RULE:"rule",ABILITY:"ability",UPGRADE:"upgrade",TERRAIN:"terrain",CONDITION:"condition",CUSTOM:"custom",getDisplayName:function(e){switch(e){case this.KEYWORD:return"Unit Keyword";case this.WEAPON_KEYWORD:return"Weapon Keyword";case this.RULE:return"Game Rule";case this.ABILITY:return"Special Ability";case this.UPGRADE:return"Upgrade Card";case this.TERRAIN:return"Terrain Rule";case this.CONDITION:return"Battlefield Condition";case this.CUSTOM:return"Custom Reference";default:return"Unknown Category"}},getIconClass:function(e){switch(e){case this.KEYWORD:return"bi-tag-fill";case this.WEAPON_KEYWORD:return"bi-lightning-fill";case this.RULE:return"bi-book-fill";case this.ABILITY:return"bi-stars";case this.UPGRADE:return"bi-arrow-up-circle-fill";case this.TERRAIN:return"bi-tree-fill";case this.CONDITION:return"bi-cloud-fill";case this.CUSTOM:return"bi-bookmark-fill";default:return"bi-question-circle"}},getBadgeColor:function(e){switch(e){case this.KEYWORD:return"secondary";case this.WEAPON_KEYWORD:return"info";case this.RULE:return"primary";case this.ABILITY:return"success";case this.UPGRADE:return"warning";case this.TERRAIN:return"dark";case this.CONDITION:return"light";case this.CUSTOM:return"danger";default:return"secondary"}},getAllCategories:function(){return[this.KEYWORD,this.WEAPON_KEYWORD,this.RULE,this.ABILITY,this.UPGRADE,this.TERRAIN,this.CONDITION,this.CUSTOM]}}),UT=t=>{let{placeholder:n,onSearch:r,value:i="",debounceTime:s=300}=t;const[a,o]=(0,e.useState)(i);(0,e.useEffect)(()=>{o(i)},[i]),(0,e.useEffect)(()=>{const e=setTimeout(()=>{a!==i&&r(a)},s);return()=>{clearTimeout(e)}},[a,r,s,i]);return(0,jt.jsx)(Xk,{onSubmit:e=>{e.preventDefault(),r(a)},children:(0,jt.jsxs)(FN,{children:[(0,jt.jsx)(Xk.Control,{type:"text",placeholder:n||"Search...",value:a,onChange:e=>o(e.target.value),"aria-label":"Search"}),a&&(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>{o(""),r("")},title:"Clear search",children:"\xd7"}),(0,jt.jsx)(nC,{type:"submit",variant:"outline-primary",children:(0,jt.jsx)("i",{className:"bi bi-search"})})]})})},FT=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(""),[u,d]=(0,e.useState)("all"),[h,f]=(0,e.useState)(""),{currentUser:p}=eb();(0,e.useEffect)(()=>{(async()=>{try{a(!0);let e=oy(xg(Xv,"references"),hy("term","asc"));const t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));if(p){const e=oy(xg(Xv,"users",p.uid,"references"),hy("term","asc"));(await Cy(e)).docs.forEach(e=>{t.push(c(c({id:e.id},e.data()),{},{isCustom:!0}))}),t.sort((e,t)=>e.term.localeCompare(t.term))}n(t),i(t),l("")}catch(e){console.error("Error fetching references:",e),l("Failed to fetch references. Please try again later.")}finally{a(!1)}})()},[p]),(0,e.useEffect)(()=>{let e=t;if("all"!==u&&(e=e.filter(e=>e.category===u)),h){const t=h.toLowerCase();e=e.filter(e=>{var n;return e.term.toLowerCase().includes(t)||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t))})}i(e)},[u,h,t]);const m=()=>{d("all"),f("")};return(0,jt.jsxs)("div",{className:"reference-list",children:[(0,jt.jsx)(KC,{className:"mb-4",children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{className:"align-items-end",children:[(0,jt.jsx)(Tk,{md:6,className:"mb-3 mb-md-0",children:(0,jt.jsx)(UT,{placeholder:"Search references...",onSearch:e=>{f(e)},value:h})}),(0,jt.jsx)(Tk,{md:4,className:"mb-3 mb-md-0",children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Filter by Category"}),(0,jt.jsxs)(Xk.Select,{value:u,onChange:e=>d(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Categories"}),MT.getAllCategories().map(e=>(0,jt.jsx)("option",{value:e,children:MT.getDisplayName(e)},e))]})]})}),(0,jt.jsx)(Tk,{md:2,className:"d-flex justify-content-end",children:(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:m,disabled:"all"===u&&!h,className:"mb-2",children:"Clear Filters"})})]})})}),p&&(0,jt.jsx)("div",{className:"mb-4 text-end",children:(0,jt.jsx)(nC,{as:vt,to:"/references/create",variant:"primary",children:"Create Reference"})}),o&&(0,jt.jsx)(tk,{variant:"danger",className:"mb-4",children:o}),s?(0,jt.jsxs)("div",{className:"text-center py-5",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{className:"mt-3",children:"Loading references..."})]}):r.length>0?(0,jt.jsx)(uN,{className:"reference-grid",children:r.map(e=>{var t;return(0,jt.jsx)(Tk,{md:6,lg:4,className:"mb-4",children:(0,jt.jsxs)(KC,{className:"h-100 reference-card",children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h5",{className:"mb-0",children:e.term}),(0,jt.jsx)(zN,{bg:MT.getBadgeColor(e.category),className:"ms-2",children:MT.getDisplayName(e.category)})]}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)("p",{className:"reference-description",children:(null===(t=e.description)||void 0===t?void 0:t.length)>150?"".concat(e.description.substring(0,150),"..."):e.description}),e.examples&&e.examples.length>0&&(0,jt.jsx)("div",{className:"mb-3",children:(0,jt.jsxs)("small",{className:"text-muted",children:["Examples: ",e.examples.length]})}),(0,jt.jsxs)("div",{className:"reference-footer d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("small",{className:"text-muted",children:e.isCustom?"Custom Reference":"System Reference"}),(0,jt.jsx)(nC,{as:vt,to:"/references/".concat(e.id),variant:"primary",size:"sm",children:"View Details"})]})]})]})},e.id)})}):(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"text-center py-5",children:[(0,jt.jsx)("h4",{children:"No matching references found"}),(0,jt.jsx)("p",{className:"mb-4",children:"all"!==u||h?"Try adjusting your search filters":"No references are available yet"}),("all"!==u||h)&&(0,jt.jsx)(nC,{variant:"outline-primary",onClick:m,children:"Clear All Filters"})]})})]})};var BT=n(917);const VT=()=>{const{id:t}=ge(),{currentUser:n}=eb(),r=pe(),[i,s]=(0,e.useState)(null),[a,o]=(0,e.useState)(!0),[l,u]=(0,e.useState)(null);(0,e.useEffect)(()=>{(async()=>{try{o(!0);const e=wg(Xv,"references",t),r=await _y(e);if(r.exists())s(c(c({id:r.id},r.data()),{},{isSystem:!0}));else if(n){const e=wg(Xv,"users",n.uid,"references",t),r=await _y(e);r.exists()?s(c(c({id:r.id},r.data()),{},{isCustom:!0})):u("Reference not found")}else u("Reference not found")}catch(e){console.error("Error fetching reference details:",e),u("Error loading reference details. Please try again.")}finally{o(!1)}})()},[t,n]);return a?(0,jt.jsxs)("div",{className:"text-center py-5",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{children:"Loading reference details..."})]}):l?(0,jt.jsxs)(tk,{variant:"danger",children:[l,(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{as:vt,to:"/references",variant:"primary",children:"Back to References"})})]}):i?(0,jt.jsx)("div",{className:"reference-detail",children:(0,jt.jsxs)(KC,{children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h3",{className:"mb-0",children:i.term}),(0,jt.jsx)(zN,{bg:MT.getBadgeColor(i.category),className:"ms-2",children:MT.getDisplayName(i.category)})]}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsxs)("section",{className:"mb-4",children:[(0,jt.jsx)("h4",{children:"Description"}),(0,jt.jsx)("p",{children:i.description})]}),i.examples&&i.examples.length>0&&(0,jt.jsxs)("section",{className:"mb-4",children:[(0,jt.jsx)("h4",{children:"Examples"}),(0,jt.jsx)(nj,{variant:"flush",children:i.examples.map((e,t)=>(0,jt.jsx)(nj.Item,{children:e},t))})]}),i.relatedTerms&&i.relatedTerms.length>0&&(0,jt.jsxs)("section",{className:"mb-4",children:[(0,jt.jsx)("h4",{children:"Related Terms"}),(0,jt.jsx)("div",{className:"d-flex flex-wrap gap-2",children:i.relatedTerms.map((e,t)=>(0,jt.jsx)(nC,{as:vt,to:"/references/".concat(e.id),variant:"outline-secondary",size:"sm",children:e.term},t))})]}),(0,jt.jsx)("div",{className:"reference-source mt-4 text-muted",children:(0,jt.jsxs)("small",{children:[i.isSystem?"System Reference":"Custom Reference",i.lastUpdated&&(0,jt.jsxs)("span",{className:"ms-2",children:["\u2022 Last updated: ",i.lastUpdated.toDate().toLocaleDateString()]})]})})]}),(0,jt.jsxs)(KC.Footer,{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{as:vt,to:"/references",variant:"secondary",children:"Back to References"}),i.isCustom&&n&&(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{as:vt,to:"/references/edit/".concat(t),variant:"primary",className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"danger",onClick:async()=>{(0,BT.ZX)({title:"Confirm Deletion",message:"Are you sure you want to delete this reference? This action cannot be undone.",buttons:[{label:"Yes, Delete It",onClick:async()=>{try{o(!0),i.isCustom&&n&&(await jy(wg(Xv,"users",n.uid,"references",t)),r("/references"))}catch(e){console.error("Error deleting reference:",e),u("Failed to delete reference. Please try again."),o(!1)}}},{label:"Cancel",onClick:()=>{}}]})},children:"Delete"})]})]})]})}):(0,jt.jsxs)(tk,{variant:"warning",children:["Reference not found",(0,jt.jsx)("div",{className:"mt-3",children:(0,jt.jsx)(nC,{as:vt,to:"/references",variant:"primary",children:"Back to References"})})]})},zT=()=>{const{id:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!!t),[a,o]=(0,e.useState)(!1),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)({term:"",category:MT.CUSTOM,description:"",examples:[""],relatedTerms:[]});(0,e.useEffect)(()=>{(async()=>{try{if(!t||!r)return;const e=wg(Xv,"users",r.uid,"references",t),n=await _y(e);if(n.exists()){const e=n.data();p(c(c({},e),{},{examples:e.examples||[""],relatedTerms:e.relatedTerms||[]}))}else u("Reference not found or you do not have permission to edit it")}catch(e){console.error("Error fetching reference:",e),u("Failed to load reference. Please try again.")}finally{s(!1)}})()},[t,r]);const m=e=>{const{name:t,value:n}=e.target;p(e=>c(c({},e),{},{[t]:n}))},g=async e=>{e.preventDefault();try{if(o(!0),u(""),!f.term.trim())throw new Error("Term is required");if(!f.description.trim())throw new Error("Description is required");const e=f.examples.filter(e=>""!==e.trim()),i=c(c({},f),{},{examples:e,lastUpdated:Ry()});if(t)await Ny(wg(Xv,"users",r.uid,"references",t),i),h("Reference updated successfully!");else{i.createdAt=Ry(),i.createdBy=r.uid;const e=await Ty(xg(Xv,"users",r.uid,"references"),i);h("Reference created successfully!"),setTimeout(()=>{n("/references/".concat(e.id))},1500)}}catch(i){console.error("Error saving reference:",i),u(i.message||"Failed to save reference. Please try again.")}finally{o(!1)}};return i?(0,jt.jsxs)("div",{className:"text-center py-5",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{children:"Loading reference data..."})]}):(0,jt.jsx)("div",{className:"reference-form",children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h3",{className:"mb-0",children:t?"Edit Reference":"Create New Reference"})}),(0,jt.jsxs)(KC.Body,{children:[l&&(0,jt.jsx)(tk,{variant:"danger",children:l}),d&&(0,jt.jsx)(tk,{variant:"success",children:d}),(0,jt.jsxs)(Xk,{onSubmit:g,children:[(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{md:8,children:(0,jt.jsxs)(Xk.Group,{controlId:"term",children:[(0,jt.jsx)(Xk.Label,{children:"Term*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"term",value:f.term,onChange:m,placeholder:"Enter term or keyword",required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"The name of the rule, keyword, or concept"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{controlId:"category",children:[(0,jt.jsx)(Xk.Label,{children:"Category*"}),(0,jt.jsx)(Xk.Select,{name:"category",value:f.category,onChange:m,required:!0,children:MT.getAllCategories().map(e=>(0,jt.jsx)("option",{value:e,children:MT.getDisplayName(e)},e))})]})})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",controlId:"description",children:[(0,jt.jsx)(Xk.Label,{children:"Description*"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"description",value:f.description,onChange:m,placeholder:"Enter a detailed description",rows:4,required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Examples"}),(0,jt.jsxs)("div",{className:"examples-container",children:[f.examples.map((e,t)=>(0,jt.jsxs)(FN,{className:"mb-2",children:[(0,jt.jsx)(Xk.Control,{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...f.examples];n[e]=t,p(c(c({},f),{},{examples:n}))})(t,e.target.value),placeholder:"Example ".concat(t+1)}),(0,jt.jsx)(nC,{variant:"outline-danger",onClick:()=>(e=>{const t=f.examples.filter((t,n)=>n!==e);p(c(c({},f),{},{examples:t.length?t:[""]}))})(t),children:"Remove"})]},t)),(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>{p(c(c({},f),{},{examples:[...f.examples,""]}))},className:"mt-2",children:"Add Example"})]})]})]})]}),(0,jt.jsxs)(KC.Footer,{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/references"),children:"Cancel"}),(0,jt.jsx)(nC,{variant:"primary",onClick:g,disabled:a,children:a?(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsx)($k,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),t?"Updating...":"Creating..."]}):t?"Update Reference":"Create Reference"})]})]})})},HT=()=>{const e=de(),{currentUser:t}=eb(),n="/references"===e.pathname,r="/references/create"===e.pathname;return(0,jt.jsxs)("div",{className:"reference-page",children:[(0,jt.jsxs)("div",{className:"page-header",children:[(0,jt.jsx)("h1",{children:"References"}),(0,jt.jsx)("p",{children:"Look up rules, keywords, and game mechanics"})]}),(0,jt.jsxs)("div",{className:"tab-navigation",children:[(0,jt.jsx)(vt,{to:"/references",className:"tab ".concat(n?"active":""),children:"Browse References"}),t&&(0,jt.jsx)(vt,{to:"/references/create",className:"tab ".concat(r?"active":""),children:"Create Reference"})]}),(0,jt.jsx)("div",{className:"reference-content",children:(0,jt.jsxs)(Me,{children:[(0,jt.jsx)(De,{path:"/",element:(0,jt.jsx)(FT,{})}),(0,jt.jsx)(De,{path:"/create",element:(0,jt.jsx)(zT,{})}),(0,jt.jsx)(De,{path:"/edit/:id",element:(0,jt.jsx)(zT,{})}),(0,jt.jsx)(De,{path:"/:id",element:(0,jt.jsx)(VT,{})})]})})]})},WT=()=>{const{currentUser:t}=eb(),[n,r]=(0,e.useState)(!0),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)({displayName:"",email:"",photoURL:"",newPassword:"",confirmPassword:"",currentPassword:""}),[m,g]=(0,e.useState)(null),[y,v]=(0,e.useState)("");(0,e.useEffect)(()=>{(async()=>{try{const e=wg(Xv,"users",t.uid),n=await _y(e);if(n.exists()){n.data();p({displayName:t.displayName||"",email:t.email||"",photoURL:t.photoURL||"",newPassword:"",confirmPassword:"",currentPassword:""})}else await Ny(e,{displayName:t.displayName||"",email:t.email||"",photoURL:t.photoURL||"",createdAt:new Date}),p({displayName:t.displayName||"",email:t.email||"",photoURL:t.photoURL||"",newPassword:"",confirmPassword:"",currentPassword:""});r(!1)}catch(a){o("Failed to load profile. Please try again later."),console.error("Error fetching user profile:",a),r(!1)}})()},[t]);const b=e=>{const{name:t,value:n}=e.target;p(c(c({},f),{},{[t]:n}))};return n?(0,jt.jsxs)("div",{className:"text-center",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{children:"Loading profile..."})]}):(0,jt.jsxs)("div",{className:"profile-editor",children:[(0,jt.jsx)("h3",{className:"mb-4",children:"Edit Profile"}),a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),(()=>{o(""),u("");const e=f.displayName!==t.displayName,n=f.email!==t.email,r=f.newPassword.length>0;if(!e&&!n&&!r&&null===m)return o("No changes to save."),!1;if(r){if(f.newPassword.length<6)return o("Password must be at least 6 characters"),!1;if(f.newPassword!==f.confirmPassword)return o("Passwords do not match"),!1}return!((n||r)&&!f.currentPassword)||(h(!0),!1)})()){s(!0);try{const e={};if(f.email!==t.email||f.newPassword){const n=Fs.credential(t.email,f.currentPassword);await ta(Jv.currentUser,n),f.email!==t.email&&(await function(e,t){const n=xn(e);return Rr(n.auth.app)?Promise.reject(ai(n.auth)):sa(n,t,null)}(Jv.currentUser,f.email),e.email=f.email),f.newPassword&&await(i=Jv.currentUser,l=f.newPassword,sa(xn(i),null,l)),p(c(c({},f),{},{newPassword:"",confirmPassword:"",currentPassword:""})),h(!1)}if(m){const i=m.name.split(".").pop(),s=(n=Zv,r="profile_images/".concat(t.uid,".").concat(i),zv(n=xn(n),r));await function(e,t,n){return Uv(e=xn(e),t,n)}(s,m);const a=await function(e){return Fv(e=xn(e))}(s);e.photoURL=a,await ia(Jv.currentUser,{photoURL:a}),g(null)}if(f.displayName!==t.displayName&&(e.displayName=f.displayName,await ia(Jv.currentUser,{displayName:f.displayName})),Object.keys(e).length>0){const n=wg(Xv,"users",t.uid);await Ny(n,c(c({},e),{},{updatedAt:new Date}))}u("Profile updated successfully")}catch(a){console.error("Error updating profile:",a),"auth/requires-recent-login"===a.code?o("Please log out and log back in to change your email or password."):"auth/wrong-password"===a.code?o("Incorrect current password."):"auth/email-already-in-use"===a.code?o("Email is already in use by another account."):o("Failed to update profile. "+a.message)}finally{s(!1)}var n,r,i,l}},children:[(0,jt.jsx)(KC,{className:"mb-4 text-center",children:(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)("div",{className:"avatar-container",children:[(0,jt.jsx)("img",{src:y||f.photoURL||"/default-avatar.png",alt:"Profile",className:"rounded-circle mb-3",style:{width:"150px",height:"150px",objectFit:"cover"}}),(0,jt.jsx)("div",{children:(0,jt.jsx)(Xk.Group,{controlId:"avatar",className:"mt-2",children:(0,jt.jsxs)(Xk.Label,{className:"btn btn-sm btn-outline-secondary",children:["Change Profile Picture",(0,jt.jsx)(Xk.Control,{type:"file",accept:"image/*",onChange:e=>{e.target.files[0]&&(g(e.target.files[0]),v(URL.createObjectURL(e.target.files[0])))},style:{display:"none"}})]})})})]})})}),(0,jt.jsxs)(Xk.Group,{controlId:"displayName",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Display Name"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"displayName",value:f.displayName,onChange:b})]}),(0,jt.jsxs)(Xk.Group,{controlId:"email",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Email Address"}),(0,jt.jsx)(Xk.Control,{type:"email",name:"email",value:f.email,onChange:b}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Changing email requires password confirmation"})]}),(0,jt.jsx)("h5",{className:"mt-4 mb-3",children:"Change Password"}),(0,jt.jsxs)(Xk.Group,{controlId:"newPassword",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"New Password"}),(0,jt.jsx)(Xk.Control,{type:"password",name:"newPassword",value:f.newPassword,onChange:b,autoComplete:"new-password"})]}),f.newPassword&&(0,jt.jsxs)(Xk.Group,{controlId:"confirmPassword",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Confirm New Password"}),(0,jt.jsx)(Xk.Control,{type:"password",name:"confirmPassword",value:f.confirmPassword,onChange:b,autoComplete:"new-password"})]}),d&&(0,jt.jsxs)(Xk.Group,{controlId:"currentPassword",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Current Password"}),(0,jt.jsx)(Xk.Control,{type:"password",name:"currentPassword",value:f.currentPassword,onChange:b,autoComplete:"current-password",required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Please confirm your current password to update email or password"})]}),(0,jt.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,jt.jsxs)(nC,{variant:"primary",type:"submit",disabled:i,className:"d-flex align-items-center",children:[i&&(0,jt.jsx)($k,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),i?"Updating...":"Save Changes"]})})]}),(0,jt.jsxs)("div",{className:"mt-5",children:[(0,jt.jsx)("h5",{className:"text-danger",children:"Account Management"}),(0,jt.jsx)("p",{className:"text-muted",children:"Need to delete your account? This action cannot be undone."}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",children:"Delete My Account"})]})]})},KT=()=>{const{currentUser:t}=eb(),[n,r]=(0,e.useState)(!0),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({theme:"light",defaultFaction:"republic",defaultPointValue:800,enableBattleNotifications:!0});(0,e.useEffect)(()=>{(async()=>{try{const e=wg(Xv,"users",t.uid),n=await _y(e);if(n.exists()){const e=n.data();e.preferences&&h({theme:e.preferences.theme||"light",defaultFaction:e.preferences.defaultFaction||"republic",defaultPointValue:e.preferences.defaultPointValue||800,enableBattleNotifications:!1!==e.preferences.enableBattleNotifications})}r(!1)}catch(a){o("Failed to load settings. Please try again later."),console.error("Error fetching user settings:",a),r(!1)}})()},[t]);const f=e=>{const{name:t,value:n,type:r,checked:i}=e.target;h(c(c({},d),{},{[t]:"checkbox"===r?i:n}))};return n?(0,jt.jsxs)("div",{className:"text-center",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{children:"Loading settings..."})]}):(0,jt.jsxs)("div",{className:"settings-editor",children:[(0,jt.jsx)("h3",{className:"mb-4",children:"Application Settings"}),a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{e.preventDefault(),s(!0),o(""),u("");try{const e=wg(Xv,"users",t.uid);await Ny(e,{"preferences.theme":d.theme,"preferences.defaultFaction":d.defaultFaction,"preferences.defaultPointValue":Number(d.defaultPointValue),"preferences.enableBattleNotifications":d.enableBattleNotifications,updatedAt:new Date}),u("Settings saved successfully"),document.documentElement.setAttribute("data-bs-theme",d.theme)}catch(a){console.error("Error saving settings:",a),o("Failed to save settings. Please try again later.")}finally{s(!1)}},children:[(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:"Display Preferences"}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(Xk.Group,{controlId:"theme",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Theme"}),(0,jt.jsxs)(Xk.Select,{name:"theme",value:d.theme,onChange:f,children:[(0,jt.jsx)("option",{value:"light",children:"Light Mode"}),(0,jt.jsx)("option",{value:"dark",children:"Dark Mode"})]}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Choose your preferred application theme"})]})})]}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:"Game Preferences"}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{controlId:"defaultFaction",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Default Faction"}),(0,jt.jsxs)(Xk.Select,{name:"defaultFaction",value:d.defaultFaction,onChange:f,children:[(0,jt.jsx)("option",{value:"republic",children:"Republic"}),(0,jt.jsx)("option",{value:"separatist",children:"Separatist"}),(0,jt.jsx)("option",{value:"rebel",children:"Rebel Alliance"}),(0,jt.jsx)("option",{value:"empire",children:"Galactic Empire"})]}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Your most frequently used faction"})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{controlId:"defaultPointValue",className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Default Point Value"}),(0,jt.jsx)(Xk.Control,{type:"number",name:"defaultPointValue",value:d.defaultPointValue,onChange:f,min:"200",max:"2000",step:"50"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Standard army point value for new battles"})]})})]})})]}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:"Notifications"}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsxs)(Xk.Group,{controlId:"enableBattleNotifications",className:"mb-3",children:[(0,jt.jsx)(Xk.Check,{type:"checkbox",label:"Enable Battle Notifications",name:"enableBattleNotifications",checked:d.enableBattleNotifications,onChange:f}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Receive notifications about battle updates and reminders"})]})})]}),(0,jt.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,jt.jsxs)(nC,{variant:"primary",type:"submit",disabled:i,className:"d-flex align-items-center",children:[i&&(0,jt.jsx)($k,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),i?"Saving...":"Save Settings"]})})]})]})};function qT(e){return e+.5|0}const GT=(e,t,n)=>Math.max(Math.min(e,n),t);function YT(e){return GT(qT(2.55*e),0,255)}function QT(e){return GT(qT(255*e),0,255)}function XT(e){return GT(qT(e/2.55)/100,0,1)}function JT(e){return GT(qT(100*e),0,100)}const ZT={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$T=[..."0123456789ABCDEF"],eI=e=>$T[15&e],tI=e=>$T[(240&e)>>4]+$T[15&e],nI=e=>(240&e)>>4===(15&e);function rI(e){var t=(e=>nI(e.r)&&nI(e.g)&&nI(e.b)&&nI(e.a))(e)?eI:tI;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const iI=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sI(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function aI(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function oI(e,t,n){const r=sI(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function lI(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function cI(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(QT)}function uI(e,t,n){return cI(sI,e,t,n)}function dI(e){return(e%360+360)%360}function hI(e){const t=iI.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?YT(+t[5]):QT(+t[5]));const i=dI(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return cI(oI,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return cI(aI,e,t,n)}(i,s,a):uI(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const fI={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pI={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let mI;function gI(e){mI||(mI=function(){const e={},t=Object.keys(pI),n=Object.keys(fI);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,fI[s]);s=parseInt(pI[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),mI.transparent=[0,0,0,0]);const t=mI[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const yI=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const vI=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,bI=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function xI(e,t,n){if(e){let r=lI(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=uI(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function wI(e,t){return e?Object.assign(t||{},e):e}function EI(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=QT(e[3]))):(t=wI(e,{r:0,g:0,b:0,a:1})).a=QT(t.a),t}function _I(e){return"r"===e.charAt(0)?function(e){const t=yI.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?YT(e):GT(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?YT(n):GT(n,0,255)),r=255&(t[4]?YT(r):GT(r,0,255)),i=255&(t[6]?YT(i):GT(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):hI(e)}class SI{constructor(e){if(e instanceof SI)return e;const t=typeof e;let n;"object"===t?n=EI(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*ZT[e[1]],g:255&17*ZT[e[2]],b:255&17*ZT[e[3]],a:5===n?17*ZT[e[4]]:255}:7!==n&&9!==n||(t={r:ZT[e[1]]<<4|ZT[e[2]],g:ZT[e[3]]<<4|ZT[e[4]],b:ZT[e[5]]<<4|ZT[e[6]],a:9===n?ZT[e[7]]<<4|ZT[e[8]]:255})),t}(e)||gI(e)||_I(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=wI(this._rgb);return e&&(e.a=XT(e.a)),e}set rgb(e){this._rgb=EI(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(XT(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?rI(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=lI(e),n=t[0],r=JT(t[1]),i=JT(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(XT(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=bI(XT(e.r)),i=bI(XT(e.g)),s=bI(XT(e.b));return{r:QT(vI(r+n*(bI(XT(t.r))-r))),g:QT(vI(i+n*(bI(XT(t.g))-i))),b:QT(vI(s+n*(bI(XT(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new SI(this.rgb)}alpha(e){return this._rgb.a=QT(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=qT(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return xI(this._rgb,2,e),this}darken(e){return xI(this._rgb,2,-e),this}saturate(e){return xI(this._rgb,1,e),this}desaturate(e){return xI(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=lI(e);n[0]=dI(n[0]+t),n=uI(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function CI(){}const kI=(()=>{let e=0;return()=>e++})();function NI(e){return null===e||void 0===e}function jI(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function TI(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function II(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function AI(e,t){return II(e)?e:t}function RI(e,t){return"undefined"===typeof e?t:e}const PI=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function OI(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function DI(e,t,n,r){let i,s,a;if(jI(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(TI(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function LI(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function MI(e){if(jI(e))return e.map(MI);if(TI(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=MI(e[n[i]]);return t}return e}function UI(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function FI(e,t,n,r){if(!UI(e))return;const i=t[e],s=n[e];TI(i)&&TI(s)?BI(i,s,r):t[e]=MI(s)}function BI(e,t,n){const r=jI(t)?t:[t],i=r.length;if(!TI(e))return e;const s=(n=n||{}).merger||FI;let a;for(let o=0;o<i;++o){if(a=r[o],!TI(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function VI(e,t){return BI(e,t,{merger:zI})}function zI(e,t,n){if(!UI(e))return;const r=t[e],i=n[e];TI(r)&&TI(i)?VI(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=MI(i))}const HI={"":e=>e,x:e=>e.x,y:e=>e.y};function WI(e,t){const n=HI[t]||(HI[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function KI(e){return e.charAt(0).toUpperCase()+e.slice(1)}const qI=e=>"undefined"!==typeof e,GI=e=>"function"===typeof e,YI=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const QI=Math.PI,XI=2*QI,JI=XI+QI,ZI=Number.POSITIVE_INFINITY,$I=QI/180,eA=QI/2,tA=QI/4,nA=2*QI/3,rA=Math.log10,iA=Math.sign;function sA(e,t,n){return Math.abs(e-t)<n}function aA(e){const t=Math.round(e);e=sA(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(rA(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function oA(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function lA(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function cA(e){return e*(QI/180)}function uA(e){return e*(180/QI)}function dA(e){if(!II(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function hA(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*QI&&(s+=XI),{angle:s,distance:i}}function fA(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function pA(e,t){return(e-t+JI)%XI-QI}function mA(e){return(e%XI+XI)%XI}function gA(e,t,n,r){const i=mA(e),s=mA(t),a=mA(n),o=mA(s-i),l=mA(a-i),c=mA(i-s),u=mA(i-a);return i===s||i===a||r&&s===a||o>l&&c<u}function yA(e,t,n){return Math.max(t,Math.min(n,e))}function vA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function bA(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const xA=(e,t,n,r)=>bA(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),wA=(e,t,n)=>bA(e,n,r=>e[r][t]>=n);const EA=["push","pop","shift","splice","unshift"];function _A(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(EA.forEach(t=>{delete e[t]}),delete e._chartjs)}function SA(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const CA="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function kA(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,CA.call(window,()=>{r=!1,e.apply(t,n)}))}}const NA=e=>"start"===e?"left":"end"===e?"right":"center",jA=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function TA(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:d,max:h,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(i=Math.min(xA(l,u,d).lo,n?r:xA(t,u,a.getPixelForValue(d)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!NI(e[o.axis]));i-=Math.max(0,e)}i=yA(i,0,r-1)}if(p){let e=Math.max(xA(l,a.axis,h,!0).hi+1,n?0:xA(t,u,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!NI(e[o.axis]));e+=Math.max(0,t)}s=yA(e,i,r)-i}else s=r-i}return{start:i,count:s}}function IA(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const AA=e=>0===e||1===e,RA=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*XI/n),PA=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*XI/n)+1,OA={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*eA),easeOutSine:e=>Math.sin(e*eA),easeInOutSine:e=>-.5*(Math.cos(QI*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>AA(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>AA(e)?e:RA(e,.075,.3),easeOutElastic:e=>AA(e)?e:PA(e,.075,.3),easeInOutElastic(e){const t=.1125;return AA(e)?e:e<.5?.5*RA(2*e,t,.45):.5+.5*PA(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-OA.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*OA.easeInBounce(2*e):.5*OA.easeOutBounce(2*e-1)+.5};function DA(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function LA(e){return DA(e)?e:new SI(e)}function MA(e){return DA(e)?e:new SI(e).saturate(.5).darken(.1).hexString()}const UA=["x","y","borderWidth","radius","tension"],FA=["color","borderColor","backgroundColor"];const BA=new Map;function VA(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=BA.get(n);return r||(r=new Intl.NumberFormat(e,t),BA.set(n,r)),r}(t,n).format(e)}const zA={values:e=>jI(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=rA(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),VA(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(rA(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?zA.numeric.call(this,e,t,n):""}};var HA={formatters:zA};const WA=Object.create(null),KA=Object.create(null);function qA(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function GA(e,t,n){return"string"===typeof t?BI(qA(e,t),n):BI(qA(e,""),t)}class YA{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>MA(t.backgroundColor),this.hoverBorderColor=(e,t)=>MA(t.borderColor),this.hoverColor=(e,t)=>MA(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return GA(this,e,t)}get(e){return qA(this,e)}describe(e,t){return GA(KA,e,t)}override(e,t){return GA(WA,e,t)}route(e,t,n,r){const i=qA(this,e),s=qA(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return TI(e)?Object.assign({},t,e):RI(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var QA=new YA({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:FA},numbers:{type:"number",properties:UA}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:HA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function XA(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function JA(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,d,h;for(l=0;l<o;l++)if(d=n[l],void 0===d||null===d||jI(d)){if(jI(d))for(c=0,u=d.length;c<u;c++)h=d[c],void 0===h||null===h||jI(h)||(a=XA(e,i,s,a,h))}else a=XA(e,i,s,a,d);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function ZA(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function $A(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function eR(e,t,n,r){tR(e,t,n,r,null)}function tR(e,t,n,r,i){let s,a,o,l,c,u,d,h;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*$I;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,m,0,0,XI):e.arc(n,r,m,0,XI),e.closePath();break;case"triangle":u=i?i/2:m,e.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=nA,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=nA,e.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+tA)*l,d=Math.cos(g+tA)*(i?i/2-c:l),o=Math.sin(g+tA)*l,h=Math.sin(g+tA)*(i?i/2-c:l),e.arc(n-d,r-o,c,g-QI,g-eA),e.arc(n+h,r-a,c,g-eA,g),e.arc(n+d,r+o,c,g,g+eA),e.arc(n-h,r+a,c,g+eA,g+QI),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}g+=tA;case"rectRot":d=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+h,r-a),e.lineTo(n+d,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":g+=tA;case"cross":d=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":d=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),g+=tA,d=Math.cos(g)*(i?i/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,h=Math.sin(g)*(i?i/2:m),e.moveTo(n-d,r-o),e.lineTo(n+d,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=i?i/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function nR(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function rR(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function iR(e){e.restore()}function sR(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function aR(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function oR(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function lR(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function cR(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=jI(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),NI(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&lR(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),NI(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),oR(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function uR(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*QI,QI,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,QI,eA,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,eA,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-eA,!0),e.lineTo(n+a.topLeft,r)}const dR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function fR(e,t){const n=(""+e).match(dR);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const pR=e=>+e||0;function mR(e,t){const n={},r=TI(t),i=r?Object.keys(t):t,s=TI(e)?r?n=>RI(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=pR(s(a));return n}function gR(e){return mR(e,{top:"y",right:"x",bottom:"y",left:"x"})}function yR(e){return mR(e,["topLeft","topRight","bottomLeft","bottomRight"])}function vR(e){const t=gR(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function bR(e,t){e=e||{},t=t||QA.font;let n=RI(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=RI(e.style,t.style);r&&!(""+r).match(hR)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:RI(e.family,t.family),lineHeight:fR(RI(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:RI(e.weight,t.weight),string:""};return i.string=function(e){return!e||NI(e.size)||NI(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function xR(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&jI(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function wR(e,t){return Object.assign(Object.create(e),t)}function ER(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=PR("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>ER([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>NR(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=PR(CR(s,e),n),"undefined"!==typeof i)return kR(e,i)?AR(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>OR(e).includes(t),ownKeys:e=>OR(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function _R(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:SR(e,r),setContext:t=>_R(e,t,n,r),override:i=>_R(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>NR(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];GI(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),kR(e,l)&&(l=AR(i._scopes,i,e,l));return l}(t,o,e,n));jI(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(TI(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=AR(r,i,e,l);t.push(_R(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));kR(t,o)&&(o=_R(o,i,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function SR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:GI(n)?n:()=>n,isIndexable:GI(r)?r:()=>r}}const CR=(e,t)=>e?e+KI(t):t,kR=(e,t)=>TI(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function NR(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function jR(e,t,n){return GI(e)?e(t,n):e}const TR=(e,t)=>!0===e?t:"string"===typeof e?WI(t,e):void 0;function IR(e,t,n,r,i){for(const s of t){const t=TR(n,s);if(t){e.add(t);const s=jR(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function AR(e,t,n,r){const i=t._rootScopes,s=jR(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=RR(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=RR(o,a,s,l,r),null!==l))&&ER(Array.from(o),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(jI(i)&&TI(n))return n;return i||{}}(t,n,r)))}function RR(e,t,n,r,i){for(;n;)n=IR(e,t,n,r,i);return n}function PR(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function OR(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function DR(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:i.parse(WI(u,s),c)};return a}const LR=Number.EPSILON||1e-14,MR=(e,t)=>t<e.length&&!e[t].skip&&e[t],UR=e=>"x"===e?"y":"x";function FR(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=fA(s,i),l=fA(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(a.x-i.x),y:s.y-d*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function BR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=UR(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=MR(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=MR(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?iA(i[a-1])!==iA(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=MR(e,0);for(let u=0;u<r-1;++u)l=c,c=MR(e,u+1),l&&c&&(sA(t[u],0,LR)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=i*a*t[u],n[u+1]=s*a*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=UR(n),i=e.length;let s,a,o,l=MR(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=MR(e,c+1),!o)continue;const i=o[n],u=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function VR(e,t,n){return Math.max(Math.min(e,n),t)}function zR(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)BR(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=FR(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=nR(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&nR(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=VR(i.cp1x,t.left,t.right),i.cp1y=VR(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=VR(i.cp2x,t.left,t.right),i.cp2y=VR(i.cp2y,t.top,t.bottom)))}(e,n)}function HR(){return"undefined"!==typeof window&&"undefined"!==typeof document}function WR(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function KR(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const qR=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const GR=["top","right","bottom","left"];function YR(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=GR[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function QR(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=qR(n),s="border-box"===i.boxSizing,a=YR(i,"padding"),o=YR(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),d=a.left+(u&&o.left),h=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-d)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const XR=e=>Math.round(10*e)/10;function JR(e,t,n,r){const i=qR(e),s=YR(i,"margin"),a=KR(i.maxWidth,e,"clientWidth")||ZI,o=KR(i.maxHeight,e,"clientHeight")||ZI,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&WR(e);if(s){const e=s.getBoundingClientRect(),a=qR(s),o=YR(a,"border","width"),l=YR(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=KR(a.maxWidth,s,"clientWidth"),i=KR(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||ZI,maxHeight:i||ZI}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=YR(i,"border","width"),t=YR(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=XR(Math.min(c,a,l.maxWidth)),u=XR(Math.min(u,o,l.maxHeight)),c&&!u&&(u=XR(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=XR(Math.floor(u*r))),{width:c,height:u}}function ZR(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const $R=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};HR()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(bM){}return e}();function eP(e,t){const n=function(e,t){return qR(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tP(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function nP(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function rP(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=tP(e,i,n),o=tP(i,s,n),l=tP(s,t,n),c=tP(a,o,n),u=tP(o,l,n);return tP(c,u,n)}function iP(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function sP(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function aP(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function oP(e){return"angle"===e?{between:gA,compare:pA,normalize:mA}:{between:vA,compare:(e,t)=>e-t,normalize:e=>e}}function lP(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function cP(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=oP(r),{start:u,end:d,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=oP(r),l=t.length;let c,u,{start:d,end:h,loop:f}=e;if(f){for(d+=l,h+=l,c=0,u=l;c<u&&a(o(t[d%l][r]),i,s);++c)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,y,v=!1,b=null;const x=()=>v||l(i,y,m)&&0!==o(i,y),w=()=>!v||0===o(s,m)||l(s,y,m);for(let E=u,_=u;E<=d;++E)g=t[E%a],g.skip||(m=c(g[r]),m!==y&&(v=l(m,i,s),null===b&&x()&&(b=0===o(m,i)?E:_),null!==b&&w()&&(p.push(lP({start:b,end:E,loop:h,count:a,style:f})),b=null),_=E,y=m));return null!==b&&p.push(lP({start:b,end:d,loop:h,count:a,style:f})),p}function uP(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=cP(r[i],e.points,t);s.length&&n.push(...s)}return n}function dP(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=hP(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,d=t[0].start,h=d;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,d=t%l)}}for(const p of t){d=o?d:p.start;let e,t=n[d%l];for(h=d+1;h<=p.end;h++){const s=n[h%l];e=hP(r.setContext(wR(i,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),fP(e,u)&&f(d,h-1,p.loop,u),t=s,u=e}d<h-1&&f(d,h-1,p.loop,u)}return c}(e,t,n,r):t}function hP(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function fP(e,t){if(!t)return!1;const n=[],r=function(e,t){return DA(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function pP(e,t,n){return e.options.clip?e[n]:t[n]}function mP(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:pP(n,t,"left"),right:pP(n,t,"right"),top:pP(r,t,"top"),bottom:pP(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class gP{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=CA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yP=new gP;const vP="transparent",bP={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=LA(e||vP),i=r.valid&&LA(t||vP);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class xP{constructor(e,t,n,r){const i=t[n];r=xR([e.to,r,i,e.from]);const s=xR([e.from,i,r]);this._active=!0,this._fn=e.fn||bP[e.type||typeof s],this._easing=OA[e.easing]||OA.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=xR([e.to,t,r,e.from]),this._from=xR([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class wP{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!TI(e))return;const t=Object.keys(QA.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!TI(i))return;const s={};for(const e of t)s[e]=i[e];(jI(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const d=n.get(l);if(u){if(d&&u.active()){u.update(d,c,a);continue}u.cancel()}d&&d.duration?(i[l]=u=new xP(d,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(yP.add(this._chart,n),!0):void 0}}function EP(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function _P(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function SP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],II(c)&&(s||0===t||iA(t)===iA(c))&&(t+=c)}return u||r.all?t:0}function CP(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function kP(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function NP(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function jP(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),d=t.length;let h;for(let f=0;f<d;++f){const e=t[f],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=kP(i,u,n),h[o]=s,h._top=NP(h,a,!0,r.type),h._bottom=NP(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=s}}function TP(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function IP(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const AP=e=>"reset"===e||"none"===e,RP=(e,t)=>t?e:Object.assign({},e);class PP{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=CP(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&IP(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=RI(n.xAxisID,TP(e,"x")),s=t.yAxisID=RI(n.yAxisID,TP(e,"y")),a=t.rAxisID=RI(n.rAxisID,TP(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_A(this._data,this),e._stacked&&IP(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(TI(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[i]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){_A(n,this);const e=this._cachedMeta;IP(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),EA.forEach(e=>{const t="_onData"+KI(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),a}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=CP(t.vScale,t),t.stack!==n.stack&&(r=!0,IP(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(jP(this,t._parsed),t._stacked=CP(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=jI(r[e])?this.parseArrayData(n,r,e,t):TI(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||d&&l[a]<d[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),d=l);n._sorted=u}s&&jP(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let d,h,f;for(d=0,h=r;d<h;++d)f=d+n,u[d]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+n,h=t[d],l[c]={x:i.parse(WI(h,a),d),y:s.parse(WI(h,o),d)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return SP({keys:_P(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=SP(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:_P(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let d,h;function f(){h=r[d];const t=h[a.axis];return!II(h[e.axis])||c>t||u<t}for(d=0;d<s&&(f()||(this.updateRangeFromParsed(l,e,h,o),!i));++d);if(i)for(d=s-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],II(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return TI(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(RI(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=EP(e,n),i=EP(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return wR(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return wR(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&qI(n);if(a)return RP(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],d=l.getOptionScopes(this.getDataset(),c),h=Object.keys(QA.elements[e]),f=l.resolveNamedOptions(d,h,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(RP(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new wP(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||AP(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){AP(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!AP(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&IP(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function OP(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=SA(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(qI(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function DP(e,t,n,r){return jI(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function LP(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,u,d,h;for(c=n,u=n+r;c<u;++c)h=t[c],d={},d[i.axis]=o||i.parse(a[c],c),l.push(DP(h,d,s,c));return l}function MP(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function UP(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[FP(u,a,o,l)]=!0,i=c)),s[FP(i,a,o,l)]=!0,e.borderSkipped=s}function FP(e,t,n,r){var i,s,a;return r?(a=n,e=BP(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=BP(e,t,n),e}function BP(e,t,n){return"start"===e?t:"end"===e?n:e}function VP(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}o(PP,"defaults",{}),o(PP,"datasetElementType",null),o(PP,"dataElementType",null);class zP extends PP{parsePrimitiveData(e,t,n,r){return LP(e,t,n,r)}parseArrayData(e,t,n,r){return LP(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,u=[];let d,h,f,p;for(d=n,h=n+r;d<h;++d)p=t[d],f={},f[i.axis]=i.parse(WI(p,l),d),u.push(DP(WI(p,c),f,s,d));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=MP(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||NI(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||MP(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};d&&(m.options=u||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;UP(m,g,p,s),VP(m,g,c.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(NI(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[RI("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||OP(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=MP(l);let u,d,h=o[t.axis],f=0,p=n?this.applyStack(t,o,n):h;p!==h&&(f=p-h,p=h),c&&(h=l.barStart,p=l.barEnd-l.barStart,0!==h&&iA(h)!==iA(l.barEnd)&&(f=0),f+=h);const m=NI(i)||c?f:i;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,d=u-g,Math.abs(d)<s){d=function(e,t,n){return 0!==e?iA(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*s,h===a&&(g-=d/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);g=Math.max(Math.min(g,f),l),u=g+d,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=iA(d)*t.getLineWidthForValue(a)/2;g+=e,d-=e}return{size:d,base:g,head:u,center:u+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=RI(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,a;return NI(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,d=this._getAxis().indexOf(RI(u,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+d;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}o(zP,"id","bar"),o(zP,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(zP,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class HP extends PP{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=RI(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=RI(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=a.axis;for(let d=t;d<t+n;d++){const t=e[d],n=!i&&this.getParsed(d),h={},f=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=h[u]=i?a.getBasePixel():a.getPixelForValue(n[u]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(d,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,d,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=RI(n&&n._custom,i),r}}o(HP,"id","bubble"),o(HP,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(HP,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class WP extends PP{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(TI(n[e])){const{key:e="value"}=this._parsing;a=t=>+WI(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return cA(this.options.rotation-90)}_getCircumference(){return cA(this.options.circumference)}_getRotationExtents(){let e=XI,t=-XI;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<XI){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),d=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>gA(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>gA(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,d),g=f(eA,u,h),y=p(QI,c,d),v=p(QI+eA,u,h);r=(m-y)/2,i=(g-v)/2,s=-(m+y)/2,a=-(g+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(h,d,o),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),x=PI(this.options.radius,b),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/XI)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=i&&o.animateScale,d=u?0:this.innerRadius,h=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:d};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?XI*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=VA(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(RI(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(WP,"id","doughnut"),o(WP,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(WP,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),o(WP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class KP extends PP{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=TA(t,r,s);this._drawStart=a,this._drawCount=o,IA(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),d=s.axis,h=a.axis,{spanGaps:f,segment:p}=this.options,m=oA(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let x=0;x<v;++x){const n=e[x],f=g?n:{};if(x<t||x>=y){f.skip=!0;continue}const v=this.getParsed(x),w=NI(v[h]),E=f[d]=s.getPixelForValue(v[d],x),_=f[h]=i||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[h],x);f.skip=isNaN(E)||isNaN(_)||w,f.stop=x>0&&Math.abs(v[d]-b[d])>m,p&&(f.parsed=v,f.raw=l.data[x]),u&&(f.options=c||this.resolveDataElementOptions(x,n.active?"active":r)),g||this.updateElement(n,x,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}o(KP,"id","line"),o(KP,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(KP,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class qP extends PP{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=VA(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return DR.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*QI;let d,h=u;const f=360/this.countVisibleElements();for(d=0;d<t;++d)h+=this._computeAngle(d,r,f);for(d=t;d<t+n;d++){const t=e[d];let n=h,p=h+this._computeAngle(d,r,f),m=s.getDataVisibility(d)?o.getDistanceFromCenterForValue(this.getParsed(d).r):0;h=p,i&&(a.animateScale&&(m=0),a.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(d,t.active?"active":r)};this.updateElement(t,d,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?cA(this.resolveDataElementOptions(e,t).angle||n):0}}o(qP,"id","polarArea"),o(qP,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(qP,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class GP extends WP{}o(GP,"id","pie"),o(GP,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class YP extends PP{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return DR.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}}o(YP,"id","radar"),o(YP,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(YP,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class QP extends PP{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=TA(t,n,r);if(this._drawStart=i,this._drawCount=s,IA(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),d=this.includeOptions(r,u),h=s.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=oA(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=NI(n[f]),x=c[h]=s.getPixelForValue(n[h],b),w=c[f]=i||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(x)||isNaN(w)||p,c.stop=b>0&&Math.abs(n[h]-v[h])>g,m&&(c.parsed=n,c.raw=l.data[b]),d&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}o(QP,"id","scatter"),o(QP,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(QP,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function XP(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class JP{static override(e){Object.assign(JP.prototype,e)}constructor(e){o(this,"options",void 0),this.options=e||{}}init(){}formats(){return XP()}parse(){return XP()}format(){return XP()}add(){return XP()}diff(){return XP()}startOf(){return XP()}endOf(){return XP()}}var ZP=JP;function $P(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?wA:xA;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!NI(e[t.axis]));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex(e=>!NI(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function eO(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=$P(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function tO(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return eO(e,n,t,function(n,a,o){(i||nR(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function nO(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return eO(e,n,t,function(n,c,u){const d=n.inRange(t.x,t.y,i);if(r&&!d)return;const h=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(h))&&!d)return;const f=o(t,h);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function rO(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?nO(e,t,n,r,i,s):function(e,t,n,r){let i=[];return eO(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=hA(e,{x:t.x,y:t.y});gA(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function iO(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return eO(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:s}var sO={evaluateInteractionItems:eO,modes:{index(e,t,n,r){const i=QR(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?tO(e,i,s,r,a):rO(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=QR(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?tO(e,i,s,r,a):rO(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>tO(e,QR(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=QR(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return rO(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>iO(e,QR(t,e),"x",n.intersect,r),y:(e,t,n,r)=>iO(e,QR(t,e),"y",n.intersect,r)}};const aO=["left","top","right","bottom"];function oO(e,t){return e.filter(e=>e.pos===t)}function lO(e,t){return e.filter(e=>-1===aO.indexOf(e.pos)&&e.box.axis===t)}function cO(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function uO(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!aO.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function dO(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function hO(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function fO(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!TI(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&hO(a,s.getPadding());const o=Math.max(0,t.outerWidth-dO(a,e,"left","right")),l=Math.max(0,t.outerHeight-dO(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function pO(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function mO(e,t,n,r){const i=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,pO(o.horizontal,t));const{same:a,other:d}=fO(t,n,o,r);c|=a&&i.length,u=u||d,l.fullSize||i.push(o)}return c&&mO(i,t,n,r)||u}function gO(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function yO(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;qI(l.start)&&(a=l.start),e.fullSize?gO(e,i.left,a,n.outerWidth-i.right-i.left,s):gO(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;qI(l.start)&&(s=l.start),e.fullSize?gO(e,s,i.top,a,n.outerHeight-i.bottom-i.top):gO(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var vO={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=vR(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=cO(t.filter(e=>e.box.fullSize),!0),r=cO(oO(t,"left"),!0),i=cO(oO(t,"right")),s=cO(oO(t,"top"),!0),a=cO(oO(t,"bottom")),o=lO(t,"x"),l=lO(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:oO(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;DI(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),h=Object.assign({},i);hO(h,vR(r));const f=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),p=uO(l.concat(c),d);mO(o.fullSize,f,d,p),mO(l,f,d,p),mO(c,f,d,p)&&mO(l,f,d,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),yO(o.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,yO(o.rightAndBottom,f,d,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},DI(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class bO{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class xO extends bO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const wO="$chartjs",EO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_O=e=>null===e||""===e;const SO=!!$R&&{passive:!0};function CO(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,SO)}function kO(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function NO(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||kO(n.addedNodes,r),t=t&&!kO(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function jO(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||kO(n.removedNodes,r),t=t&&!kO(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const TO=new Map;let IO=0;function AO(){const e=window.devicePixelRatio;e!==IO&&(IO=e,TO.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function RO(e,t,n){const r=e.canvas,i=r&&WR(r);if(!i)return;const s=kA((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return a.observe(i),function(e,t){TO.size||window.addEventListener("resize",AO),TO.set(e,t)}(e,s),a}function PO(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){TO.delete(e),TO.size||window.removeEventListener("resize",AO)}(e)}function OO(e,t,n){const r=e.canvas,i=kA(t=>{null!==e.ctx&&n(function(e,t){const n=EO[e.type]||e.type,{x:r,y:i}=QR(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,SO)}(r,t,i),i}class DO extends bO{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[wO]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_O(i)){const t=eP(e,"width");void 0!==t&&(e.width=t)}if(_O(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=eP(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[wO])return!1;const n=t[wO].initial;["height","width"].forEach(e=>{const r=n[e];NI(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[wO],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:NO,detach:jO,resize:RO}[t]||OO;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:PO,detach:PO,resize:PO}[t]||CO)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return JR(e,t,n,r)}isAttached(e){const t=e&&WR(e);return!(!t||!t.isConnected)}}class LO{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return oA(this.x)&&oA(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function MO(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(UO(t,c,u,NI(r)?0:o-r,o),e=0,n=a-1;e<n;e++)UO(t,c,u,s[e],s[e+1]);return UO(t,c,u,l,NI(r)?t.length:l+r),c}return UO(t,c,u),c}function UO(e,t,n,r,i){const s=RI(r,0),a=Math.min(RI(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}o(LO,"defaults",{}),o(LO,"defaultRoutes",void 0);const FO=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,BO=(e,t)=>Math.min(t||e,e);function VO(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function zO(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function HO(e){return e.drawTicks?e.tickLength:0}function WO(e,t){if(!e.display)return 0;const n=bR(e.font,t),r=vR(e.padding);return(jI(e.text)?e.text.length:1)*n.lineHeight+r.height}function KO(e,t,n){let r=NA(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class qO extends LO{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=AI(e,Number.POSITIVE_INFINITY),t=AI(t,Number.NEGATIVE_INFINITY),n=AI(n,Number.POSITIVE_INFINITY),r=AI(r,Number.NEGATIVE_INFINITY),{min:AI(e,n),max:AI(t,r),minDefined:II(e),maxDefined:II(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:AI(n,AI(r,n)),max:AI(r,AI(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){OI(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=PI(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?VO(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=MO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){OI(this.options.afterUpdate,[this])}beforeSetDimensions(){OI(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){OI(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),OI(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){OI(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=OI(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){OI(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){OI(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=BO(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,d=c.highest.height,h=yA(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),u+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-HO(e.grid)-t.padding-WO(e.title,this.chart.options.font),o=Math.sqrt(u*u+d*d),l=uA(Math.min(Math.asin(yA((c.highest.height+6)/s,-1,1)),Math.asin(yA(a/o,-1,1))-Math.asin(yA(d/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){OI(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){OI(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=WO(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=HO(i)+s):(e.height=this.maxHeight,e.width=HO(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=cA(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,d=0;o?l?(u=r*e.width,d=n*t.height):(u=n*e.height,d=r*t.width):"start"===i?d=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,d=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){OI(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)NI(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=VO(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/BO(t,n));let l,c,u,d,h,f,p,m,g,y,v,b=0,x=0;for(l=0;l<t;l+=o){if(d=e[l].label,h=this._resolveTickFontOptions(l),r.font=f=h.string,p=i[f]=i[f]||{data:{},gc:[]},m=h.lineHeight,g=y=0,NI(d)||jI(d)){if(jI(d))for(c=0,u=d.length;c<u;++c)v=d[c],NI(v)||jI(v)||(g=XA(r,p.data,p.gc,g,v),y+=m)}else g=XA(r,p.data,p.gc,g,d),y=m;s.push(g),a.push(y),b=Math.max(g,b),x=Math.max(y,x)}!function(e,t){DI(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const w=s.indexOf(b),E=a.indexOf(x),_=e=>({width:s[e]||0,height:a[e]||0});return{first:_(0),last:_(t-1),widest:_(w),highest:_(E),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return yA(this._alignToPixels?ZA(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return wR(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=wR(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=cA(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=HO(i),d=[],h=a.setContext(this.getContext()),f=h.display?h.width:0,p=f/2,m=function(e){return ZA(n,e,f)};let g,y,v,b,x,w,E,_,S,C,k,N;if("top"===s)g=m(this.bottom),w=this.bottom-u,_=g-p,C=m(e.top)+p,N=e.bottom;else if("bottom"===s)g=m(this.top),C=e.top,N=m(e.bottom)-p,w=g+p,_=this.top+u;else if("left"===s)g=m(this.right),x=this.right-u,E=g-p,S=m(e.left)+p,k=e.right;else if("right"===s)g=m(this.left),S=e.left,k=m(e.right)-p,x=g+p,E=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(TI(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,N=e.bottom,w=g+p,_=w+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(TI(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}x=g-p,E=x-u,S=e.left,k=e.right}const j=RI(r.ticks.maxTicksLimit,c),T=Math.max(1,Math.ceil(c/j));for(y=0;y<c;y+=T){const e=this.getContext(y),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],h=r.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;v=zO(this,y,o),void 0!==v&&(b=ZA(n,v,s),l?x=E=S=k=b:w=_=C=N=b,d.push({tx1:x,ty1:w,tx2:E,ty2:_,x1:S,y1:C,x2:k,y2:N,width:s,color:c,borderDash:u,borderDashOffset:h,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,d=HO(n.grid),h=d+c,f=u?-c:h,p=-cA(this.labelRotation),m=[];let g,y,v,b,x,w,E,_,S,C,k,N,j="middle";if("top"===r)w=this.bottom-f,E=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,E=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(d);E=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(d);E=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(TI(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}E=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(TI(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}E=this._getYAxisLabelAlignment(d).textAlign}"y"===t&&("start"===o?j="top":"end"===o&&(j="bottom"));const T=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){v=a[g],b=v.label;const e=i.setContext(this.getContext(g));_=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),C=S.lineHeight,k=jI(b)?b.length:1;const t=k/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let d,h=E;if(s?(x=_,"inner"===E&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),N="top"===r?"near"===l||0!==p?-k*C+C/2:"center"===l?-T.highest.height/2-t*C+C:-T.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?T.highest.height/2-t*C:T.highest.height-k*C,u&&(N*=-1),0===p||e.showLabelBackdrop||(x+=C/2*Math.sin(p))):(w=_,N=(1-k)*C/2),e.showLabelBackdrop){const t=vR(e.backdropPadding),n=T.heights[g],r=T.widths[g];let i=N-t.top,s=0-t.left;switch(j){case"middle":i-=n/2;break;case"bottom":i-=n}switch(E){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===y-1?s-=r:g>0&&(s-=r/2)}d={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:b,font:S,textOffset:N,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:j,translation:[x,w],backdrop:d}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-cA(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,d;this.isHorizontal()?(l=ZA(e,this.left,s)-s/2,c=ZA(e,this.right,a)+a/2,u=d=o):(u=ZA(e,this.top,s)-s/2,d=ZA(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&rR(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;cR(t,i.label,0,i.textOffset,n,e)}n&&iR(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=bR(n.font),s=vR(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||TI(t)?(o+=s.bottom,jI(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:d}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let d,h,f,p=0;const m=a-i,g=o-s;if(e.isHorizontal()){if(h=jA(r,s,o),TI(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:FO(e,n,t);d=o-s}else{if(TI(n)){const e=Object.keys(n)[0],r=n[e];h=u[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:FO(e,n,t);f=jA(r,a,i),p="left"===n?-eA:eA}return{titleX:h,titleY:f,maxWidth:d,rotation:p}}(this,o,t,a);cR(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:d,textAlign:KO(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=RI(e.grid&&e.grid.z,-1),r=RI(e.border&&e.border.z,0);return this._isVisible()&&this.draw===qO.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return bR(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class GO{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=BI(Object.create(null),[n?QA.get(n):{},QA.get(t),e.defaults]);QA.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");QA.route(s,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&QA.describe(t,e.descriptors)}(e,s,n),this.override&&QA.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in QA[r]&&(delete QA[r][n],this.override&&delete WA[n])}}class YO{constructor(){this.controllers=new GO(PP,"datasets",!0),this.elements=new GO(LO,"elements"),this.plugins=new GO(Object,"plugins"),this.scales=new GO(qO,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):DI(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=KI(e);OI(n["before"+r],[],n),t[e](n),OI(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var QO=new YO;class XO{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===OI(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){NI(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=RI(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(QO.plugins.items);for(let s=0;s<r.length;s++)n.push(QO.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=JO(n[t],r);null!==i&&a.push({plugin:l,options:ZO(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function JO(e,t){return t||!1!==e?!0===e?{}:e:null}function ZO(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $O(e,t){const n=QA.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function eD(e){if("x"===e||"y"===e||"r"===e)return e}function tD(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function nD(e){if(eD(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||tD(i.position)||e.length>1&&eD(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function rD(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function iD(e,t){const n=WA[e.type]||{scales:{}},r=t.scales||{},i=$O(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!TI(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=nD(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return rD(e,"x",n[0])||rD(e,"y",n[0])}return{}}(t,e),QA.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=VI(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,a=n.indexAxis||$O(i,t),o=(WA[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),VI(s[i],[{axis:t},r[i],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];VI(t,[QA.scales[t.type],QA.scale])}),s}function sD(e){const t=e.options||(e.options={});t.plugins=RI(t.plugins,{}),t.scales=iD(e,t)}function aD(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const oD=new Map,lD=new Set;function cD(e,t){let n=oD.get(e);return n||(n=t(),oD.set(e,n),lD.add(n)),n}const uD=(e,t,n)=>{const r=WI(t,n);void 0!==r&&e.add(r)};class dD{constructor(e){this._config=function(e){return(e=e||{}).data=aD(e.data),sD(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),sD(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cD(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return cD("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return cD("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return cD("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>uD(o,e,t))),t.forEach(e=>uD(o,r,e)),t.forEach(e=>uD(o,WA[i]||{},e)),t.forEach(e=>uD(o,QA,e)),t.forEach(e=>uD(o,KA,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),lD.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,WA[t]||{},QA.datasets[t]||{},{type:t},QA,KA]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=hD(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=SR(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(GI(a)||fD(a))||s&&jI(a))return!0}return!1}(s,t)){i.$shared=!1;o=_R(s,n=GI(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=hD(this._resolverCache,e,n);return TI(t)?_R(i,t,void 0,r):i}}function hD(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:ER(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const fD=e=>TI(e)&&Object.getOwnPropertyNames(e).some(t=>GI(e[t]));const pD=["top","bottom","left","right","chartArea"];function mD(e,t){return"top"===e||"bottom"===e||-1===pD.indexOf(e)&&"x"===t}function gD(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function yD(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),OI(n&&n.onComplete,[e],t)}function vD(e){const t=e.chart,n=t.options.animation;OI(n&&n.onProgress,[e],t)}function bD(e){return HR()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const xD={},wD=e=>{const t=bD(e);return Object.values(xD).filter(e=>e.canvas===t).pop()};function ED(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class _D{static register(){QO.add(...arguments),SD()}static unregister(){QO.remove(...arguments),SD()}constructor(e,t){const n=this.config=new dD(t),r=bD(e),i=wD(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!HR()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?xO:DO}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=kI(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],xD[this.id]=this,a&&o?(yP.listen(this,"complete",yD),yP.listen(this,"progress",vD),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return NI(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return QO}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $A(this.canvas,this.ctx),this}stop(){return yP.stop(this),this}resize(e,t){yP.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ZR(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),OI(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){DI(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=nD(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),DI(i,t=>{const i=t.options,s=i.id,a=nD(s,i),o=RI(i.type,t.dtype);void 0!==i.position&&mD(i.position,a)===mD(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(QO.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),DI(r,(e,t)=>{e||delete n[t]}),DI(n,e=>{vO.configure(this,e,e.options),vO.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(gD("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||$O(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=QO.getController(s),{datasetElementType:r,dataElementType:a}=QA.datasets[s];Object.assign(t,{dataElementType:QO.getElement(a),datasetElementType:r&&QO.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){DI(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||DI(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(gD("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){DI(this.scales,e=>{vO.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);YI(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){ED(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!YI(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;vO.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],DI(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,GI(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(yP.has(this)?this.attached&&!yP.running(this)&&yP.start(this):(this.draw(),yD({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=mP(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&rR(t,r),e.controller.draw(),r&&iR(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return nR(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=sO.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=wR(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);qI(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),yP.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$A(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete xD[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};DI(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){DI(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},DI(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!LI(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,OI(i.onHover,[e,a,this],this),o&&OI(i.onClick,[e,a,this],this));const c=!LI(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function SD(){return DI(_D.instances,e=>e._plugins.invalidate())}function CD(e,t,n,r){const i=mR(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return yA(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:yA(i.innerStart,0,a),innerEnd:yA(i.innerEnd,0,a)}}function kD(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function ND(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+n-c,0),h=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(d>0?d-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*d-n/QI)/d)/2,g=l+m+f,y=i-m-f,{outerStart:v,outerEnd:b,innerStart:x,innerEnd:w}=CD(t,h,d,y-g),E=d-v,_=d-b,S=g+v/E,C=y-b/_,k=h+x,N=h+w,j=g+x/k,T=y-w/N;if(e.beginPath(),s){const t=(S+C)/2;if(e.arc(a,o,d,S,t),e.arc(a,o,d,t,C),b>0){const t=kD(_,C,a,o);e.arc(t.x,t.y,b,C,y+eA)}const n=kD(N,y,a,o);if(e.lineTo(n.x,n.y),w>0){const t=kD(N,T,a,o);e.arc(t.x,t.y,w,y+eA,T+Math.PI)}const r=(y-w/h+(g+x/h))/2;if(e.arc(a,o,h,y-w/h,r,!0),e.arc(a,o,h,r,g+x/h,!0),x>0){const t=kD(k,j,a,o);e.arc(t.x,t.y,x,j+Math.PI,g-eA)}const i=kD(E,g,a,o);if(e.lineTo(i.x,i.y),v>0){const t=kD(E,S,a,o);e.arc(t.x,t.y,v,g-eA,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*d+a,n=Math.sin(S)*d+o;e.lineTo(t,n);const r=Math.cos(C)*d+a,i=Math.sin(C)*d+o;e.lineTo(r,i)}e.closePath()}function jD(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(s){ND(e,t,n,r,m,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(m=a+(o%XI||XI))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+eA,r-eA),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=QI&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/a,mA(r-n));if(e.beginPath(),e.arc(i,s,a-c/2,r+d/2,n-d/2),o>0){const t=Math.min(c/o,mA(r-n));e.arc(i,s,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*mA(r-n));if("round"===u)e.arc(i,s,t,n-QI/2,r+QI/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+QI/2)+i,l=-a*Math.sin(n+QI/2)+s,c=a*Math.cos(r+QI/2)+i,u=a*Math.sin(r+QI/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(ND(e,t,n,r,m,i),e.stroke())}o(_D,"defaults",QA),o(_D,"instances",xD),o(_D,"overrides",WA),o(_D,"registry",QO),o(_D,"version","4.5.0"),o(_D,"getChart",wD);class TD extends LO{constructor(e){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=hA(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,h=RI(u,o-a),f=gA(i,a,o)&&a!==o,p=h>=XI||f,m=vA(s,l+d,c+d);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>XI?Math.floor(n/XI):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(QI,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){ND(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%XI||XI))}ND(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),jD(e,this,o,i,s),e.restore()}}function ID(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=RI(n.borderCapStyle,t.borderCapStyle),e.setLineDash(RI(n.borderDash,t.borderDash)),e.lineDashOffset=RI(n.borderDashOffset,t.borderDashOffset),e.lineJoin=RI(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=RI(n.borderWidth,t.borderWidth),e.strokeStyle=RI(n.borderColor,t.borderColor)}function AD(e,t,n){e.lineTo(n.x,n.y)}function RD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),u=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function PD(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=RD(i,n,r),u=function(e){return e.stepped?sR:e.tension||"monotone"===e.cubicInterpolationMode?aR:AD}(s);let d,h,f,{move:p=!0,reverse:m}=r||{};for(d=0;d<=c;++d)h=i[(o+(m?c-d:d))%a],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):u(e,f,h,m,s.stepped),f=h);return l&&(h=i[(o+(m?c:0))%a],u(e,f,h,m,s.stepped)),!!l}function OD(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=RD(i,n,r),{move:l=!0,reverse:c}=r||{};let u,d,h,f,p,m,g=0,y=0;const v=e=>(a+(c?o-e:e))%s,b=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(d=i[v(0)],e.moveTo(d.x,d.y)),u=0;u<=o;++u){if(d=i[v(u)],d.skip)continue;const t=d.x,n=d.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(y*g+t)/++y):(b(),e.lineTo(t,n),h=r,y=0,f=p=n),m=n}b()}function DD(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?OD:PD}o(TD,"id","arc"),o(TD,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),o(TD,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(TD,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const LD="function"===typeof Path2D;function MD(e,t,n,r){LD&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),ID(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=DD(t);for(const o of i)ID(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class UD extends LO{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;zR(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return dP(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=uP(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?nP:e.tension||"monotone"===e.cubicInterpolationMode?rP:tP}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],d=i[c],h=i[u];if(d===h){a.push(d);continue}const f=o(d,h,Math.abs((r-d[t])/(h[t]-d[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return DD(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=DD(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),MD(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function FD(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}o(UD,"id","line"),o(UD,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(UD,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(UD,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class BD extends LO{constructor(e){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return FD(this,e,"x",t)}inYRange(e,t){return FD(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!nR(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,eR(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function VD(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,d;return e.horizontal?(d=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,o=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function zD(e,t,n,r){return e?0:yA(t,n,r)}function HD(e){const t=VD(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=gR(r);return{t:zD(i.top,s.top,0,n),r:zD(i.right,s.right,0,t),b:zD(i.bottom,s.bottom,0,n),l:zD(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=yR(i),a=Math.min(t,n),o=e.borderSkipped,l=r||TI(i);return{topLeft:zD(!l||o.top||o.left,s.topLeft,0,a),topRight:zD(!l||o.top||o.right,s.topRight,0,a),bottomLeft:zD(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:zD(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function WD(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&VD(e,r);return a&&(i||vA(t,a.left,a.right))&&(s||vA(n,a.top,a.bottom))}function KD(e,t){e.rect(t.x,t.y,t.w,t.h)}function qD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}o(BD,"id","point"),o(BD,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(BD,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class GD extends LO{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=HD(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?uR:KD;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,qD(s,t,i)),e.clip(),a(e,qD(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,qD(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return WD(this,e,t,n)}inXRange(e,t){return WD(this,e,null,t)}inYRange(e,t){return WD(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}o(GD,"id","bar"),o(GD,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(GD,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const YD=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class QD extends LO{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=OI(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=bR(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=YD(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;i.textAlign="left",i.textBaseline="middle";let d=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,h+=c,d++),o[f]={left:0,top:h,row:d,width:p,height:r},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,d=0,h=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=XD(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&h+g+2*a>c&&(u+=d+a,l.push({width:d,height:h}),f+=d+a,p++,d=h=0),o[s]={left:f,top:h,col:p,width:m,height:g},d=Math.max(d,m),h+=g+a}),u+=d,l.push({width:d,height:h}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=iP(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=jA(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=jA(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=jA(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=jA(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;rR(e,this),this._draw(),iR(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=QA.color,o=iP(e.rtl,this.left,this.width),l=bR(s.font),{padding:c}=s,u=l.size,d=u/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=YD(s,u),g=this.isHorizontal(),y=this._computeTitleHeight();h=g?{x:jA(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:jA(i,this.top+y+c,this.bottom-t[0].height),line:0},sP(this.ctx,e.textDirection);const v=m+c;this.legendItems.forEach((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const w=r.measureText(b.text).width,E=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),_=f+d+w;let S=h.x,C=h.y;o.setWidth(this.width),g?x>0&&S+_+c>this.right&&(C=h.y+=v,h.line++,S=h.x=jA(i,this.left+c,this.right-n[h.line])):x>0&&C+v>this.bottom&&(S=h.x=S+t[h.line].width+c,h.line++,C=h.y=jA(i,this.top+y+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=RI(n.lineWidth,1);if(r.fillStyle=RI(n.fillStyle,a),r.lineCap=RI(n.lineCap,"butt"),r.lineDashOffset=RI(n.lineDashOffset,0),r.lineJoin=RI(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=RI(n.strokeStyle,a),r.setLineDash(RI(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);tR(r,a,l,t+d,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=yR(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?uR(r,{x:a,y:s,w:f,h:p,radius:l}):r.rect(a,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(S),C,b),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(E,S+f+d,g?S+_:this.right,e.rtl),function(e,t,n){cR(r,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),C,b),g)h.x+=_+c;else if("string"!==typeof b.text){const e=l.lineHeight;h.y+=XD(b,e)+c}else h.y+=v}),aP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=bR(t.font),r=vR(t.padding);if(!t.display)return;const i=iP(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),c=this.top+l,u=jA(e.align,u,this.right-d);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+jA(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=jA(a,u,u+d);s.textAlign=i.textAlign(NA(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,cR(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=bR(e.font),n=vR(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(vA(e,this.left,this.right)&&vA(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],vA(e,r.left,r.left+r.width)&&vA(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!a&&OI(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&OI(t.onHover,[e,n,this],this)}else n&&OI(t.onClick,[e,n,this],this);var r,i}}function XD(e,t){return t*(e.text?e.text.length:0)}var JD={id:"legend",_element:QD,start(e,t,n){const r=e.legend=new QD({ctx:e.ctx,options:n,chart:e});vO.configure(e,r,n),vO.addBox(e,r)},stop(e){vO.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;vO.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=vR(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ZD extends LO{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=jI(n.text)?n.text.length:1;this._padding=vR(n.padding);const i=r*bR(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=jA(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=jA(a,r,t),u=-.5*QI):(l=i-e,c=jA(a,t,r),u=.5*QI),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=bR(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);cR(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:NA(t.align),textBaseline:"middle",translation:[i,s]})}}var $D={id:"title",_element:ZD,start(e,t,n){!function(e,t){const n=new ZD({ctx:e.ctx,options:t,chart:e});vO.configure(e,n,t),vO.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;vO.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;vO.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const eL={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=fA(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function tL(e,t){return t&&(jI(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function nL(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function rL(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function iL(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=bR(t.bodyFont),c=bR(t.titleFont),u=bR(t.footerFont),d=s.length,h=i.length,f=r.length,p=vR(t.padding);let m=p.height,g=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let v=0;const b=function(e){g=Math.max(g,n.measureText(e).width+v)};return n.save(),n.font=c.string,DI(e.title,b),n.font=l.string,DI(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?a+2+t.boxPadding:0,DI(r,e=>{DI(e.before,b),DI(e.lines,b),DI(e.after,b)}),v=0,n.font=u.string,DI(e.footer,b),n.restore(),g+=p.width,{width:g,height:m}}function sL(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function aL(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||sL(e,t,n,r),yAlign:r}}function oL(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=yR(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,h)+i:"right"===o&&(p+=Math.max(d,f)+i),{x:yA(p,0,r.width-t.width),y:yA(m,0,r.height-t.height)}}function lL(e,t,n){const r=vR(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function cL(e){return tL([],nL(e))}function uL(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const dL={beforeTitle:CI,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:CI,beforeBody:CI,beforeLabel:CI,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return NI(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:CI,afterBody:CI,beforeFooter:CI,footer:CI,afterFooter:CI};function hL(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?dL[t].call(n,r):i}class fL extends LO{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new wP(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,wR(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=hL(n,"beforeTitle",this,e),i=hL(n,"title",this,e),s=hL(n,"afterTitle",this,e);let a=[];return a=tL(a,nL(r)),a=tL(a,nL(i)),a=tL(a,nL(s)),a}getBeforeBody(e,t){return cL(hL(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return DI(e,e=>{const t={before:[],lines:[],after:[]},i=uL(n,e);tL(t.before,nL(hL(i,"beforeLabel",this,e))),tL(t.lines,hL(i,"label",this,e)),tL(t.after,nL(hL(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return cL(hL(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=hL(n,"beforeFooter",this,e),i=hL(n,"footer",this,e),s=hL(n,"afterFooter",this,e);let a=[];return a=tL(a,nL(r)),a=tL(a,nL(i)),a=tL(a,nL(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(rL(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),DI(l,t=>{const n=uL(e.callbacks,t);r.push(hL(n,"labelColor",this,t)),i.push(hL(n,"labelPointStyle",this,t)),s.push(hL(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=eL[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=iL(this,n),a=Object.assign({},e,t),o=aL(this.chart,n,a),l=oL(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=yR(a),{x:d,y:h}=e,{width:f,height:p}=t;let m,g,y,v,b,x;return"center"===i?(b=h+p/2,"left"===r?(m=d,g=m-s,v=b+s,x=b-s):(m=d+f,g=m+s,v=b-s,x=b+s),y=m):(g="left"===r?d+Math.max(o,c)+s:"right"===r?d+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=h,b=v-s,m=g-s,y=g+s):(v=h+p,b=v+s,m=g+s,y=g-s),x=v),{x1:m,x2:g,x3:y,y1:v,y2:b,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=iP(n.rtl,this.x,this.width);for(e.x=lL(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=bR(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=bR(i.bodyFont),u=lL(this,"left",i),d=r.x(u),h=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(d,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,eR(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,eR(e,t,n,c)}else{e.lineWidth=TI(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(d,l),n=r.leftForLtr(r.xPlus(d,1),l-2),a=yR(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,uR(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),uR(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=bR(n.bodyFont);let d=u.lineHeight,h=0;const f=iP(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+d/2),e.y+=d+i},m=f.textAlign(s);let g,y,v,b,x,w,E;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=lL(this,m,n),t.fillStyle=n.bodyColor,DI(this.beforeBody,p),h=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,b=0,w=r.length;b<w;++b){for(g=r[b],y=this.labelTextColors[b],t.fillStyle=y,DI(g.before,p),v=g.lines,a&&v.length&&(this._drawColorBox(t,e,b,f,n),d=Math.max(u.lineHeight,o)),x=0,E=v.length;x<E;++x)p(v[x]),d=u.lineHeight;DI(g.after,p)}h=0,d=u.lineHeight,DI(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=iP(n.rtl,this.x,this.width);for(e.x=lL(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=bR(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=yR(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-d,o),t.quadraticCurveTo(a+l,o,a+l,o+d),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=eL[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=iL(this,e),a=Object.assign({},n,this._size),o=aL(t,e,a),l=oL(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=vR(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),sP(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),aP(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!LI(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!LI(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=eL[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}o(fL,"positioners",eL);var pL={id:"tooltip",_element:fL,positioners:eL,afterInit(e,t,n){n&&(e.tooltip=new fL({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",c(c({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:dL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function mL(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function gL(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class yL extends qO{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(NI(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:yA(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:mL(n,e,RI(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return gL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function vL(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:d}=e,h=i||1,f=c-1,{min:p,max:m}=t,g=!NI(s),y=!NI(a),v=!NI(l),b=(m-p)/(u+1);let x,w,E,_,S=aA((m-p)/f/h)*h;if(S<1e-14&&!g&&!y)return[{value:p},{value:m}];_=Math.ceil(m/S)-Math.floor(p/S),_>f&&(S=aA(_*S/f/h)*h),NI(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===r?(w=Math.floor(p/S)*S,E=Math.ceil(m/S)*S):(w=p,E=m),g&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,S/1e3)?(_=Math.round(Math.min((a-s)/S,c)),S=(a-s)/_,w=s,E=a):v?(w=g?s:w,E=y?a:E,_=l-1,S=(E-w)/_):(_=(E-w)/S,_=sA(_,Math.round(_),S/1e3)?Math.round(_):Math.ceil(_));const C=Math.max(dA(S),dA(w));x=Math.pow(10,NI(o)?C:o),w=Math.round(w*x)/x,E=Math.round(E*x)/x;let k=0;for(g&&(d&&w!==s?(n.push({value:s}),w<s&&k++,sA(Math.round((w+k*S)*x)/x,s,bL(s,b,e))&&k++):w<s&&k++);k<_;++k){const e=Math.round((w+k*S)*x)/x;if(y&&e>a)break;n.push({value:e})}return y&&d&&E!==a?n.length&&sA(n[n.length-1].value,a,bL(a,b,e))?n[n.length-1].value=a:n.push({value:a}):y&&E!==a||n.push({value:E}),n}function bL(e,t,n){let{horizontal:r,minRotation:i}=n;const s=cA(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}o(yL,"id","category"),o(yL,"defaults",{ticks:{callback:gL}});class xL extends qO{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return NI(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=iA(r),t=iA(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=vL({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&lA(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return VA(e,this.chart.options.locale,this.options.ticks.format)}}class wL extends xL{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=II(e)?e:0,this.max=II(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=cA(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}o(wL,"id","linear"),o(wL,"defaults",{ticks:{callback:HA.formatters.numeric}});const EL=e=>Math.floor(rA(e)),_L=(e,t)=>Math.pow(10,EL(e)+t);function SL(e){return 1===e/Math.pow(10,EL(e))}function CL(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function kL(e,t){let{min:n,max:r}=t;n=AI(e.min,n);const i=[],s=EL(n);let a=function(e,t){let n=EL(t-e);for(;CL(e,t,n)>10;)n++;for(;CL(e,t,n)<10;)n--;return Math.min(n,EL(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,d=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((u-d)/Math.pow(10,a)),f=AI(e.min,Math.round((c+d+h*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:SL(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+d+h*Math.pow(10,a))*o)/o;const p=AI(e.max,f);return i.push({value:p,major:SL(p),significand:h}),i}class NL extends qO{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=xL.prototype.parse.apply(this,[e,t]);if(0!==n)return II(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=II(e)?Math.max(0,e):null,this.max=II(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!II(this._userMin)&&(this.min=e===_L(this.min,0)?_L(this.min,-1):_L(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(_L(n,-1)),s(_L(r,1)))),n<=0&&i(_L(r,-1)),r<=0&&s(_L(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=kL({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&lA(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":VA(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=rA(e),this._valueRange=rA(this.max)-rA(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(rA(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function jL(e){const t=e.ticks;if(t.display&&e.display){const e=vR(t.backdropPadding);return RI(t.font&&t.font.size,QA.font.size)+e.height}return 0}function TL(e,t,n){return n=jI(n)?n:[n],{w:JA(e,t.string,n),h:n.length*t.lineHeight}}function IL(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function AL(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?QI/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),u=bR(s.font),d=TL(e.ctx,u,e._pointLabels[l]);r[l]=d;const h=mA(e.getIndexAngle(l)+o),f=Math.round(uA(h));RL(n,t,h,IL(f,c.x,d.w,0,180),IL(f,c.y,d.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:jL(s)/2,additionalAngle:a?QI/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=PL(e,u,l);r.push(i),"auto"===o&&(i.visible=OL(i,c),i.visible&&(c=i))}return r}(e,r,i)}function RL(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function PL(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(uA(mA(l.angle+eA))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),d=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+o.w,bottom:u+o.h}}function OL(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(nR({x:n,y:r},t)||nR({x:n,y:s},t)||nR({x:i,y:r},t)||nR({x:i,y:s},t))}function DL(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!NI(o)){const n=yR(t.borderRadius),l=vR(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,d=s-r+l.width,h=a-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),uR(e,{x:c,y:u,w:d,h:h,radius:n}),e.fill()):e.fillRect(c,u,d,h)}}function LL(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,XI);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}o(NL,"id","logarithmic"),o(NL,"defaults",{ticks:{callback:HA.formatters.logarithmic,major:{enabled:!0}}});class ML extends xL{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=vR(jL(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=II(e)&&!isNaN(e)?e:0,this.max=II(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/jL(this.options))}generateTickLabels(e){xL.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=OI(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?AL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return mA(e*(XI/(this._pointLabels.length||1))+cA(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(NI(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(NI(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return wR(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-eA+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),LL(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));DL(n,s,t);const a=bR(s.font),{x:o,y:l,textAlign:c}=t;cR(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),LL(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=bR(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=vR(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}cR(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}o(ML,"id","radialLinear"),o(ML,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:HA.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),o(ML,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(ML,"descriptors",{angleLines:{_fallback:"grid"}});const UL={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},FL=Object.keys(UL);function BL(e,t){return e-t}function VL(e,t){if(NI(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),II(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!oA(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function zL(e,t,n,r){const i=FL.length;for(let s=FL.indexOf(e);s<i-1;++s){const e=UL[FL[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return FL[s]}return FL[i-1]}function HL(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=bA(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function WL(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class KL extends qO{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new ZP(e.adapters.date);r.init(t),VI(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:VL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=II(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=II(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?zL(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=FL.length-1;s>=FL.indexOf(n);s--){const n=FL[s];if(UL[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return FL[n?FL.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=FL.indexOf(e)+1,n=FL.length;t<n;++t)if(UL[FL[t]].common)return FL[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),WL(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=yA(r,0,s),i=yA(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||zL(i.minUnit,t,n,this._getLabelCapacity(t)),a=RI(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=oA(o)||!0===o,c={};let u,d,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=h,d=0;u<n;u=+e.add(u,a,s),d++)HL(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==d||HL(c,u,f),Object.keys(c).sort(BL).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return OI(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],d=n[t],h=l&&u&&d&&d.major;return this._adapter.format(e,r||(h?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=cA(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,WL(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(VL(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return SA(e.sort(BL))}}function qL(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=xA(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=xA(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}o(KL,"id","time"),o(KL,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class GL extends KL{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=qL(t,this.min),this._tableRange=qL(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(qL(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return qL(this._table,n*this._tableRange+this._minPos,!0)}}o(GL,"id","timeseries"),o(GL,"defaults",KL.defaults);const YL=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],QL="label";function XL(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function JL(e,t){e.labels=t}function ZL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QL;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):c({},t)})}function $L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QL;const n={labels:[],datasets:[]};return JL(n,e.labels),ZL(n,e.datasets,t),n}function eM(t,n){const{height:r=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:d,plugins:h=[],fallbackContent:f,updateMode:p}=t,m=i(t,YL),g=(0,e.useRef)(null),y=(0,e.useRef)(null),v=()=>{g.current&&(y.current=new _D(g.current,{type:l,data:$L(u,o),options:d&&c({},d),plugins:h}),XL(n,y.current))},b=()=>{XL(n,null),y.current&&(y.current.destroy(),y.current=null)};return(0,e.useEffect)(()=>{!a&&y.current&&d&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(y.current,d)},[a,d]),(0,e.useEffect)(()=>{!a&&y.current&&JL(y.current.config.data,u.labels)},[a,u.labels]),(0,e.useEffect)(()=>{!a&&y.current&&u.datasets&&ZL(y.current.config.data,u.datasets,o)},[a,u.datasets]),(0,e.useEffect)(()=>{y.current&&(a?(b(),setTimeout(v)):y.current.update(p))},[a,d,u.labels,u.datasets,p]),(0,e.useEffect)(()=>{y.current&&(b(),setTimeout(v))},[l]),(0,e.useEffect)(()=>(v(),()=>b()),[]),e.createElement("canvas",c({ref:g,role:"img",height:r,width:s},m),f)}const tM=(0,e.forwardRef)(eM);function nM(t,n){return _D.register(n),(0,e.forwardRef)((n,r)=>e.createElement(tM,c(c({},n),{},{ref:r,type:t})))}const rM=nM("bar",zP),iM=nM("pie",GP);_D.register(TD,yL,wL,GD,$D,pL,JD);const sM=()=>{const{currentUser:t}=eb(),[n,r]=(0,e.useState)(!0),[i,s]=(0,e.useState)(""),[a,o]=(0,e.useState)({totalBattles:0,wins:0,losses:0,draws:0}),[l,u]=(0,e.useState)({}),[d,h]=(0,e.useState)([]),[f,p]=(0,e.useState)([]);(0,e.useEffect)(()=>{(async()=>{try{const e=oy(xg(Xv,"battles"),cy("status","==","Completed")),n=await Cy(e);let i=[],s=0,a=0,l=0,d=0;const f={},m={};n.forEach(e=>{const n=c({id:e.id},e.data());if(n.player1.userId===t.uid||n.player2.userId===t.uid){s++,i.push(n),"draw"===n.winner?d++:"player1"===n.winner&&n.player1.userId===t.uid||"player2"===n.winner&&n.player2.userId===t.uid?a++:l++;const e=n.player1.userId===t.uid?n.player1.armyFaction:n.player2.armyFaction;f[e]?f[e]++:f[e]=1}}),i.sort((e,t)=>t.date.toDate()-e.date.toDate());const g=i.slice(0,5),y=Object.entries(m).map(e=>{let[t,n]=e;return{unitId:t,count:n}});y.sort((e,t)=>t.count-e.count),o({totalBattles:s,wins:a,losses:l,draws:d}),u(f),h(g),p(y.slice(0,5)),r(!1)}catch(i){console.error("Error fetching user stats:",i),s("Failed to load statistics. Please try again later."),r(!1)}})()},[t]);const m={labels:["Wins","Losses","Draws"],datasets:[{data:[a.wins,a.losses,a.draws],backgroundColor:["#4CAF50","#F44336","#FFC107"],borderWidth:1}]},g=Object.keys(l),y={labels:g,datasets:[{label:"Battles Played",data:g.map(e=>l[e]),backgroundColor:["#2196F3","#FF5722","#8BC34A","#607D8B"],borderWidth:1}]};return n?(0,jt.jsxs)("div",{className:"text-center",children:[(0,jt.jsx)($k,{animation:"border"}),(0,jt.jsx)("p",{children:"Loading statistics..."})]}):i?(0,jt.jsx)(tk,{variant:"danger",children:i}):(0,jt.jsxs)("div",{className:"user-stats",children:[(0,jt.jsx)("h3",{className:"mb-4",children:"Battle Statistics"}),0===a.totalBattles?(0,jt.jsx)(tk,{variant:"info",children:"You haven't played any battles yet. Start a battle to see your statistics!"}):(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)(uN,{className:"mb-4",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:"Battle Results"}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)("div",{style:{height:"250px"},children:(0,jt.jsx)(iM,{data:m,options:{maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})}),(0,jt.jsx)(KC.Footer,{className:"text-center",children:(0,jt.jsxs)("small",{className:"text-muted",children:["Win Rate: ",(a.wins/a.totalBattles*100).toFixed(1),"%"]})})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:"Faction Usage"}),(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)("div",{style:{height:"250px"},children:Object.keys(l).length>0?(0,jt.jsx)(rM,{data:y,options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}}):(0,jt.jsx)("p",{className:"text-center text-muted",children:"No faction data available"})})})]})})]}),(0,jt.jsx)(uN,{className:"mb-4",children:(0,jt.jsx)(Tk,{md:12,children:(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:"Recent Battles"}),d.length>0?(0,jt.jsx)(nj,{variant:"flush",children:d.map(e=>{const n=e.player1.userId===t.uid,r=n?e.player1.armyName:e.player2.armyName,i=n?e.player2.armyName:e.player1.armyName,s=n?e.player1.armyFaction:e.player2.armyFaction,a=n?e.player2.armyFaction:e.player1.armyFaction;let o="text-info",l="Draw";return"player1"===e.winner?(o=n?"text-success":"text-danger",l=n?"Victory":"Defeat"):"player2"===e.winner&&(o=n?"text-danger":"text-success",l=n?"Defeat":"Victory"),(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("h6",{className:"mb-0",children:e.name}),(0,jt.jsxs)("small",{className:"text-muted",children:[e.date.toDate().toLocaleDateString()," \xb7 ",e.scenario]}),(0,jt.jsx)("div",{children:(0,jt.jsxs)("small",{children:[r," (",s,") vs. ",i," (",a,")"]})})]}),(0,jt.jsx)("span",{className:"badge ".concat(o),children:l})]})},e.id)})}):(0,jt.jsx)(KC.Body,{children:(0,jt.jsx)("p",{className:"text-center text-muted",children:"No recent battles found"})})]})})}),f.length>0&&(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:"Most Used Units"}),(0,jt.jsx)(nj,{variant:"flush",children:f.map((e,t)=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("h6",{className:"mb-0",children:e.unitId}),(0,jt.jsxs)("small",{className:"text-muted",children:["Used in ",e.count," battles"]})]}),(0,jt.jsxs)("span",{className:"text-muted",children:["#",t+1]})]})},e.unitId))})]})]})]})},aM=()=>{const t=pe(),n=de(),[r,i]=(0,e.useState)((()=>{const e=n.pathname;return e.includes("/settings")?"settings":e.includes("/stats")?"stats":"profile"})()),s=e=>{i(e),t("/profile/".concat("profile"===e?"":e))};return(0,jt.jsxs)(Bt,{children:[(0,jt.jsx)("h1",{className:"mb-4",children:"User Profile"}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(CE,{variant:"pills",className:"flex-column profile-nav",children:[(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{active:"profile"===r,onClick:()=>s("profile"),children:"Profile Information"})}),(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{active:"settings"===r,onClick:()=>s("settings"),children:"Settings"})}),(0,jt.jsx)(CE.Item,{children:(0,jt.jsx)(CE.Link,{active:"stats"===r,onClick:()=>s("stats"),children:"Battle Statistics"})})]})}),(0,jt.jsx)(Tk,{md:9,children:(0,jt.jsxs)("div",{className:"profile-content p-3 border rounded bg-white",children:["profile"===r&&(0,jt.jsx)(WT,{}),"settings"===r&&(0,jt.jsx)(KT,{}),"stats"===r&&(0,jt.jsx)(sM,{})]})})]})]})},oM=()=>(0,jt.jsx)(Bt,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"70vh"},children:(0,jt.jsx)(uN,{className:"w-100",children:(0,jt.jsx)(Tk,{md:8,className:"mx-auto text-center",children:(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"py-5",children:[(0,jt.jsx)("h1",{className:"display-1 mb-4",children:"404"}),(0,jt.jsx)("h2",{className:"mb-4",children:"Page Not Found"}),(0,jt.jsx)("p",{className:"mb-4 text-muted",children:"The page you are looking for might have been removed, had its name changed, or is temporarily unavailable."}),(0,jt.jsxs)("div",{className:"d-flex justify-content-center gap-3",children:[(0,jt.jsx)(nC,{as:vt,to:"/",variant:"primary",children:"Return to Home"}),(0,jt.jsx)(nC,{as:vt,to:"/units",variant:"outline-secondary",children:"View Units"}),(0,jt.jsx)(nC,{as:vt,to:"/armies",variant:"outline-secondary",children:"View Armies"})]})]})})})})}),lM=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)("all"),{currentUser:p}=eb();(0,e.useEffect)(()=>{m()},[p]),(0,e.useEffect)(()=>{g()},[t,u,h]);const m=async()=>{if(p)try{a(!0);const e=oy(xg(Xv,"users",p.uid,"customKeywords"),hy("name","asc")),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));n(t),l("")}catch(e){console.error("Error fetching keywords:",e),l("Failed to fetch custom keywords")}finally{a(!1)}},g=()=>{let e=t;if("all"!==h&&(e=e.filter(e=>e.category===h)),u){const t=u.toLowerCase();e=e.filter(e=>{var n;return e.name.toLowerCase().includes(t)||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t))})}i(e)};return s?(0,jt.jsx)(eN,{text:"Loading custom keywords..."}):(0,jt.jsx)(jt.Fragment,{children:(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h4",{className:"mb-0",children:"Custom Keywords"}),(0,jt.jsx)(nC,{as:vt,to:"/units/keywords/create",variant:"primary",children:"Create Keyword"})]}),(0,jt.jsxs)(KC.Body,{children:[o&&(0,jt.jsx)(tk,{variant:"danger",children:o}),(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search keywords...",value:u,onChange:e=>d(e.target.value)})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Category"}),(0,jt.jsx)(Xk.Select,{value:h,onChange:e=>f(e.target.value),children:[{value:"all",label:"All Categories"},{value:"movement",label:"Movement"},{value:"attack",label:"Attack"},{value:"defense",label:"Defense"},{value:"command",label:"Command"},{value:"special",label:"Special"},{value:"custom",label:"Custom"}].map(e=>(0,jt.jsx)("option",{value:e.value,children:e.label},e.value))})]})})]}),0===t.length?(0,jt.jsxs)(tk,{variant:"info",className:"text-center",children:[(0,jt.jsx)("p",{className:"mb-3",children:"You haven't created any custom keywords yet."}),(0,jt.jsx)(nC,{as:vt,to:"/units/keywords/create",variant:"primary",children:"Create Your First Keyword"})]}):0===r.length?(0,jt.jsx)(tk,{variant:"warning",className:"text-center",children:(0,jt.jsx)("p",{className:"mb-0",children:"No keywords match your filters."})}):(0,jt.jsx)(nj,{children:r.map(e=>{return(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{className:"flex-grow-1",children:[(0,jt.jsxs)("h5",{className:"mb-2",children:[e.name,(0,jt.jsx)(zN,{bg:(t=e.category,{movement:"primary",attack:"danger",defense:"success",command:"info",special:"warning",custom:"secondary"}[t]||"secondary"),className:"ms-2",children:e.category})]}),(0,jt.jsx)("p",{className:"mb-2",children:e.description}),e.timing&&(0,jt.jsxs)("p",{className:"text-muted small mb-2",children:[(0,jt.jsx)("strong",{children:"Timing:"})," ",e.timing]}),e.examples&&e.examples.length>0&&(0,jt.jsxs)("div",{className:"small text-muted",children:[(0,jt.jsx)("strong",{children:"Examples:"}),(0,jt.jsx)("ul",{className:"mb-0 mt-1",children:e.examples.map((e,t)=>(0,jt.jsx)("li",{children:e},t))})]})]}),(0,jt.jsxs)("div",{className:"ms-3",children:[(0,jt.jsx)(nC,{as:vt,to:"/units/keywords/edit/".concat(e.id),variant:"outline-primary",size:"sm",className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this keyword?"))try{await jy(wg(Xv,"users",p.uid,"customKeywords",e)),m()}catch(t){console.error("Error deleting keyword:",t),l("Failed to delete keyword")}})(e.id),children:"Delete"})]})]})},e.id);var t})})]})]})})},cM=()=>{const{keywordId:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({name:"",category:"custom",description:"",timing:"",examples:[""]});(0,e.useEffect)(()=>{(async()=>{if(t&&r)try{const e=wg(Xv,"users",r.uid,"customKeywords",t),n=await _y(e);if(n.exists()){const e=n.data();h(c(c({},e),{},{examples:e.examples||[""]}))}else o("Keyword not found")}catch(e){console.error("Error fetching keyword:",e),o("Failed to load keyword")}})()},[t,r]);const f=e=>{const{name:t,value:n}=e.target;h(e=>c(c({},e),{},{[t]:n}))};return(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("h3",{className:"mb-0",children:[t?"Edit":"Create"," Custom Keyword"]})}),(0,jt.jsxs)(KC.Body,{children:[a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),d.name.trim())if(d.description.trim())try{s(!0),o("");const e=d.examples.filter(e=>""!==e.trim()),i={name:d.name.trim(),category:d.category,description:d.description.trim(),timing:d.timing.trim(),examples:e,lastUpdated:Ry(),userId:r.uid};t?(await Ny(wg(Xv,"users",r.uid,"customKeywords",t),i),u("Keyword updated successfully!")):(i.createdAt=Ry(),await Ty(xg(Xv,"users",r.uid,"customKeywords"),i),u("Keyword created successfully!"),h({name:"",category:"custom",description:"",timing:"",examples:[""]})),setTimeout(()=>{n("/units/keywords")},1500)}catch(i){console.error("Error saving keyword:",i),o("Failed to save keyword: "+i.message)}finally{s(!1)}else o("Description is required");else o("Keyword name is required")},children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:8,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Keyword Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"name",value:d.name,onChange:f,placeholder:"e.g., Quick Strike 1",required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"The name of your custom keyword"})]})}),(0,jt.jsx)(Tk,{md:4,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Category*"}),(0,jt.jsx)(Xk.Select,{name:"category",value:d.category,onChange:f,required:!0,children:[{value:"movement",label:"Movement"},{value:"attack",label:"Attack"},{value:"defense",label:"Defense"},{value:"command",label:"Command"},{value:"special",label:"Special"},{value:"custom",label:"Custom"}].map(e=>(0,jt.jsx)("option",{value:e.value,children:e.label},e.value))})]})})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Description*"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"description",value:d.description,onChange:f,placeholder:"Describe what this keyword does and how it works...",rows:4,required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Detailed explanation of the keyword's effect"})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Timing (Optional)"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"timing",value:d.timing,onChange:f,placeholder:"e.g., During activation, Before attacking"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"When this keyword takes effect"})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Examples"}),d.examples.map((e,t)=>(0,jt.jsxs)("div",{className:"d-flex mb-2",children:[(0,jt.jsx)(Xk.Control,{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...d.examples];n[e]=t,h(c(c({},d),{},{examples:n}))})(t,e.target.value),placeholder:"Example ".concat(t+1),className:"me-2"}),d.examples.length>1&&(0,jt.jsx)(nC,{variant:"outline-danger",onClick:()=>(e=>{const t=d.examples.filter((t,n)=>n!==e);h(c(c({},d),{},{examples:t.length?t:[""]}))})(t),children:"Remove"})]},t)),(0,jt.jsx)(nC,{variant:"outline-secondary",onClick:()=>{h(c(c({},d),{},{examples:[...d.examples,""]}))},className:"mt-2",children:"Add Example"})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/units/keywords"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",disabled:i,children:i?"Saving...":(t?"Update":"Create")+" Keyword"})]})]})]})]})},uM=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(""),[o,l]=(0,e.useState)(""),{currentUser:u}=eb();(0,e.useEffect)(()=>{d()},[u]);const d=async()=>{if(u)try{i(!0);const e=oy(xg(Xv,"users",u.uid,"customUnitTypes"),hy("sortOrder","asc"),hy("displayName","asc")),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));n(t),a("")}catch(e){console.error("Error fetching unit types:",e),a("Failed to fetch custom unit types")}finally{i(!1)}},h=t.filter(e=>{var t;return""===o||e.displayName.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase()))});return r?(0,jt.jsx)(eN,{text:"Loading custom unit types..."}):(0,jt.jsxs)(KC,{children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h4",{className:"mb-0",children:"Custom Unit Types"}),(0,jt.jsx)(nC,{as:vt,to:"/units/types/create",variant:"primary",children:"Create Unit Type"})]}),(0,jt.jsxs)(KC.Body,{children:[s&&(0,jt.jsx)(tk,{variant:"danger",children:s}),(0,jt.jsx)(uN,{className:"mb-3",children:(0,jt.jsx)(Tk,{md:12,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search unit types...",value:o,onChange:e=>l(e.target.value)})]})})}),0===t.length?(0,jt.jsxs)(tk,{variant:"info",className:"text-center",children:[(0,jt.jsx)("p",{className:"mb-3",children:"You haven't created any custom unit types yet."}),(0,jt.jsx)("p",{className:"small text-muted mb-3",children:"Custom unit types allow you to create your own categories beyond Command, Corps, etc."}),(0,jt.jsx)(nC,{as:vt,to:"/units/types/create",variant:"primary",children:"Create Your First Unit Type"})]}):0===h.length?(0,jt.jsx)(tk,{variant:"warning",className:"text-center",children:(0,jt.jsx)("p",{className:"mb-0",children:"No unit types match your search."})}):(0,jt.jsx)(nj,{children:h.map(e=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{className:"flex-grow-1",children:[(0,jt.jsxs)("h5",{className:"mb-2",children:[e.icon&&(0,jt.jsx)("i",{className:"".concat(e.icon," me-2")}),e.displayName,(0,jt.jsxs)(zN,{bg:"secondary",className:"ms-2",children:["Sort: ",e.sortOrder]})]}),(0,jt.jsxs)("div",{className:"small text-muted mb-2",children:[(0,jt.jsx)("strong",{children:"Internal name:"})," ",e.name]}),e.description&&(0,jt.jsx)("p",{className:"mb-0",children:e.description})]}),(0,jt.jsxs)("div",{className:"ms-3 text-nowrap",children:[(0,jt.jsx)(nC,{as:vt,to:"/units/types/edit/".concat(e.id),variant:"outline-primary",size:"sm",className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this unit type? Units using this type may be affected."))try{await jy(wg(Xv,"users",u.uid,"customUnitTypes",e)),d()}catch(t){console.error("Error deleting unit type:",t),a("Failed to delete unit type")}})(e.id),children:"Delete"})]})]})},e.id))}),t.length>0&&(0,jt.jsx)(tk,{variant:"info",className:"mt-3 mb-0",children:(0,jt.jsxs)("small",{children:[(0,jt.jsx)("strong",{children:"Note:"})," Custom unit types will appear in unit creation dropdowns alongside system types. The sort order determines their position in lists."]})})]})]})},dM=()=>{const{typeId:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({name:"",displayName:"",description:"",icon:"",sortOrder:100});(0,e.useEffect)(()=>{(async()=>{if(t&&r)try{const e=wg(Xv,"users",r.uid,"customUnitTypes",t),n=await _y(e);n.exists()?h(n.data()):o("Unit type not found")}catch(e){console.error("Error fetching unit type:",e),o("Failed to load unit type")}})()},[t,r]);const f=e=>{const{name:t,value:n,type:r}=e.target;h(e=>c(c({},e),{},{[t]:"number"===r?parseInt(n)||0:n}))};return(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("h3",{className:"mb-0",children:[t?"Edit":"Create"," Custom Unit Type"]})}),(0,jt.jsxs)(KC.Body,{children:[a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),d.name.trim())if(d.displayName.trim())try{s(!0),o("");const e={name:d.name.toLowerCase().replace(/\s+/g,"_"),displayName:d.displayName.trim(),description:d.description.trim(),icon:d.icon.trim(),sortOrder:d.sortOrder,lastUpdated:Ry(),userId:r.uid};t?(await Ny(wg(Xv,"users",r.uid,"customUnitTypes",t),e),u("Unit type updated successfully!")):(e.createdAt=Ry(),await Ty(xg(Xv,"users",r.uid,"customUnitTypes"),e),u("Unit type created successfully!"),h({name:"",displayName:"",description:"",icon:"",sortOrder:100})),setTimeout(()=>{n("/units/types")},1500)}catch(i){console.error("Error saving unit type:",i),o("Failed to save unit type: "+i.message)}finally{s(!1)}else o("Display name is required");else o("Name is required")},children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Type Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"name",value:d.name,onChange:f,placeholder:"e.g., elite_guard",required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Internal name (will be converted to lowercase with underscores)"})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Display Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"displayName",value:d.displayName,onChange:f,placeholder:"e.g., Elite Guard",required:!0}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Name shown in the interface"})]})})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Description"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"description",value:d.description,onChange:f,placeholder:"Describe what this unit type represents...",rows:3})]}),(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Icon (Optional)"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"icon",value:d.icon,onChange:f,placeholder:"e.g., bi-shield-fill"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Bootstrap icon class"})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Sort Order"}),(0,jt.jsx)(Xk.Control,{type:"number",name:"sortOrder",value:d.sortOrder,onChange:f,min:"0",max:"999"}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"Lower numbers appear first in lists"})]})})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/units/types"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",disabled:i,children:i?"Saving...":(t?"Update":"Create")+" Unit Type"})]})]})]})]})},hM=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)("all"),{currentUser:p}=eb();(0,e.useEffect)(()=>{m()},[p]),(0,e.useEffect)(()=>{g()},[t,u,h]);const m=async()=>{if(p)try{a(!0);const e=oy(xg(Xv,"users",p.uid,"abilities"),hy("name","asc")),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));n(t),l("")}catch(e){console.error("Error fetching abilities:",e),l("Failed to fetch abilities")}finally{a(!1)}},g=()=>{let e=t;if("all"!==h&&(e=e.filter(e=>e.timing===h)),u){const t=u.toLowerCase();e=e.filter(e=>{var n,r;return e.name.toLowerCase().includes(t)||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t))||(null===(r=e.rulesText)||void 0===r?void 0:r.toLowerCase().includes(t))})}i(e)};return s?(0,jt.jsx)(eN,{text:"Loading abilities..."}):(0,jt.jsxs)(KC,{children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h4",{className:"mb-0",children:"Abilities"}),(0,jt.jsx)(nC,{as:vt,to:"/abilities/create",variant:"primary",children:"Create Ability"})]}),(0,jt.jsxs)(KC.Body,{children:[o&&(0,jt.jsx)(tk,{variant:"danger",children:o}),(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search abilities...",value:u,onChange:e=>d(e.target.value)})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Filter by Timing"}),(0,jt.jsxs)(Xk.Select,{value:h,onChange:e=>f(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Timings"}),PT.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:PT.getDisplayName(e)},e))]})]})})]}),0===t.length?(0,jt.jsxs)(tk,{variant:"info",className:"text-center",children:[(0,jt.jsx)("p",{className:"mb-3",children:"You haven't created any abilities yet."}),(0,jt.jsx)(nC,{as:vt,to:"/abilities/create",variant:"primary",children:"Create Your First Ability"})]}):0===r.length?(0,jt.jsx)(tk,{variant:"warning",className:"text-center",children:(0,jt.jsx)("p",{className:"mb-0",children:"No abilities match your filters."})}):(0,jt.jsx)(nj,{children:r.map(e=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{className:"flex-grow-1",children:[(0,jt.jsxs)("h5",{className:"mb-2",children:[e.name,(0,jt.jsx)(zN,{bg:PT.getBadgeColor(e.timing),className:"ms-2",children:PT.getDisplayName(e.timing)})]}),(0,jt.jsx)("p",{className:"mb-2 text-muted",children:e.description}),e.rulesText&&(0,jt.jsx)("div",{className:"small mb-2",style:{whiteSpace:"pre-line"},children:e.rulesText}),e.reminders&&e.reminders.length>0&&(0,jt.jsxs)("div",{className:"mt-2",children:[(0,jt.jsx)("strong",{className:"small",children:"Reminders:"}),e.reminders.map((e,t)=>(0,jt.jsx)(zN,{bg:PT.getBadgeColor(e.reminderType),className:"ms-2 mb-1",children:PT.getDisplayName(e.reminderType)},t))]})]}),(0,jt.jsxs)("div",{className:"ms-3 text-nowrap",children:[(0,jt.jsx)(nC,{as:vt,to:"/abilities/edit/".concat(e.id),variant:"outline-primary",size:"sm",className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this ability? Units using this ability will no longer have access to it."))try{await jy(wg(Xv,"users",p.uid,"abilities",e)),m()}catch(t){console.error("Error deleting ability:",t),l("Failed to delete ability")}})(e.id),children:"Delete"})]})]})},e.id))})]})]})},fM=()=>{const{abilityId:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)({name:"",description:"",rulesText:"",timing:PT.GENERAL,reminders:[]}),[f,p]=(0,e.useState)({text:"",reminderType:PT.GENERAL,condition:""});(0,e.useEffect)(()=>{(async()=>{if(t&&r)try{const e=wg(Xv,"users",r.uid,"abilities",t),n=await _y(e);n.exists()?h(c(c({},n.data()),{},{reminders:n.data().reminders||[]})):o("Ability not found")}catch(e){console.error("Error fetching ability:",e),o("Failed to load ability")}})()},[t,r]);const m=e=>{const{name:t,value:n}=e.target;h(e=>c(c({},e),{},{[t]:n}))},g=e=>{const{name:t,value:n}=e.target;p(e=>c(c({},e),{},{[t]:n}))};return(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("h3",{className:"mb-0",children:[t?"Edit":"Create"," Ability"]})}),(0,jt.jsxs)(KC.Body,{children:[a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),d.name.trim())if(d.description.trim())try{s(!0),o("");const e={name:d.name.trim(),description:d.description.trim(),rulesText:d.rulesText.trim(),timing:d.timing,reminders:d.reminders,lastUpdated:Ry(),userId:r.uid,isCustom:!0};t?(await Ny(wg(Xv,"users",r.uid,"abilities",t),e),u("Ability updated successfully!")):(e.createdAt=Ry(),await Ty(xg(Xv,"users",r.uid,"abilities"),e),u("Ability created successfully!"),h({name:"",description:"",rulesText:"",timing:PT.GENERAL,reminders:[]})),setTimeout(()=>{n("/abilities")},1500)}catch(i){console.error("Error saving ability:",i),o("Failed to save ability: "+i.message)}finally{s(!1)}else o("Description is required");else o("Ability name is required")},children:[(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Ability Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"name",value:d.name,onChange:m,placeholder:"e.g., Tactical Superiority",required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Description*"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"description",value:d.description,onChange:m,placeholder:"Brief description of the ability...",rows:2,required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Rules Text*"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"rulesText",value:d.rulesText,onChange:m,placeholder:"Detailed rules for how this ability works...",rows:4,required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Primary Timing"}),(0,jt.jsx)(Xk.Select,{name:"timing",value:d.timing,onChange:m,children:PT.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:PT.getDisplayName(e)},e))}),(0,jt.jsx)(Xk.Text,{className:"text-muted",children:"When this ability is primarily used"})]}),(0,jt.jsxs)(KC,{className:"mb-4",children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsx)("h5",{className:"mb-0",children:"Reminders"})}),(0,jt.jsxs)(KC.Body,{children:[(0,jt.jsx)(uN,{className:"mb-3",children:(0,jt.jsx)(Tk,{md:12,children:(0,jt.jsxs)(Xk.Group,{className:"mb-2",children:[(0,jt.jsx)(Xk.Label,{children:"Reminder Text"}),(0,jt.jsx)(Xk.Control,{as:"textarea",name:"text",value:f.text,onChange:g,placeholder:"What should the player be reminded about?",rows:2})]})})}),(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-2",children:[(0,jt.jsx)(Xk.Label,{children:"Reminder Type"}),(0,jt.jsx)(Xk.Select,{name:"reminderType",value:f.reminderType,onChange:g,children:PT.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:PT.getDisplayName(e)},e))})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{className:"mb-2",children:[(0,jt.jsx)(Xk.Label,{children:"Condition (Optional)"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"condition",value:f.condition,onChange:g,placeholder:"e.g., When attacking"})]})})]}),(0,jt.jsx)(nC,{variant:"outline-primary",onClick:()=>{f.text.trim()?(h(e=>c(c({},e),{},{reminders:[...e.reminders,c({},f)]})),p({text:"",reminderType:PT.GENERAL,condition:""}),o("")):o("Reminder text is required")},children:"Add Reminder"}),d.reminders.length>0&&(0,jt.jsx)(nj,{className:"mt-3",children:d.reminders.map((e,t)=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"mb-1",children:e.text}),(0,jt.jsx)(zN,{bg:PT.getBadgeColor(e.reminderType),children:PT.getDisplayName(e.reminderType)}),e.condition&&(0,jt.jsxs)("span",{className:"ms-2 text-muted small",children:["Condition: ",e.condition]})]}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(e=>{h(t=>c(c({},t),{},{reminders:t.reminders.filter((t,n)=>n!==e)}))})(t),children:"Remove"})]})},t))})]})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/abilities"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",disabled:i,children:i?"Saving...":(t?"Update":"Create")+" Ability"})]})]})]})]})},pM=()=>{const[t,n]=(0,e.useState)([]),[r,i]=(0,e.useState)([]),[s,a]=(0,e.useState)(!0),[o,l]=(0,e.useState)(""),[u,d]=(0,e.useState)("all"),[h,f]=(0,e.useState)(""),{currentUser:p}=eb();(0,e.useEffect)(()=>{m()},[p]),(0,e.useEffect)(()=>{g()},[t,u,h]);const m=async()=>{if(p)try{a(!0);const e=oy(xg(Xv,"users",p.uid,"upgradeCards"),hy("name","asc")),t=(await Cy(e)).docs.map(e=>c({id:e.id},e.data()));n(t),l("")}catch(e){console.error("Error fetching upgrades:",e),l("Failed to fetch upgrade cards")}finally{a(!1)}},g=()=>{let e=t;if("all"!==u&&(e=e.filter(e=>e.upgradeType===u)),h){const t=h.toLowerCase();e=e.filter(e=>{var n;return e.name.toLowerCase().includes(t)||(null===(n=e.description)||void 0===n?void 0:n.toLowerCase().includes(t))})}i(e)},y=e=>{var t,n,r;const i=[];if(0!==e.modelCountChange&&i.push("Models: ".concat(e.modelCountChange>0?"+":"").concat(e.modelCountChange)),(null===(t=e.addKeywords)||void 0===t?void 0:t.length)>0&&i.push("+".concat(e.addKeywords.length," keyword").concat(e.addKeywords.length>1?"s":"")),(null===(n=e.addAbilities)||void 0===n?void 0:n.length)>0&&i.push("+".concat(e.addAbilities.length," abilit").concat(e.addAbilities.length>1?"ies":"y")),(null===(r=e.addWeapons)||void 0===r?void 0:r.length)>0&&i.push("+".concat(e.addWeapons.length," weapon").concat(e.addWeapons.length>1?"s":"")),e.statModifiers){const{wounds:t,courage:n,speed:r}=e.statModifiers;t&&i.push("Wounds: ".concat(t>0?"+":"").concat(t)),n&&i.push("Courage: ".concat(n>0?"+":"").concat(n)),r&&i.push("Speed: ".concat(r>0?"+":"").concat(r))}return i.length>0?i.join(" \u2022 "):"No effects"};return s?(0,jt.jsx)(eN,{text:"Loading upgrade cards..."}):(0,jt.jsxs)(KC,{children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("h4",{className:"mb-0",children:"Upgrade Cards"}),(0,jt.jsx)(nC,{as:vt,to:"/upgrades/create",variant:"primary",children:"Create Upgrade Card"})]}),(0,jt.jsxs)(KC.Body,{children:[o&&(0,jt.jsx)(tk,{variant:"danger",children:o}),(0,jt.jsxs)(uN,{className:"mb-3",children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Search"}),(0,jt.jsx)(Xk.Control,{type:"text",placeholder:"Search upgrades...",value:h,onChange:e=>f(e.target.value)})]})}),(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Type"}),(0,jt.jsxs)(Xk.Select,{value:u,onChange:e=>d(e.target.value),children:[(0,jt.jsx)("option",{value:"all",children:"All Types"}),sj.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:sj.getDisplayName(e)},e))]})]})})]}),0===t.length?(0,jt.jsxs)(tk,{variant:"info",className:"text-center",children:[(0,jt.jsx)("p",{className:"mb-3",children:"You haven't created any upgrade cards yet."}),(0,jt.jsx)(nC,{as:vt,to:"/upgrades/create",variant:"primary",children:"Create Your First Upgrade Card"})]}):0===r.length?(0,jt.jsx)(tk,{variant:"warning",className:"text-center",children:(0,jt.jsx)("p",{className:"mb-0",children:"No upgrades match your filters."})}):(0,jt.jsx)(nj,{children:r.map(e=>{var t;return(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,jt.jsxs)("div",{className:"flex-grow-1",children:[(0,jt.jsxs)("h5",{className:"mb-2",children:[e.name,(0,jt.jsxs)(zN,{bg:sj.getBadgeColor(e.upgradeType),className:"ms-2",children:[(0,jt.jsx)("i",{className:sj.getIconClass(e.upgradeType)+" me-1"}),sj.getDisplayName(e.upgradeType)]}),(0,jt.jsxs)(zN,{bg:"warning",text:"dark",className:"ms-2",children:[e.pointsCost," pts"]})]}),(0,jt.jsx)("p",{className:"mb-2 text-muted",children:e.description}),(0,jt.jsxs)("div",{className:"small",children:[(0,jt.jsx)("strong",{children:"Effects:"})," ",y(e.effects)]}),(null===(t=e.reminders)||void 0===t?void 0:t.length)>0&&(0,jt.jsxs)("div",{className:"mt-2",children:[(0,jt.jsx)("strong",{className:"small",children:"Reminders:"}),(0,jt.jsx)(zN,{bg:"secondary",className:"ms-2",children:e.reminders.length})]})]}),(0,jt.jsxs)("div",{className:"ms-3 text-nowrap",children:[(0,jt.jsx)(nC,{as:vt,to:"/upgrades/edit/".concat(e.id),variant:"outline-primary",size:"sm",className:"me-2",children:"Edit"}),(0,jt.jsx)(nC,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this upgrade card? Units with this upgrade equipped may be affected."))try{await jy(wg(Xv,"users",p.uid,"upgradeCards",e)),m()}catch(t){console.error("Error deleting upgrade:",t),l("Failed to delete upgrade card")}})(e.id),children:"Delete"})]})]})},e.id)})})]})]})},mM=t=>{let{show:n,onClose:r,onSave:i,weapon:s,setWeapon:a}=t;const o=(0,e.useMemo)(()=>rT.getAllKeywords(),[]),l=e=>{const{name:t,value:n}=e.target;a(e=>c(c({},e),{},{[t]:n}))},u=e=>{a(t=>{const n=t.keywords.includes(e)?t.keywords.filter(t=>t!==e):[...t.keywords,e];return c(c({},t),{},{keywords:n})})};return(0,jt.jsxs)(eT,{show:n,onHide:r,size:"lg",backdrop:"static",children:[(0,jt.jsx)(eT.Header,{closeButton:!0,children:(0,jt.jsx)(eT.Title,{children:s.id?"Edit Weapon":"Add Weapon"})}),(0,jt.jsx)(eT.Body,{children:(0,jt.jsxs)(Xk,{onSubmit:e=>e.preventDefault(),children:[(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Weapon Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",name:"name",value:s.name,onChange:l,placeholder:"Enter weapon name",required:!0})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Range"}),(0,jt.jsx)(Xk.Select,{name:"range",value:s.range,onChange:l,children:Object.keys(tT).filter(e=>"string"===typeof tT[e]).map(e=>(0,jt.jsx)("option",{value:tT[e],children:tT.getDisplayName(tT[e])},e))})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-4",children:[(0,jt.jsx)(Xk.Label,{children:"Attack Dice"}),(0,jt.jsx)(uN,{children:[[nT.RED,"text-danger","Red Dice"],[nT.BLACK,"text-dark","Black Dice"],[nT.WHITE,"text-secondary","White Dice"]].map(e=>{let[t,n,r]=e;return(0,jt.jsxs)(Tk,{md:4,children:[(0,jt.jsx)(Xk.Label,{className:n,children:r}),(0,jt.jsx)(Xk.Control,{type:"number",min:"0",max:"10",value:s.dice[t],onChange:e=>((e,t)=>{const n=parseInt(t,10)||0;a(t=>c(c({},t),{},{dice:c(c({},t.dice),{},{[e]:n})}))})(t,e.target.value)})]},t)})})]}),(0,jt.jsxs)(Xk.Group,{className:"mb-3",children:[(0,jt.jsx)(Xk.Label,{children:"Keywords"}),(0,jt.jsx)(KC,{children:(0,jt.jsxs)(KC.Body,{className:"p-2",children:[(0,jt.jsxs)("div",{className:"mb-2",children:[(0,jt.jsx)("strong",{children:"Selected Keywords:"}),0===s.keywords.length?(0,jt.jsx)("span",{className:"text-muted ms-2",children:"None"}):(0,jt.jsx)("div",{className:"mt-1",children:s.keywords.map((e,t)=>(0,jt.jsxs)(zN,{bg:"info",className:"me-1 mb-1 p-2",style:{cursor:"pointer"},onClick:()=>u(e),children:[rT.getDisplayName(e)," \xd7"]},t))})]}),(0,jt.jsx)(jj,{children:Object.entries(o).map(e=>{let[t,n]=e;return(0,jt.jsxs)(jj.Item,{eventKey:t,children:[(0,jt.jsxs)(jj.Header,{children:[t.charAt(0).toUpperCase()+t.slice(1)," Keywords"]}),(0,jt.jsx)(jj.Body,{className:"p-0",children:(0,jt.jsx)(nj,{variant:"flush",children:n.map(e=>(0,jt.jsx)(nj.Item,{action:!0,active:s.keywords.includes(e),onClick:()=>u(e),className:"py-2",children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsx)("span",{children:rT.getDisplayName(e)}),s.keywords.includes(e)&&(0,jt.jsx)(zN,{bg:"success",children:"Selected"})]})},e))})})]},t)})})]})})]})]})}),(0,jt.jsxs)(eT.Footer,{children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:r,children:"Cancel"}),(0,jt.jsx)(nC,{variant:"primary",onClick:()=>i(s),children:"Save Weapon"})]})]})},gM=()=>{const{upgradeId:t}=ge(),n=pe(),{currentUser:r}=eb(),[i,s]=(0,e.useState)(!1),[a,o]=(0,e.useState)(""),[l,u]=(0,e.useState)(""),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)({name:"",upgradeType:sj.GEAR,pointsCost:0,description:"",effects:{modelCountChange:0,addWeapons:[],addKeywords:[],addAbilities:[],statModifiers:{}},reminders:[]}),[m,g]=(0,e.useState)([]),[y,v]=(0,e.useState)([]),[b,x]=(0,e.useState)({id:"",name:"",range:tT.MELEE,dice:{[nT.RED]:0,[nT.BLACK]:0,[nT.WHITE]:0},keywords:[]}),[w,E]=(0,e.useState)(null);(0,e.useEffect)(()=>{t&&r&&_()},[t]),(0,e.useEffect)(()=>{r&&S()},[]);const _=async()=>{try{const e=wg(Xv,"users",r.uid,"upgradeCards",t),n=await _y(e);n.exists()?p(n.data()):o("Upgrade not found.")}catch(e){console.error(e),o("Failed to fetch upgrade.")}},S=async()=>{try{const e=await Cy(xg(Xv,"users",r.uid,"customKeywords"));g(e.docs.map(e=>c({id:e.id},e.data())));const t=await Cy(xg(Xv,"users",r.uid,"abilities"));v(t.docs.map(e=>c({id:e.id},e.data())))}catch(e){console.error(e)}},C=(e,t)=>p(n=>c(c({},n),{},{effects:c(c({},n.effects),{},{[e]:t})}));return(0,jt.jsxs)(jt.Fragment,{children:[(0,jt.jsxs)(KC,{children:[(0,jt.jsx)(KC.Header,{children:(0,jt.jsxs)("h3",{children:[t?"Edit":"Create"," Upgrade Card"]})}),(0,jt.jsxs)(KC.Body,{children:[a&&(0,jt.jsx)(tk,{variant:"danger",children:a}),l&&(0,jt.jsx)(tk,{variant:"success",children:l}),(0,jt.jsxs)(Xk,{onSubmit:async e=>{if(e.preventDefault(),!f.name.trim())return o("Upgrade name is required.");try{s(!0);const e=c(c({},f),{},{lastUpdated:Ry(),userId:r.uid,isCustom:!0});t?(await Ny(wg(Xv,"users",r.uid,"upgradeCards",t),e),u("Upgrade updated!")):(await Ty(xg(Xv,"users",r.uid,"upgradeCards"),c(c({},e),{},{createdAt:Ry()})),u("Upgrade created!")),setTimeout(()=>n("/upgrades"),1e3)}catch(i){console.error(i),o("Failed to save upgrade.")}finally{s(!1)}},children:[(0,jt.jsxs)(uN,{children:[(0,jt.jsx)(Tk,{md:6,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Upgrade Name*"}),(0,jt.jsx)(Xk.Control,{type:"text",value:f.name,onChange:e=>p(c(c({},f),{},{name:e.target.value})),required:!0})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Upgrade Type*"}),(0,jt.jsx)(Xk.Select,{value:f.upgradeType,onChange:e=>p(c(c({},f),{},{upgradeType:e.target.value})),children:sj.getAllTypes().map(e=>(0,jt.jsx)("option",{value:e,children:sj.getDisplayName(e)},e))})]})}),(0,jt.jsx)(Tk,{md:3,children:(0,jt.jsxs)(Xk.Group,{children:[(0,jt.jsx)(Xk.Label,{children:"Points"}),(0,jt.jsx)(Xk.Control,{type:"number",value:f.pointsCost,onChange:e=>p(c(c({},f),{},{pointsCost:parseInt(e.target.value)||0}))})]})})]}),(0,jt.jsxs)(Xk.Group,{className:"mt-3",children:[(0,jt.jsx)(Xk.Label,{children:"Description*"}),(0,jt.jsx)(Xk.Control,{as:"textarea",value:f.description,onChange:e=>p(c(c({},f),{},{description:e.target.value})),rows:3,required:!0})]}),(0,jt.jsxs)(KC,{className:"mt-4",children:[(0,jt.jsxs)(KC.Header,{className:"d-flex justify-content-between align-items-center",children:[(0,jt.jsxs)("span",{children:["Weapons (",f.effects.addWeapons.length,")"]}),(0,jt.jsx)(nC,{variant:"primary",size:"sm",onClick:()=>{E(null),x({id:hT(),name:"",range:tT.MELEE,dice:{[nT.RED]:0,[nT.BLACK]:0,[nT.WHITE]:0},keywords:[]}),h(!0)},children:"Add Weapon"})]}),f.effects.addWeapons.length>0&&(0,jt.jsx)(nj,{variant:"flush",children:f.effects.addWeapons.map((e,t)=>(0,jt.jsx)(nj.Item,{children:(0,jt.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,jt.jsxs)("div",{children:[(0,jt.jsx)("div",{className:"fw-bold",children:e.name}),(0,jt.jsxs)("div",{className:"small text-muted",children:[tT.getDisplayName(e.range)," |"," ",e.dice[nT.RED],"R ",e.dice[nT.BLACK],"B ",e.dice[nT.WHITE],"W"]})]}),(0,jt.jsxs)("div",{children:[(0,jt.jsx)(nC,{size:"sm",variant:"outline-secondary",className:"me-2",onClick:()=>(e=>{E(e),x(c({},f.effects.addWeapons[e])),h(!0)})(t),children:"Edit"}),(0,jt.jsx)(nC,{size:"sm",variant:"outline-danger",onClick:()=>(e=>{const t=[...f.effects.addWeapons];t.splice(e,1),C("addWeapons",t)})(t),children:"Delete"})]})]})},e.id))})]}),(0,jt.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[(0,jt.jsx)(nC,{variant:"secondary",onClick:()=>n("/upgrades"),children:"Cancel"}),(0,jt.jsx)(nC,{type:"submit",variant:"primary",disabled:i,children:i?"Saving...":t?"Update Upgrade":"Create Upgrade"})]})]})]})]}),(0,jt.jsx)(mM,{show:d,onClose:()=>h(!1),onSave:e=>{if(!e.name.trim())return o("Weapon name required.");if(e.dice[nT.RED]+e.dice[nT.BLACK]+e.dice[nT.WHITE]<=0)return o("Weapon must have at least one attack die.");const t=[...f.effects.addWeapons||[]];null!==w?t[w]=e:t.push(e),C("addWeapons",t),h(!1),o("")},weapon:b,setWeapon:x})]})};const yM=function(){return(0,jt.jsx)(gt,{basename:"/legion-tracker",children:(0,jt.jsx)(tb,{children:(0,jt.jsxs)("div",{className:"d-flex flex-column min-vh-100",children:[(0,jt.jsx)(hC,{}),(0,jt.jsx)(Bt,{className:"flex-grow-1 mb-4",children:(0,jt.jsxs)(Me,{children:[(0,jt.jsx)(De,{path:"/login",element:(0,jt.jsx)(tN,{})}),(0,jt.jsx)(De,{path:"/register",element:(0,jt.jsx)(nN,{})}),(0,jt.jsx)(De,{path:"/forgot-password",element:(0,jt.jsx)(rN,{})}),(0,jt.jsx)(De,{path:"/references",element:(0,jt.jsx)(HT,{})}),(0,jt.jsx)(De,{path:"/references/:id",element:(0,jt.jsx)(HT,{})}),(0,jt.jsxs)(De,{element:(0,jt.jsx)(iN,{}),children:[(0,jt.jsx)(De,{path:"/units",element:(0,jt.jsx)(gT,{})}),(0,jt.jsx)(De,{path:"/units/:unitId",element:(0,jt.jsx)(gT,{})}),(0,jt.jsx)(De,{path:"/units/create",element:(0,jt.jsx)(gT,{})}),(0,jt.jsx)(De,{path:"/units/edit/:unitId",element:(0,jt.jsx)(gT,{})}),(0,jt.jsx)(De,{path:"/units/keywords",element:(0,jt.jsx)(lM,{})}),(0,jt.jsx)(De,{path:"/units/keywords/create",element:(0,jt.jsx)(cM,{})}),(0,jt.jsx)(De,{path:"/units/keywords/edit/:keywordId",element:(0,jt.jsx)(cM,{})}),(0,jt.jsx)(De,{path:"/units/types",element:(0,jt.jsx)(uM,{})}),(0,jt.jsx)(De,{path:"/units/types/create",element:(0,jt.jsx)(dM,{})}),(0,jt.jsx)(De,{path:"/units/types/edit/:typeId",element:(0,jt.jsx)(dM,{})}),(0,jt.jsx)(De,{path:"/armies",element:(0,jt.jsx)(_T,{})}),(0,jt.jsx)(De,{path:"/armies/:armyId",element:(0,jt.jsx)(_T,{})}),(0,jt.jsx)(De,{path:"/armies/create",element:(0,jt.jsx)(_T,{})}),(0,jt.jsx)(De,{path:"/armies/edit/:armyId",element:(0,jt.jsx)(_T,{})}),(0,jt.jsx)(De,{path:"/battles",element:(0,jt.jsx)(LT,{})}),(0,jt.jsx)(De,{path:"/battles/:battleId",element:(0,jt.jsx)(LT,{})}),(0,jt.jsx)(De,{path:"/battles/create",element:(0,jt.jsx)(LT,{})}),(0,jt.jsx)(De,{path:"/battles/edit/:battleId",element:(0,jt.jsx)(LT,{})}),(0,jt.jsx)(De,{path:"/abilities",element:(0,jt.jsx)(hM,{})}),(0,jt.jsx)(De,{path:"/abilities/create",element:(0,jt.jsx)(fM,{})}),(0,jt.jsx)(De,{path:"/abilities/edit/:abilityId",element:(0,jt.jsx)(fM,{})}),(0,jt.jsx)(De,{path:"/upgrades",element:(0,jt.jsx)(pM,{})}),(0,jt.jsx)(De,{path:"/upgrades/create",element:(0,jt.jsx)(gM,{})}),(0,jt.jsx)(De,{path:"/upgrades/edit/:upgradeId",element:(0,jt.jsx)(gM,{})}),(0,jt.jsx)(De,{path:"/references/create",element:(0,jt.jsx)(HT,{})}),(0,jt.jsx)(De,{path:"/references/edit/:id",element:(0,jt.jsx)(HT,{})}),(0,jt.jsx)(De,{path:"/profile",element:(0,jt.jsx)(aM,{})}),(0,jt.jsx)(De,{path:"/profile/settings",element:(0,jt.jsx)(aM,{})}),(0,jt.jsx)(De,{path:"/profile/stats",element:(0,jt.jsx)(aM,{})})]}),(0,jt.jsx)(De,{path:"/",element:(0,jt.jsx)(dN,{})}),(0,jt.jsx)(De,{path:"*",element:(0,jt.jsx)(oM,{})})]})}),(0,jt.jsx)(fC,{})]})})})},vM=document.getElementById("root");(0,t.createRoot)(vM).render((0,jt.jsx)(e.StrictMode,{children:(0,jt.jsx)(yM,{})}))})()})();
//# sourceMappingURL=main.f4e28810.js.map